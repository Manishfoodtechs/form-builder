/**
 * Bundle of AWES form-builder transpiled and polyfilled
 * Generated: 2019-05-01 15:57:20
 * Version: 1.4.2
 */

!function(){"use strict";var e,t=function(e){return"object"==typeof e?null!==e:"function"==typeof e},i=function(e){if(!t(e))throw TypeError(e+" is not an object!");return e},r=Math.ceil,n=Math.floor,o=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)},s=Math.min,a=function(e){return e>0?s(o(e),9007199254740991):0},u=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},l=(e=!0,function(t,i){var r,n,s=String(u(t)),a=o(i),l=s.length;return a<0||a>=l?e?"":void 0:(r=s.charCodeAt(a))<55296||r>56319||a+1===l||(n=s.charCodeAt(a+1))<56320||n>57343?e?s.charAt(a):r:e?s.slice(a,a+2):n-56320+(r-55296<<10)+65536}),c=function(e,t,i){return t+(i?l(e,t).length:1)},d={}.toString,f=function(e){return d.call(e).slice(8,-1)};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function h(e,t){return e(t={exports:{}},t.exports),t.exports}var m,p,v=h(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),b=(v.version,h(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),_=h(function(e){var t=b["__core-js_shared__"]||(b["__core-js_shared__"]={});(e.exports=function(e,i){return t[e]||(t[e]=void 0!==i?i:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),g=0,y=Math.random(),E=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++g+y).toString(36))},k=h(function(e){var t=_("wks"),i=b.Symbol,r="function"==typeof i;(e.exports=function(e){return t[e]||(t[e]=r&&i[e]||(r?i:E)("Symbol."+e))}).store=t}),w=k("toStringTag"),F="Arguments"==f(function(){return arguments}()),S=function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),w))?i:F?f(t):"Object"==(r=f(t))&&"function"==typeof t.callee?"Arguments":r},x=RegExp.prototype.exec,A=function(e,t){var i=e.exec;if("function"==typeof i){var r=i.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==S(e))throw new TypeError("RegExp#exec called on incompatible receiver");return x.call(e,t)},I=RegExp.prototype.exec,O=String.prototype.replace,T=I,C=(m=/a/,p=/b*/g,I.call(m,"a"),I.call(p,"a"),0!==m.lastIndex||0!==p.lastIndex),V=void 0!==/()??/.exec("")[1];(C||V)&&(T=function(e){var t,r,n,o,s=this;return V&&(r=new RegExp("^"+s.source+"$(?!\\s)",function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}.call(s))),C&&(t=s.lastIndex),n=I.call(s,e),C&&n&&(s.lastIndex=s.global?n.index+n[0].length:t),V&&n&&n.length>1&&O.call(n[0],r,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n});var N=T,$=function(e){try{return!!e()}catch(e){return!0}},M=!$(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),D=b.document,R=t(D)&&t(D.createElement),j=function(e){return R?D.createElement(e):{}},L=!M&&!$(function(){return 7!=Object.defineProperty(j("div"),"a",{get:function(){return 7}}).a}),P=function(e,i){if(!t(e))return e;var r,n;if(i&&"function"==typeof(r=e.toString)&&!t(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!t(n=r.call(e)))return n;if(!i&&"function"==typeof(r=e.toString)&&!t(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},W=Object.defineProperty,H={f:M?Object.defineProperty:function(e,t,r){if(i(e),t=P(t,!0),i(r),L)try{return W(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},z=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},U=M?function(e,t,i){return H.f(e,t,z(1,i))}:function(e,t,i){return e[t]=i,e},B={}.hasOwnProperty,X=function(e,t){return B.call(e,t)},Y=_("native-function-to-string",Function.toString),q=h(function(e){var t=E("src"),i=(""+Y).split("toString");v.inspectSource=function(e){return Y.call(e)},(e.exports=function(e,r,n,o){var s="function"==typeof n;s&&(X(n,"name")||U(n,"name",r)),e[r]!==n&&(s&&(X(n,t)||U(n,t,e[r]?""+e[r]:i.join(String(r)))),e===b?e[r]=n:o?e[r]?e[r]=n:U(e,r,n):(delete e[r],U(e,r,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||Y.call(this)})}),G=function(e,t,i){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,r){return e.call(t,i,r)};case 3:return function(i,r,n){return e.call(t,i,r,n)}}return function(){return e.apply(t,arguments)}},Z=function(e,t,i){var r,n,o,s,a=e&Z.F,u=e&Z.G,l=e&Z.S,c=e&Z.P,d=e&Z.B,f=u?b:l?b[t]||(b[t]={}):(b[t]||{}).prototype,h=u?v:v[t]||(v[t]={}),m=h.prototype||(h.prototype={});for(r in u&&(i=t),i)o=((n=!a&&f&&void 0!==f[r])?f:i)[r],s=d&&n?G(o,b):c&&"function"==typeof o?G(Function.call,o):o,f&&q(f,r,o,e&Z.U),h[r]!=o&&U(h,r,s),c&&m[r]!=o&&(m[r]=o)};b.core=v,Z.F=1,Z.G=2,Z.S=4,Z.P=8,Z.B=16,Z.W=32,Z.U=64,Z.R=128;var J=Z;J({target:"RegExp",proto:!0,forced:N!==/./.exec},{exec:N});var K=k("species"),Q=!$(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),ee=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();!function(e,t,i){var r=k(e),n=!$(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)}),o=n?!$(function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[K]=function(){return i}),i[r](""),!t}):void 0;if(!n||!o||"replace"===e&&!Q||"split"===e&&!ee){var s=/./[r],a=i(u,r,""[e],function(e,t,i,r,o){return t.exec===N?n&&!o?{done:!0,value:s.call(t,i,r)}:{done:!0,value:e.call(i,t,r)}:{done:!1}}),l=a[0],c=a[1];q(String.prototype,e,l),U(RegExp.prototype,r,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}}("match",1,function(e,t,r,n){return[function(i){var r=e(this),n=null==i?void 0:i[t];return void 0!==n?n.call(i,r):new RegExp(i)[t](String(r))},function(e){var t=n(r,e,this);if(t.done)return t.value;var o=i(e),s=String(this);if(!o.global)return A(o,s);var u=o.unicode;o.lastIndex=0;for(var l,d=[],f=0;null!==(l=A(o,s));){var h=String(l[0]);d[f]=h,""===h&&(o.lastIndex=c(s,a(o.lastIndex),u)),f++}return 0===f?null:d}]});var te=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==f(e)?e.split(""):Object(e)},ie=function(e){return te(u(e))},re=Math.max,ne=Math.min,oe=function(e){return function(t,i,r){var n,s=ie(t),u=a(s.length),l=function(e,t){return(e=o(e))<0?re(e+t,0):ne(e,t)}(r,u);if(e&&i!=i){for(;u>l;)if((n=s[l++])!=n)return!0}else for(;u>l;l++)if((e||l in s)&&s[l]===i)return e||l||0;return!e&&-1}},se=k("unscopables"),ae=Array.prototype;null==ae[se]&&U(ae,se,{});var ue=function(e){ae[se][e]=!0},le=oe(!0);J(J.P,"Array",{includes:function(e){return le(this,e,arguments.length>1?arguments[1]:void 0)}}),ue("includes");var ce=k("match"),de=function(e,i,r){if(t(n=i)&&(void 0!==(o=n[ce])?o:"RegExp"==f(n)))throw TypeError("String#"+r+" doesn't accept regex!");var n,o;return String(u(e))},fe=k("match");J(J.P+J.F*function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[fe]=!1,!"/./"[e](t)}catch(e){}}return!0}("includes"),"String",{includes:function(e){return!!~de(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}});var he=0,me=[{type:"beforeunload",handler:"windowUnloadHandler"}];var pe=function(e,t,i,r,n,o,s,a,u,l){"boolean"!=typeof s&&(u=a,a=s,s=!1);var c,d="function"==typeof i?i.options:i;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,n&&(d.functional=!0)),r&&(d._scopeId=r),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=c):t&&(c=s?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),c)if(d.functional){var f=d.render;d.render=function(e,t){return c.call(t),f(e,t)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,c):[c]}return i},ve=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"form-builder",class:{modal_form:e.modal},attrs:{action:e.replacedUrl,method:e.method},on:{submit:function(t){return t.preventDefault(),e.send(t)}}},[e._t("default",null,null,e.fields),e.autoSubmit?e._e():i("div",{class:e.modal?"line-btns":null},[i("div",{class:e.modal?"line-btns__wrap":"line-btns"},[i("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],staticClass:"btn btn-send has-wave",class:{"loading-inline":e.isLoading},attrs:{disabled:!e.isEdited||e.isLoading,"data-loading":e.$lang.FORMS_LOADING,type:"submit","data-awes":"modal_button_ok"},on:{shortkey:e.send}},[e._v(" "+e._s(e.sendText||e.$lang.FORMS_SEND)+" "),i("span",{staticClass:"wave"})]),e.modal||e.$listeners.cancel?i("button",e._g({directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],staticClass:"btn has-wave",class:{btn_transparent:e.$listeners.cancel},attrs:{type:"button"}},{shortkey:e.close,click:e.modal?e.close:e.$listeners.cancel}),[e._v(" "+e._s(e.cancelText||e.$lang.FORMS_CANCEL)+" "),i("span",{staticClass:"wave"})]):e._e(),e._t("buttons-after")],2)])],2)},staticRenderFns:[]},void 0,{name:"form-builder",props:{name:{type:String,default:function(){return"form-builder-".concat(he++)}},url:{type:String,required:!0},method:{type:String,default:"post",validator:function(e){return void 0===e||["get","put","post","delete","patch"].includes(e.toLowerCase())}},default:Object,storeData:String,sendText:String,cancelText:String,loadingText:String,disabledDialog:{type:Boolean,default:!1},autoSubmit:{type:Boolean,default:!1}},inject:{modal:{from:"modal",default:!1}},provide:function(){return{formId:this.name,isModal:!1!==this.modal}},computed:{form:function(){return this.$store.state.forms[this.name]},isLoading:function(){return this.form&&this.form.isLoading},isEdited:function(){return this.form&&this.form.isEdited},fields:function(){return this.$store.getters["forms/fields"](this.name)},replacedUrl:function(){var e=this,t=this.url;if(this.form){var i=t.match(/(?!{)([\w.\[\]]+)(?=})/g);i&&i.length&&i.forEach(function(i){t=t.replace("{"+i+"}",AWES.utils.object.get(e.form.initialState,i,""))})}return t.replace(/([^:]\/)\/+/g,"$1")}},methods:{send:function(){var e=this;!this.isLoading&&this.isEdited&&(AWES.emit("form-builder::".concat(this.name,":before-send")),this.$listeners.send?this.$store.dispatch("forms/restoreData",{formName:this.name}).then(function(t){e.$emit("send",t)}):this.$store.dispatch("forms/sendForm",{formName:this.name,url:this.replacedUrl,method:this.method}).then(function(t){e.$emit(t.success?"sended":"error",t.data),e.storeData&&t.success&&e.$store.$set(e.storeData,e.$get(t.data,"data",{})),e.modal&&t.success&&e.close()}))},addUnloadHandlers:function(){var e=this;me.forEach(function(t){window.addEventListener(t.type,e[t.handler],!1)})},removeUnloadHandlers:function(){var e=this;me.forEach(function(t){window.removeEventListener(t.type,e[t.handler])})},checkCloseAllowed:function(){return!!this.disabledDialog||(!this.isEdited||confirm(this.$lang.FORMS_CONFIRM))},windowUnloadHandler:function(e){return!(!this.disabledDialog&&this.isEdited)||(e.returnValue=this.$lang.FORMS_CONFIRM,this.$lang.FORMS_CONFIRM)},close:function(){this.checkCloseAllowed()&&(this.removeUnloadHandlers(),AWES.off("modal::".concat(this.modal.name,":before-close"),this.preventModalClose),this.modal.close())},preventModalClose:function(e){this.checkCloseAllowed()||e.detail.preventClose()}},created:function(){var e=this,t=this.storeData?this.$store.state[this.storeData]:this.default||{};this.$store.commit("forms/createForm",{formName:this.name,fields:t}),this.modal&&this.$watch("isEdited",function(t){AWES[t?"on":"off"]("modal::".concat(e.modal.name,":before-close"),e.preventModalClose)})},mounted:function(){this.addUnloadHandlers(),this.autoSubmit&&this.$watch("fields",this.send,{deep:!0})},beforeDestroy:function(){this.removeUnloadHandlers()},destroyed:function(){AWES.off("modal::".concat(this.modal.name,":before-close"),this.preventModalClose),this.$store.commit("forms/deleteForm",this.name)}},void 0,!1,void 0,void 0,void 0),be=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-popover",{staticClass:"display-block",attrs:{placement:e.placement,open:e.open,"popover-class":["theme-error",{tooltip_modal:e.isModal}]}},[e._t("default"),e.open?i("span",{staticClass:"tooltip__text",attrs:{slot:"popover"},on:{click:function(t){return e.$emit("clickTooltip")}},slot:"popover"},[i("span",{staticClass:"errors__list"},[e._v(" "+e._s(e.errorText)+" ")])]):e._e()],2)},staticRenderFns:[]},void 0,{name:"error-wrap",inject:{isModal:{from:"isModal",default:!1}},props:{open:{type:Boolean,default:!1},placement:{type:String,default:"top"},error:{type:[String,Array]}},computed:{errorText:function(){return Array.isArray(this.error)?this.error.join(", "):this.error}}},void 0,!1,void 0,void 0,void 0),_e={f:{}.propertyIsEnumerable},ge=Object.getOwnPropertyDescriptor,ye={f:M?ge:function(e,t){if(e=ie(e),t=P(t,!0),L)try{return ge(e,t)}catch(e){}if(X(e,t))return z(!_e.f.call(e,t),e[t])}},Ee=function(e,r){if(i(e),!t(r)&&null!==r)throw TypeError(r+": can't set as prototype!")},ke={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=G(Function.call,ye.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return Ee(e,r),t?e.__proto__=r:i(e,r),e}}({},!1):void 0),check:Ee}.set,we=_("keys"),Fe=function(e){return we[e]||(we[e]=E(e))},Se=oe(!1),xe=Fe("IE_PROTO"),Ae=function(e,t){var i,r=ie(e),n=0,o=[];for(i in r)i!=xe&&X(r,i)&&o.push(i);for(;t.length>n;)X(r,i=t[n++])&&(~Se(o,i)||o.push(i));return o},Ie="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Oe=Ie.concat("length","prototype"),Te={f:Object.getOwnPropertyNames||function(e){return Ae(e,Oe)}},Ce="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Ve="["+Ce+"]",Ne=RegExp("^"+Ve+Ve+"*"),$e=RegExp(Ve+Ve+"*$"),Me=function(e,t,i){var r={},n=$(function(){return!!Ce[e]()||"âÂ"!="âÂ"[e]()}),o=r[e]=n?t(De):Ce[e];i&&(r[i]=o),J(J.P+J.F*n,"String",r)},De=Me.trim=function(e,t){return e=String(u(e)),1&t&&(e=e.replace(Ne,"")),2&t&&(e=e.replace($e,"")),e},Re=Me,je=Object.keys||function(e){return Ae(e,Ie)},Le=M?Object.defineProperties:function(e,t){i(e);for(var r,n=je(t),o=n.length,s=0;o>s;)H.f(e,r=n[s++],t[r]);return e},Pe=b.document,We=Pe&&Pe.documentElement,He=Fe("IE_PROTO"),ze=function(){},Ue=function(){var e,t=j("iframe"),i=Ie.length;for(t.style.display="none",We.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Ue=e.F;i--;)delete Ue.prototype[Ie[i]];return Ue()},Be=Object.create||function(e,t){var r;return null!==e?(ze.prototype=i(e),r=new ze,ze.prototype=null,r[He]=e):r=Ue(),void 0===t?r:Le(r,t)},Xe=Te.f,Ye=ye.f,qe=H.f,Ge=Re.trim,Ze=b.Number,Je=Ze,Ke=Ze.prototype,Qe="Number"==f(Be(Ke)),et="trim"in String.prototype,tt=function(e){var t=P(e,!1);if("string"==typeof t&&t.length>2){var i,r,n,o=(t=et?t.trim():Ge(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(i=t.charCodeAt(2))||120===i)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t}for(var s,a=t.slice(2),u=0,l=a.length;u<l;u++)if((s=a.charCodeAt(u))<48||s>n)return NaN;return parseInt(a,r)}}return+t};if(!Ze(" 0o1")||!Ze("0b1")||Ze("+0x1")){Ze=function(e){var i=arguments.length<1?0:e,r=this;return r instanceof Ze&&(Qe?$(function(){Ke.valueOf.call(r)}):"Number"!=f(r))?function(e,i,r){var n,o=i.constructor;return o!==r&&"function"==typeof o&&(n=o.prototype)!==r.prototype&&t(n)&&ke&&ke(e,n),e}(new Je(tt(i)),r,Ze):tt(i)};for(var it,rt=M?Xe(Je):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),nt=0;rt.length>nt;nt++)X(Je,it=rt[nt])&&!X(Ze,it)&&qe(Ze,it,Ye(Je,it));Ze.prototype=Ke,Ke.constructor=Ze,q(b,"Number",Ze)}function ot(e){return e&&e.split(/(?:\]?\.|\[(?:\'|\")?|(?:\'|\")?\])/g).filter(function(e){return""!==e}).map(function(e){return e.match(/^\d+$/)?"["+e+"]":e.match(/ /)?"['"+e+"']":"."+e}).join("").replace(/^\./,"")}var st={props:{name:String,id:Number,disabled:{type:Boolean,default:!1}},inject:{formId:{from:"formId",default:!1},isModal:{from:"isModal",default:!1},multiblock:{from:"multiblock",default:!1}},computed:{realName:function(){return this.multiblock?"".concat(this.multiblock,"[").concat(this.id,"].").concat(ot(this.name)):ot(this.name)},formLoading:function(){return this.$store.getters["forms/isLoading"](this.formId)},isDisabled:function(){return this.formLoading||this.disabled||this.isMultiblockDisabled},isMultiblockDisabled:function(){return!!this.multiblock&&this.$store.getters["forms/isMultiblockDisabled"](this.formId,this.multiblock)}}},at=function(e){return Object(u(e))},ut=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}},lt={},ct=k("iterator"),dt=Array.prototype,ft=function(e,t,i){t in e?H.f(e,t,z(0,i)):e[t]=i},ht=k("iterator"),mt=v.getIteratorMethod=function(e){if(null!=e)return e[ht]||e["@@iterator"]||lt[S(e)]},pt=k("iterator"),vt=!1;try{[7][pt]().return=function(){vt=!0}}catch(e){}J(J.S+J.F*!function(e,t){if(!t&&!vt)return!1;var i=!1;try{var r=[7],n=r[pt]();n.next=function(){return{done:i=!0}},r[pt]=function(){return n},e(r)}catch(e){}return i}(function(e){}),"Array",{from:function(e){var t,i,r,n,o,s=at(e),u="function"==typeof this?this:Array,l=arguments.length,c=l>1?arguments[1]:void 0,d=void 0!==c,f=0,h=mt(s);if(d&&(c=G(c,l>2?arguments[2]:void 0,2)),null!=h&&(u!=Array||(void 0===(o=h)||lt.Array!==o&&dt[ct]!==o)))for(n=h.call(s),i=new u;!(r=n.next()).done;f++)ft(i,f,d?ut(n,c,[r.value,f],!0):r.value);else for(i=new u(t=a(s.length));t>f;f++)ft(i,f,d?c(s[f],f):s[f]);return i.length=f,i}});var bt=Array.isArray||function(e){return"Array"==f(e)},_t=k("species"),gt=function(e,i){return new(function(e){var i;return bt(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!bt(i.prototype)||(i=void 0),t(i)&&null===(i=i[_t])&&(i=void 0)),void 0===i?Array:i}(e))(i)},yt=function(e,t){var i=1==e,r=2==e,n=3==e,o=4==e,s=6==e,u=5==e||s,l=t||gt;return function(t,c,d){for(var f,h,m=at(t),p=te(m),v=G(c,d,3),b=a(p.length),_=0,g=i?l(t,b):r?l(t,0):void 0;b>_;_++)if((u||_ in p)&&(h=v(f=p[_],_,m),e))if(i)g[_]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return _;case 2:g.push(f)}else if(o)return!1;return s?-1:n||o?o:g}},Et=yt(6),kt="findIndex",wt=!0;kt in[]&&Array(1)[kt](function(){wt=!1}),J(J.P+J.F*wt,"Array",{findIndex:function(e){return Et(this,e,arguments.length>1?arguments[1]:void 0)}}),ue(kt);var Ft=function(e,t){return{value:t,done:!!e}},St=H.f,xt=k("toStringTag"),At=function(e,t,i){e&&!X(e=i?e:e.prototype,xt)&&St(e,xt,{configurable:!0,value:t})},It={};U(It,k("iterator"),function(){return this});var Ot=function(e,t,i){e.prototype=Be(It,{next:z(1,i)}),At(e,t+" Iterator")},Tt=Fe("IE_PROTO"),Ct=Object.prototype,Vt=Object.getPrototypeOf||function(e){return e=at(e),X(e,Tt)?e[Tt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ct:null},Nt=k("iterator"),$t=!([].keys&&"next"in[].keys()),Mt=function(){return this};!function(e,t,i,r,n,o,s){Ot(i,t,r);var a,u,l,c=function(e){if(!$t&&e in m)return m[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},d=t+" Iterator",f="values"==n,h=!1,m=e.prototype,p=m[Nt]||m["@@iterator"]||n&&m[n],v=p||c(n),b=n?f?c("entries"):v:void 0,_="Array"==t&&m.entries||p;if(_&&(l=Vt(_.call(new e)))!==Object.prototype&&l.next&&(At(l,d,!0),"function"!=typeof l[Nt]&&U(l,Nt,Mt)),f&&p&&"values"!==p.name&&(h=!0,v=function(){return p.call(this)}),($t||h||!m[Nt])&&U(m,Nt,v),lt[t]=v,lt[d]=Mt,n)if(a={values:f?v:c("values"),keys:o?v:c("keys"),entries:b},s)for(u in a)u in m||q(m,u,a[u]);else J(J.P+J.F*($t||h),t,a)}(Array,"Array",function(e,t){this._t=ie(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,Ft(1)):Ft(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values");lt.Arguments=lt.Array,ue("keys"),ue("values"),ue("entries");var Dt={};Dt[k("toStringTag")]="z",Dt+""!="[object z]"&&q(Object.prototype,"toString",function(){return"[object "+S(this)+"]"},!0);function Rt(e,t,i){function r(e){if(!i||0===Object.keys(i).length)return e;for(var t in i)e[t]=i[t];return e}if(document.createEvent){var n=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(r(n))}else{var o=document.createEventObject();t.fireEvent("on"+e,r(o))}}!function(e,t){var i=(v.Object||{})[e]||Object[e],r={};r[e]=t(i),J(J.S+J.F*$(function(){i(1)}),"Object",r)}("keys",function(){return function(e){return je(at(e))}});var jt={mixins:[st,{props:{enterSkip:{type:Boolean,default:!1},focus:{type:Boolean,default:!1}},data:function(){return{inFocus:this.focus}},computed:{isFocusable:function(){return!this.enterSkip&&!this.disabled&&this.formId}},methods:{focusNext:function(e){var t=this;try{var i=e.target.closest("form"),r=i.querySelectorAll(".is-focusable"),n=Array.from(r).findIndex(function(t){return t===e.target})+1;if(n<r.length)r[n].focus();else{e.target.blur();var o=i.querySelector('[type="submit"]');this.$nextTick(function(){o.click(),t.initWawesEffect(o)})}}catch(e){console.warn("Error while setting focus"),console.error(e)}},setFocus:function(e){try{var t=!1!==e?"focus":"blur";this.$refs.element[t]()}catch(e){console.warn("Error while setting focus"),console.error(e)}},initWawesEffect:function(e){var t={top:0,left:0};"function"==typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect()),Rt("mousedown",e,{pageY:t.top+window.pageYOffset-document.documentElement.clientTop+e.clientHeight/2,pageX:t.left+window.pageXOffset-document.documentElement.clientLeft+e.clientWidth/2}),setTimeout(Rt,250,"mouseup",e)}},mounted:function(){this.setFocus(this.focus)}}],props:{label:String},data:function(){return{showTooltip:!1,hasError:!1}},computed:{formValue:{get:function(){return this.$store.getters["forms/fieldValue"](this.formId,this.realName)},set:function(e){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:e})}},shake:function(){return!this.formLoading&&this.showTooltip},error:function(){return this.$store.getters["forms/fieldError"](this.formId,this.realName)},firstErrorField:function(){return this.$store.getters["forms/firstErrorField"](this.formId)}},watch:{error:{handler:function(e){e?(this.showTooltip=!0,this.hasError=!0,this.checkFocus()):(this.showTooltip=!1,this.hasError=!1,this.resetInputWatcher())},immediate:!0}},methods:{initField:function(){this.formId&&(void 0===this.formValue?this.createStoreInstance():this.fieldValue=this.formValue),this.$root.$on("forms:reset",this.resetFormValue)},createStoreInstance:function(){this.$store.commit("forms/createField",{formName:this.formId,fieldName:this.realName,value:this.value})},clickTooltip:function(){this.showTooltip=!1,"function"==typeof this.setFocus&&this.setFocus()},resetError:function(){this.showTooltip=!1,this.$store.commit("forms/resetError",{formName:this.formId,fieldName:this.realName}),this.resetInputWatcher()},resetInputWatcher:function(){this.$refs.element&&this.$refs.element.removeEventListener("input",this.resetError)},resetFormValue:function(e){this.formId===e&&(this.formValue=AWES.utils.object.get(this.$options,"props.value.default"))},checkFocus:function(){"function"==typeof this.setFocus&&this.firstErrorField===this.realName&&(setTimeout(this.setFocus,0),this.$store.commit("resetFirstErrorField",this.formId))},destroyField:function(){this.$store.commit("forms/deleteField",{formName:this.formId,fieldName:this.realName}),this.resetInputWatcher(),this.$root.$off("forms:reset",this.resetFormValue)}},created:function(){this.initField()},destroyed:function(){this.destroyField()}},Lt={mixins:[jt],props:{value:{type:String,default:""},debounce:{type:[String,Number],default:300}},computed:{isActive:function(){return!!(this.inFocus||this.value||this.formValue)}},methods:{formValueHandler:function(e){var t=this;this.error?(this.formValue=e.target.value,this.resetError()):(clearTimeout(this.__debounce),this.__debounce=setTimeout(function(){t.formValue=e.target.value},Number(this.debounce)))},vModelHandler:function(e){this.$emit("input",e.target.value)},save:function(){clearTimeout(this.__debounce),this.$refs.element&&(this.formValue=this.$refs.element.value)}},mounted:function(){this.formId&&AWES.on("form-builder::".concat(this.formId,":before-send"),this.save)},beforeDestroy:function(){this.formId&&AWES.off("form-builder::".concat(this.formId,":before-send"),this.save)}},Pt=0,Wt=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fb-input","fb-element",{"fb-input_disabled":e.isDisabled,"fb-input_active":e.isActive||e.autoFilled,"fb-input_error":e.hasError,"animated shake":e.shake},e.$attrs.type?"fb-input_type-"+e.$attrs.type:""]},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("label",{staticClass:"fb-input__label fb-input__label_field",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),e.mask?i("input",e._g(e._b({directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],ref:"element",class:["fb-input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{"fb-input__field_password":"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,type:e.inputType,disabled:e.isDisabled},domProps:{value:e.formId?e.formValue:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.save(),e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))},animationstart:e.autoFillHack}},"input",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler})):i("input",e._g(e._b({ref:"element",class:["fb-input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{"fb-input__field_password":"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,type:e.inputType,disabled:e.isDisabled},domProps:{value:e.formId?e.formValue:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.save(),e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))},animationstart:e.autoFillHack}},"input",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler})),"password"===e.$attrs.type?i("button",{staticClass:"fb-input__eye",attrs:{type:"button",tabindex:"-1","aria-label":e.$lang.SHOW_PASSWORD},on:{click:function(t){return t.preventDefault(),e.togglePassword(t)}}},[i("i",{class:["icon","password"===e.inputType?"icon-eye":"icon-eye2"]})]):e._e()])],1)},staticRenderFns:[]},void 0,{name:"fb-input",inheritAttrs:!1,mixins:[Lt],props:{label:{type:String,default:""},mask:String},data:function(){return{inputType:this.$attrs.type||"text",autoFilled:!1}},computed:{inputId:function(){return"input-"+Pt++}},methods:{togglePassword:function(){this.setFocus(),"password"===this.inputType?this.inputType="text":this.inputType="password"},autoFillHack:function(e){switch(e.animationName){case"autoFillStart":this.autoFilled=!0;break;case"autoFillEnd":this.autoFilled=!1}}}},void 0,!1,void 0,void 0,void 0),Ht=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fb-multiblock fb-element",class:[{"fb-multiblock_disabled":this.isDisabled}]},[e._l(e.blocks,function(t){return i("div",{key:t,class:["fb-multiblock__block",{"fb-multiblock_has-close":e.hasClose}]},[e._t("default",null,{id:t}),e.hasClose?i("button",{staticClass:"fb-multiblock__clear",attrs:{"aria-label":"delete"},on:{click:function(i){return i.preventDefault(),e.removeField(t)}}},[i("i",{staticClass:"icon icon-cross"})]):e._e()],2)}),i("button",{staticClass:"fb-multiblock__add",on:{click:function(t){return t.preventDefault(),e.addField(t)}}},[e._v(" "+e._s(e.label||e.$lang.FORMS_MULTIBLOCK_ADD)+" ")])],2)},staticRenderFns:[]},void 0,{name:"fb-multi-block",mixins:[st],props:{label:String},provide:function(){return{multiblock:this.realName,nextIndex:0}},computed:{blocks:function(){return this.$store.getters["forms/multiblockIds"](this.formId,this.name)},hasClose:function(){return this.blocks.length>1},errors:function(){return this.$store.getters["forms/errorsOrFalse"](this.formId)},fields:function(){return this.$options}},watch:{disabled:function(e){this.$store.commit("forms/toggleMultiblockState",{formName:this.formId,multiblockName:this.realName,status:e})}},methods:{addField:function(){this.isDisabled||(this.$store.commit("forms/addMultiblockId",{formName:this.formId,multiblockName:this.name,id:this.nextIndex++}),this.updateTooltips())},removeField:function(e){this.isDisabled||(this.$store.commit("forms/deleteMultiblockId",{formName:this.formId,multiblockName:this.name,id:e}),this.updateTooltips())},updateTooltips:function(){this.errors&&this.$nextTick(function(){Rt("scroll",window)})},initMultiblock:function(){this.$store.commit("forms/createMutiblock",{formName:this.formId,multiblockName:this.realName,disabled:this.disabled}),this.nextIndex=Math.max.apply(null,this.blocks)+1},destroyMultiblock:function(){this.$store.commit("forms/deleteMultiblock",{formName:this.formId,multiblockName:this.realName})}},created:function(){this.initMultiblock()},destroyed:function(){this.destroyMultiblock()}},void 0,!1,void 0,void 0,void 0),zt={mixins:[jt],props:{value:{type:[Boolean,Number,Array],default:0},defaultValue:String,label:{type:String,required:!0}},data:function(){return{isNumeric:!0}},computed:{isActive:function(){return!!(this.formId?this.formValue:this.vModelChecked)},vModelArray:function(){return!this.formId&&Array.isArray(this.value)},vModelChecked:function(){return this.vModelArray?this.value.includes(this.computedValue):this.value},computedValue:function(){return this.defaultValue||this.label.replace(/ /g,"_").toLowerCase()}},created:function(){this.formId&&"boolean"==typeof this.formValue&&(this.isNumeric=!1)}},Ut=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fb-checkbox","fb-element",{"fb-checkbox_error":e.hasError},{"fb-checkbox_active":e.isActive},{"fb-checkbox_disabled":e.isDisabled}]},[i("label",{staticClass:"fb-checkbox__label",attrs:{"data-awes":e.$options.name+"."+e.name}},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("input",e._g(e._b({ref:"element",class:{"is-focusable":e.isFocusable,"in-focus":e.inFocus},attrs:{type:"checkbox",disabled:e.isDisabled},domProps:{value:e.computedValue,checked:e.formId?e.formValue:e.vModelChecked},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))}}},"input",e.$attrs,!1),{change:e.formId?e.formValueHandler:e.vModelHandler})),i("span",{staticClass:"fb-checkbox__text"},[i("i",{staticClass:"icon icon-checkbox"}),i("span",[e._v(e._s(e.label))])])])],1)])},staticRenderFns:[]},void 0,{name:"fb-checkbox",inheritAttrs:!1,mixins:[zt],methods:{formValueHandler:function(e){var t=e.target.checked;this.formValue=this.isNumeric?Number(t):t,this.error&&this.resetError()},vModelHandler:function(e){var t,i=this;this.vModelArray?(t=this.value.slice(),e.target.checked&&!this.vModelChecked?t.push(this.computedValue):!e.target.checked&&this.vModelChecked&&t.splice(t.findIndex(function(e){return e===i.computedValue}),1)):t=e.target.checked,this.$emit("input",t)}}},void 0,!1,void 0,void 0,void 0),Bt=yt(5),Xt=!0;function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"find"in[]&&Array(1).find(function(){Xt=!1}),J(J.P+J.F*Xt,"Array",{find:function(e){return Bt(this,e,arguments.length>1?arguments[1]:void 0)}}),ue("find");var qt=20,Gt=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fb-select fb-element",class:[{"fb-select_active":e.isActive},{"fb-select_opened":e.isOpened},{"fb-select_disabled":e.disabled}]},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("span",{staticClass:"fb-select__label"},[e._v(e._s(e.label||e.$lang.FORMS_SELECT_LABEL))]),i("multiselect",e._g({ref:"select",staticClass:"fb-select__field",attrs:{taggable:e.taggable,"show-labels":!1,multiple:e.multiple,"hide-selected":e.multiple,placeholder:e.placeholderText||e.defaultPlaceholder,"tag-placeholder":e.$lang.FORMS_SELECT_ADD_TAG,"internal-search":!e.isAjax,loading:e.isLoading,value:e.formId?e.convertValue(e.formValue):e.value,options:e.usedOptions,label:e.optionsName,"track-by":e.optionsValue,disabled:e.isDisabled},on:{open:function(t){e.isOpened=!0},close:function(t){e.isOpened=!1},tag:e.addOption}},{input:e.formId?e.formValueHandler:e.vModelHandler}),[i("template",{slot:"noOptions"},[e._v(e._s(e.$lang.FORMS_SELECT_EMPTY))])],2)],1)],1)},staticRenderFns:[]},void 0,{name:"fb-select",mixins:[jt],components:{Multiselect:function(e){AWES.utils.loadModules({"vue-multiselect":{src:["https://unpkg.com/vue-multiselect@2.1.3/dist/vue-multiselect.min.js","https://unpkg.com/vue-multiselect@2.1.3/dist/vue-multiselect.min.css"],deps:["vue"],cb:function(){e(window.VueMultiselect.default)}}})}},props:{value:{},selectOptions:{type:Array,default:function(){return[]}},url:String,optionsName:{type:String,default:"name"},optionsValue:{type:String,default:"value"},multiple:{type:Boolean,default:!0},taggable:{type:Boolean,default:!1},debounce:{type:[String,Number],default:1e3},autoFetch:{type:[String,Boolean],default:!1},placeholderText:String},data:function(){return{isOpened:!1,isLoading:!1,ajaxOptions:[],addedOptions:[]}},computed:{computedValue:function(){return this.formId?this.formValue:this.value},hasValue:function(){return!!(this.multiple?this.computedValue&&this.computedValue.length:this.computedValue)},isActive:function(){return this.isOpened||this.hasValue},isAjax:function(){return void 0!==this.url},defaultPlaceholder:function(){return this.$lang[this.isAjax?"FORMS_SELECT_AJAX_PLACEHOLDER":"FORMS_SELECT_PLACEHOLDER"]},allOptions:function(){var e=this;return Array.prototype.concat(this.addedOptions,this.selectOptions,this.ajaxOptions).map(function(t){if(["string","number"].includes(Yt(t))){var i={};return i[e.optionsName]=i[e.optionsValue]=t,i}return t})},usedOptions:function(){var e=this;return this.allOptions.filter(function(t,i,r){return!!t&&r.findIndex(function(i){return i[e.optionsName]===t[e.optionsName]&&i[e.optionsValue]===t[e.optionsValue]})===i})}},methods:{formValueHandler:function(e){var t=this;e&&(this.formValue=Array.isArray(e)?e.map(function(e){return e[t.optionsValue]}):e[this.optionsValue],this.error&&this.resetError())},vModelHandler:function(e){e&&this.$emit("input",e)},convertValue:function(e){var t=this;return this.multiple?Array.isArray(e)?this.usedOptions.filter(function(i){return e.includes(i[t.optionsValue])}):this.usedOptions.filter(function(i){return e===i[t.optionsValue]}):this.usedOptions.find(function(i){return e===i[t.optionsValue]})},resetFormValue:function(e){this.formId===e&&(this.formValue=this.multiple?[]:void 0)},setFocus:function(e){try{var t=!1!==e?"focus":"blur";this.$refs.select.$el[t]()}catch(t){--qt&&setTimeout(this.setFocus,1e3,e)}},addOption:function(e){var t,i={};i[this.optionsName]=i[this.optionsValue]=e,this.addedOptions.push(i),t=this.multiple?[i].concat(this.$refs.select.value):i,this.formId?this.formValueHandler(t):this.vModelHandler(t)},wrapTabEvents:function(){try{this.$refs.select.$el.querySelector(".multiselect__input").classList.add("is-focusable")}catch(e){--qt&&setTimeout(this.wrapTabEvents,500)}},bindSearch:function(){var e=this;try{if(this.isAjax&&(this.$refs.select.$on("search-change",this.ajaxSearch),this.$refs.select.$once("hook:destroyed",function(){e.$refs.select.$off("search-change",e.ajaxSearch)}),"false"!==this.autoFetch.toString())){var t="string"==typeof this.autoFetch?this.autoFetch:"";this.ajaxSearch(t,!0)}}catch(e){qt&&setTimeout(this.bindSearch,500)}},ajaxSearch:function(e,t){var i=this;(e||t)&&(clearTimeout(this.__search),this.isLoading=!0,this.__search=setTimeout(function(){AWES.ajax({},i.url.replace("%s",e),"get").then(function(e){var t=[];!0===e.success&&(Array.isArray(e.data)?t=e.data:e.data&&Array.isArray(e.data.data)&&(t=e.data.data)),i.ajaxOptions=t,i.isLoading=!1})},Number(this.debounce)))}},created:function(){var e=this;if(this.formId&&this.formValue){var t=Array.isArray(this.formValue)?this.formValue:[this.formValue],i=[],r=[];t.forEach(function(t,n){if("object"===Yt(t))r.push(Object.assign({},t)),i.push(t[e.optionsValue]);else if(i.push(t),-1===e.usedOptions.findIndex(function(i){return i[e.optionsValue]===t})){var o={};o[e.optionsName]=o[e.optionsValue]=t,r.push(o)}}),this.addedOptions=r,this.formValue=i}},mounted:function(){this.$nextTick(this.wrapTabEvents),this.$nextTick(this.bindSearch)}},void 0,!1,void 0,void 0,void 0),Zt=h(function(e,t){!function(e,t){var i,r,n="function"==typeof Map?new Map:(i=[],r=[],{has:function(e){return i.indexOf(e)>-1},get:function(e){return r[i.indexOf(e)]},set:function(e,t){-1===i.indexOf(e)&&(i.push(e),r.push(t))},delete:function(e){var t=i.indexOf(e);t>-1&&(i.splice(t,1),r.splice(t,1))}}),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function s(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!n.has(e)){var t=null,i=null,r=null,s=function(){e.clientWidth!==i&&d()},a=function(t){window.removeEventListener("resize",s,!1),e.removeEventListener("input",d,!1),e.removeEventListener("keyup",d,!1),e.removeEventListener("autosize:destroy",a,!1),e.removeEventListener("autosize:update",d,!1),Object.keys(t).forEach(function(i){e.style[i]=t[i]}),n.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",a,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",d,!1),window.addEventListener("resize",s,!1),e.addEventListener("input",d,!1),e.addEventListener("autosize:update",d,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",n.set(e,{destroy:a,update:d}),"vertical"===(u=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===u.resize&&(e.style.resize="horizontal"),t="content-box"===u.boxSizing?-(parseFloat(u.paddingTop)+parseFloat(u.paddingBottom)):parseFloat(u.borderTopWidth)+parseFloat(u.borderBottomWidth),isNaN(t)&&(t=0),d()}var u;function l(t){var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,e.style.overflowY=t}function c(){if(0!==e.scrollHeight){var r=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",i=e.clientWidth,r.forEach(function(e){e.node.scrollTop=e.scrollTop}),n&&(document.documentElement.scrollTop=n)}}function d(){c();var t=Math.round(parseFloat(e.style.height)),i=window.getComputedStyle(e,null),n="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):e.offsetHeight;if(n<t?"hidden"===i.overflowY&&(l("scroll"),c(),n="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==i.overflowY&&(l("hidden"),c(),n="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),r!==n){r=n;var s=o("autosize:resized");try{e.dispatchEvent(s)}catch(e){}}}}function a(e){var t=n.get(e);t&&t.destroy()}function u(e){var t=n.get(e);t&&t.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(e){return e}).destroy=function(e){return e},l.update=function(e){return e}):((l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return s(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],a),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],u),e}),t.default=l,e.exports=t.default}(e,t)}),Jt=0,Kt=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fb-textarea fb-element",class:{"fb-textarea_disabled":e.isDisabled,"fb-textarea_active":e.isActive,"fb-textarea_error":e.hasError,"animated shake":e.shake}},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("label",{staticClass:"fb-textarea__label",attrs:{for:e.textareaId}},[e._v(e._s(e.label))]),i("textarea",e._g(e._b({ref:"element",class:["fb-textarea__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{id:e.textareaId,disabled:e.isDisabled},domProps:{value:e.formId?e.formValue:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.save(),e.inFocus=!1}}},"textarea",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler}))])],1)},staticRenderFns:[]},void 0,{name:"fb-textarea",inheritAttrs:!1,mixins:[Lt],props:{fixsize:{type:Boolean,default:!1}},computed:{textareaId:function(){return"textarea-"+Jt++}},methods:{setAutoResize:function(){this.fixsize||(Zt(this.$refs.element),this.$watch("value",this.updateAutoResize))},updateAutoResize:function(){var e=this;this.$nextTick(function(){Zt.update(e.$refs.element)})}},mounted:function(){this.setAutoResize()}},void 0,!1,void 0,void 0,void 0),Qt=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fb-keycode","fb-element",{"animated shake":e.shake},{"fb-keycode_disabled":e.isDisabled}]},[i("div",{staticClass:"fb-keycode__block"},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("div",{staticClass:"fb-keycode__wrap",attrs:{id:"keywrap"}},e._l(e.length,function(t){return i("div",{key:t,staticClass:"fb-keycode__field-wrap"},[i("input",{ref:"fields",refInFor:!0,class:["fb-keycode__field",{"is-focusable":e.isFocusable,"in-focus":e.inFocus[t-1]}],attrs:{type:"tel",inputmode:"numeric",pattern:"[0-9]*",maxlength:"1",autocomplete:"off",disabled:e.isDisabled},domProps:{value:e.inputValue[t-1]},on:{focus:function(i){e.inFocus[t-1]=!0},blur:function(i){e.inFocus[t-1]=!1},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))},function(i){if(!i.type.indexOf("key")&&e._k(i.keyCode,"backspace",void 0,i.key,void 0))return null;t>1&&e.onBackspace(i,t-1)},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?null:"button"in i&&0!==i.button?null:void(t>1&&e.onLeft(i,t-1))},function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"right",39,i.key,["Right","ArrowRight"])?null:"button"in i&&2!==i.button?null:void(t<e.length&&e.onRight(i,t-1))}],input:function(i){return e.onInput(i,t-1)},paste:function(t){return t.preventDefault(),e.onPaste(t)}}})])}),0)])],1)])},staticRenderFns:[]},void 0,{name:"fb-code",mixins:[jt],props:{length:{type:Number,default:6}},data:function(){return{inputValue:[],inFocus:[]}},computed:{value:{get:function(){return this.inputValue.join("")},set:function(e){e=e.trim().replace(/\D/g,"").substr(0,this.length),this.inputValue=e.split("")}}},watch:{error:function(e){var t=this;e&&e.length?(this.value="",this.$refs.fields.forEach(function(e){e.addEventListener("input",t.resetError,!1)}),this.$nextTick(function(){t.setFocus()})):this.$refs.fields.forEach(function(e){e.removeEventListener("input",t.resetError)})},value:function(e){e.length===this.length&&(this.formValue=e)},formValue:function(e){e!==this.value&&(this.value=e,this.setFocus(e.length))}},methods:{setFocus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("boolean"!=typeof e||!0!==e){if("number"==typeof e){e>=this.length&&(e=this.length-1);var t=this.$refs.fields[e];setTimeout(function(){t.focus(),t.setSelectionRange(0,t.value.length)},10)}}else this.$refs.fields[0].focus()},onInput:function(e,t){var i=e.target.value.replace(/\D/g,"");e.target.value=i,this.$set(this.inputValue,t,i),this.isEmpty(t)||t===this.length-1||this.setFocus(t+1)},onBackspace:function(e,t){this.setFocus(t-1)},onLeft:function(e,t){this.setFocus(t-1)},onRight:function(e,t){this.setFocus(t+1)},onPaste:function(e){this.error&&this.error.length&&this.resetError(),this.value=e.clipboardData.getData("text")},isEmpty:function(e){return""===this.inputValue[e]||"undefined"===Yt(this.inputValue[e])}},created:function(){for(var e=0;e<this.length;e++)this.inFocus.push(!(0!==e||!this.focus)),this.inputValue.push("")},beforeDestroy:function(){var e=this;this.$refs.fields.forEach(function(t){t.removeEventListener("input",e.resetError)})}},void 0,!1,void 0,void 0,void 0),ei={domain:"awescrm.de",maxlength:32,ulrifyOptions:{spaces:"-",toLower:!0,trim:!0,addEToUmlauts:!0,nonPrintable:"",failureOutput:""}},ti=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fb-slug","fb-element",{"fb-slug_disabled":e.isDisabled,"fb-slug_active":e.isActive,"fb-slug_error":e.hasError,"animated shake":e.shake}]},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("div",{staticClass:"fb-slug__group-wrap"},[i("span",{staticClass:"fb-slug__group-field"},[i("label",{staticClass:"fb-slug__label",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),i("input",e._g(e._b({ref:"element",class:["fb-slug__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,maxlength:e.maxlength,type:"text",disabled:e.isDisabled},domProps:{value:e.formId?e.formValue:e.removeDomain(e.value)},on:{input:e.toggleWatcher,focus:function(t){e.inFocus=!0},blur:function(t){e.save(),e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))}}},"input",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler}))]),i("span",{staticClass:"fb-slug__group-label"},[e._v(e._s(e.dotDomain))])])])],1)},staticRenderFns:[]},void 0,{name:"fb-company-slug",extends:Wt,props:{domain:{type:String,default:function(){return this._config.domain}},debounce:{type:[String,Number],default:0},input:{type:String,default:""},maxlength:{type:[String,Number],default:function(){return this._config.maxlength}}},data:function(){return{watchInput:!0}},computed:{dotDomain:function(){return"."+this.domain.replace(/^\./,"")},formValue:{get:function(){return this.removeDomain(this.$store.getters["forms/fieldValue"](this.formId,this.realName))},set:function(e){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:this.addDomain(this.noramlizeUrl(e))})}}},watch:{input:{handler:function(e){var t=this;!this.$isServer&&this.watchInput&&e&&(this.formId?this._isMounted?this.formValue=e:this.$nextTick(function(){return t.formValue=e}):this.vModelHandler({target:{value:e}}))},immediate:!0}},methods:{vModelHandler:function(e){this.$emit("input",this.addDomain(this.noramlizeUrl(e.target.value)))},toggleWatcher:function(e){""===e.target.value?this.watchInput=!0:this.watchInput&&(this.watchInput=!1)},noramlizeUrl:function(e){return e&&this.$toUrl(e).substr(0,+this.maxlength)},addDomain:function(e){return e&&this.removeDomain(e)+this.dotDomain},removeDomain:function(e){return e&&e.replace(this.dotDomain,"")}},beforeCreate:function(){this._config=Object.assign({},ei,window.AWES._config.companySlug),this.$toUrl=Urlify.create(this._config.ulrifyOptions)}},void 0,!1,void 0,void 0,void 0),ii=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShow&&!e.reset?i("div",[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:function(t){e.showTooltip=!1}}},[i("vue-recaptcha",e._g({ref:"recaptcha",staticClass:"re-captcha",attrs:{sitekey:e.sitekey,theme:e.theme}},{verify:e.formId?e.onVerify:null,expired:e.formId?e.onExpired:null}))],1)],1):e._e()},staticRenderFns:[]},void 0,{name:"fb-auto-captcha",mixins:[st],components:{vueRecaptcha:function(e){return AWES.utils.loadModule("vue-recaptcha","https://unpkg.com/vue-recaptcha@latest/dist/vue-recaptcha.min.js",function(){e(window.VueRecaptcha)})}},props:{show:{type:Boolean,default:!1}},data:function(){return{sitekey:AWES._config.reCaptchaSiteKey,serverError:!1,showTooltip:!1,reset:!1,theme:AWES._themeDark?"dark":"light"}},computed:{formValue:{get:function(){return this.$store.getters["forms/fieldValue"](this.formId,this.realName)},set:function(e){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:e})}},error:function(){return this.$store.getters["forms/fieldError"](this.formId,this.realName)},realName:function(){return"g-recaptcha-response"},isShow:function(){return this.show||this.serverError}},watch:{error:function(e){(Array.isArray(e)&&e.length||e)&&(this.serverError=!0)},formLoading:function(e){var t=this;!e&&this.isShow&&this.$nextTick(function(){t.$refs.recaptcha.reset()})},theme:function(){var e=this;this.isShow&&(this.reset=!0,this.$nextTick(function(){e.reset=!1}))}},methods:{onVerify:function(e){this.formValue=e,this.resetError()},onExpired:function(){this.formValue=null},checkTheme:function(e){var t=e.detail;this.theme=t?"dark":"light"},resetError:function(){this.showTooltip=!1,this.$store.commit("forms/resetError",{formName:this.formId,fieldName:this.realName})},manageCaptchaScript:function(e){switch(e){case"add":if(!document.getElementById("g-captcha-script")){var t=document.createElement("script");t.setAttribute("id","g-captcha-script"),t.setAttribute("src","https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit"),document.head.appendChild(t)}break;case"remove":document.getElementById("g-captcha-script").remove()}}},created:function(){this.$isServer||(this.manageCaptchaScript("add"),AWES.on("theme.change",this.checkTheme))},beforeDestroy:function(){this.manageCaptchaScript("remove"),AWES.off("theme.change",this.checkTheme)}},void 0,!1,void 0,void 0,void 0),ri=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.items&&e.items.length?i("div",{staticClass:"fc-radio fb-element",class:{"animated shake":e.shake}},[e.label?i("div",{staticClass:"fc-radio__label"},[e._v(e._s(e.label))]):e._e(),i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("div",{staticClass:"fc-radio__wrap"},e._l(e.items,function(t,r){return i("label",{key:r,class:["fc-radio__box",{"is-checked":e.checkActive(t),"fc-radio_disabled":e.isItemDisabled(t)}]},[i("input",e._g(e._b({ref:"fields",refInFor:!0,class:["fc-radio__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{type:"radio","data-awes":e.$options.name+"."+e.name,disabled:e.isItemDisabled(t)},domProps:{checked:e.checkActive(t),value:t.value?t.value:t.toString()},on:{focus:function(t){return e.$set(e.inFocus,r,!0)},blur:function(t){return e.$set(e.inFocus,r,!1)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))}}},"input",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler})),e._t("default",[i("span",{staticClass:"fc-radio__text"},[e._v(e._s(t.name?t.name:t.toString()))])],{item:t,checked:e.checkActive(t),focused:e.inFocus[r]})],2)}),0)])],1):e._e()},staticRenderFns:[]},void 0,{name:"fb-radio-group",mixins:[jt],props:{items:Array,value:String,disabled:{type:[String,Boolean],default:!1}},data:function(){return{inFocus:[]}},computed:{disabledItems:function(){return"boolean"==typeof this.disabled&&this.disabled||""===this.disabled?this.items.map(function(e){return e.value}):"string"==typeof this.disabled?this.disabled.split(",").map(function(e){return e.trim()}):[]}},methods:{isItemDisabled:function(e){return this.disabledItems.indexOf(e.value)>-1},formValueHandler:function(e){this.formValue=e.target.value,this.error&&this.resetError()},vModelHandler:function(e){this.$emit("input",e.target.value)},checkActive:function(e){return this.getItemValue(e)==(this.formId?this.formValue:this.value)},getItemValue:function(e){return e.value?e.value:e.toString()},setFocus:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];"number"==typeof e?this.$refs.elements[e].focus():!0===e&&this.$refs.elements[0].focus()}},created:function(){for(var e=0;e<this.items.length;e++)this.inFocus.push(!(0!==e||!this.focus))}},void 0,!1,void 0,void 0,void 0),ni=0,oi=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fb-slider","fb-element",{"fb-slider_disabled":e.isDisabled,"fb-slider_error":e.hasError,"animated shake":e.shake}]},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("div",{staticClass:"fb-slider__wrap"},[i("div",{staticClass:"fb-slider__wrap-left"},[i("label",{staticClass:"fb-slider__label",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),i("span",{staticClass:"fb-slider__value"},[e._v(e._s(e.percent)+" %")])]),i("div",{staticClass:"fb-slider__wrap-right"},[i("input",e._b({ref:"element",class:["fb-slider__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],style:"--percent: "+e.percent+"%",attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,type:"range",disabled:e.isDisabled},domProps:{value:(e.formId?e.formValue:e.value)||0},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))}}},"input",e.$attrs,!1))])])])],1)},staticRenderFns:[]},void 0,{name:"fb-slider",inheritAttrs:!1,mixins:[jt],props:{min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},value:{type:[Number,String],default:0}},computed:{inputId:function(){return"slider-"+ni++},percent:function(){return Math.round(Number(this.formId?this.formValue:this.value)||0/Number(this.max)*100)}},methods:{formValueHandler:function(e){this.formValue=Number(e.target.value),this.error&&this.resetError()},vModelHandler:function(e){this.$emit("input",Number(e.target.value))},toggleListener:function(e){var t=(e?"add":"remove")+"EventListener",i=this.formId?this.formValueHandler:this.vModelHandler,r=window.MSInputMethodContext?"change":"input";this.$refs.element[t](r,i)}},mounted:function(){var e=this;this.$nextTick(function(){return e.toggleListener(!0)})},beforeDestroy:function(){this.toggleListener(!1)}},void 0,!1,void 0,void 0,void 0),si=20,ai=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fb-phone","fb-element",{"fb-phone_disabled":e.isDisabled,"animated shake":e.shake,"fb-phone_active":e.isActive,"fb-phone_error":e.hasError}]},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("span",{staticClass:"fb-phone__label"},[e._v(e._s(e.label))]),i("vue-tel-input",e._g({ref:"tel",attrs:{value:e.formId?e.formValue:e.value,disabled:e.isDisabled},on:{onBlur:function(t){e.save(),e.inFocus=!1},onInput:e.checkFocus}},{input:e.formId?e.formValueHandler:e.vModelHandler}))],1)],1)},staticRenderFns:[]},void 0,{name:"fb-phone",mixins:[jt],components:{VueTelInput:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return AWES.utils.loadModule("vue-tel-input",["https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.js","https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.css"],function(){e(VueTelInput.default)})})},props:{value:{type:String,default:""},debounce:{type:[String,Number],default:300}},data:function(){return{nativeTelInput:!1}},computed:{isActive:function(){return!!(this.inFocus||this.value||this.formValue)}},methods:{formValueHandler:function(e){var t=this;this.error?(this.formValue=e,this.resetError()):(clearTimeout(this.__debounce),this.__debounce=setTimeout(function(){t.formValue=e},Number(this.debounce)))},vModelHandler:function(e){this.$emit("input",e)},setFocusWatcher:function(){var e=this;this.$refs.tel&&(this.nativeTelInput=this.$refs.tel.$refs.input,this.nativeTelInput.addEventListener("focus",function(){e.inFocus=!0}),this.setFocusableClass(),this.setFocusClass())},setFocusClass:function(){this.nativeTelInput.classList[this.inFocus?"add":"remove"]("in-focus"),si=20},setFocusableClass:function(){this.nativeTelInput.classList[this.isFocusable?"add":"remove"]("is-focusable"),si=20},setFocus:function(e){var t=this;try{var i=!1!==e?"focus":"blur";this.nativeTelInput[i]()}catch(i){si&&(si--,setTimeout(function(){t.setFocus(e)},1e3))}},checkFocus:function(){this.inFocus||this.setFocus()},save:function(){clearTimeout(this.__debounce),this.formValue=this.nativeTelInput.value}},watch:{inFocus:function(){try{this.setFocusClass()}catch(e){si&&(si--,setTimeout(this.setFocusClass,1e3))}},isFocusable:function(){try{this.setFocusableClass()}catch(e){si&&(si--,setTimeout(this.setFocusableClass,1e3))}}},mounted:function(){this.setFocusWatcher()},updated:function(){this.nativeTelInput||this.setFocusWatcher()}},void 0,!1,void 0,void 0,void 0),ui=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("uploader",{staticClass:"fb-uploader fb-element",class:{"fb-uploader_disabled":e.isDisabled},attrs:{options:e.uploaderOptions},on:{"file-added":e.checkFile,"file-progress":e.setProgress,"file-success":e.addFileNameToForm,"upload-start":function(t){return e.toggleFormBlock(!0)},complete:function(t){return e.toggleFormBlock(!1)}}},[i("uploader-unsupport"),i("uploader-drop",[i("p",{staticClass:"fb-uploader__message"},[e._v(" "+e._s(e.$lang.FORMS_UPLOAD_DROP)+" "),i("span",{staticClass:"fb-uploader__fakebtn"},[e._v(e._s(e.$lang.FORMS_UPLOAD_ADD))]),i("uploader-btn",{ref:"uploaderBtn",staticClass:"fb-uploader__btn",attrs:{tabindex:"1"}},[i("span",[e._v(e._s(e.$lang.FORMS_UPLOAD_ADD))])])],1),e.format||e.size?i("p",[e.format?i("i",{staticClass:"fb-uploader__formats"},[e._v(" "+e._s(e.$lang.FORMS_UPLOAD_FORMAT)+" "+e._s(e.formatString)+". ")]):e._e(),e.size?i("i",{staticClass:"fb-uploader__size"},[e._v(" "+e._s(e.$lang.FORMS_UPLOAD_SIZE)+" "+e._s(e.size)+"Mb ")]):e._e()]):e._e()]),i("uploader-list",{scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("list",[t.fileList.length?i("div",{staticClass:"fb-uploader__cwrap"},[i("table",{staticClass:"fb-uploader__list"},[i("tbody",[e._l(t.fileList,function(t,r){return[i("tr",{key:t.id},[i("td",{staticClass:"fb-uploader__list-number"},[e._v(e._s(r+1))]),i("td",{staticClass:"fb-uploader__list-name"},[i("span",{staticClass:"fb-uploader__list-ftitle"},[e._v(e._s(e.getName(t.name)))])]),i("td",{staticClass:"fb-uploader__list-type"},[e._v(e._s(e.getExtension(t.name)))]),i("td",{staticClass:"fb-uploader__list-size"},[e._v(e._s(e._f("bytesToMb")(t.size)))]),i("td",{staticClass:"fb-uploader__list-date"},[t.isComplete()?[e._v(" "+e._s(e._f("timestampToDate")(t._lastProgressCallback))+" ")]:e._e()],2),i("td",{staticClass:"fb-uploader__list-delete"},[i("button",{staticClass:"fb-uploader__delete",attrs:{title:e.$lang.FORMS_UPLOAD_DELETE,"aria-label":e.$lang.FORMS_UPLOAD_DELETE},on:{click:function(i){return i.preventDefault(),e.removeFile(t,r)}}},[e._v("Ã")])])]),t.isComplete()?e._e():i("tr",{key:t.id+"loader",staticClass:"fb-uploader__list-pgwrap"},[i("td",{staticClass:"fb-uploader__list-progress",attrs:{colspan:"6"}},[i("progress",{staticClass:"fb-uploader__progress",attrs:{max:"1"},domProps:{value:e.filesProgress[t.uniqueIdentifier]}})])])]})],2)])]):e._e()],{fileList:t.fileList,removeFile:e.removeFile})]}}],null,!0)})],1)},staticRenderFns:[]},void 0,{name:"fb-uploader",mixins:[jt],props:{url:{type:String,required:!0},format:{type:[String,Array]},size:[String,Number],validator:function(e){return+e==e}},data:function(){return{filesProgress:{}}},filters:{timestampToDate:function(e){var t=new Date(e);return"".concat(t.getDate(),".").concat(t.getMonth()+1,".").concat(t.getFullYear()+1)},bytesToMb:function(e){var t=e/1024/1024;return(t<1?t.toFixed(3):t.toFixed(1))+"Mb"}},computed:{uploaderOptions:function(){return{target:this.url,testChunks:!1}},formatArray:function(){return this.format&&Array.isArray(this.format)?this.format:this.format.split(",").map(function(e){return e.trim()})},formatString:function(){return this.format&&Array.isArray(this.format)?this.format.concat(", "):this.format},maxSizeBytes:function(){return 1024*this.size*1024}},methods:{checkFile:function(e){this.format&&!this._extensionMatch(e)&&(e.ignored=!0,this.showError(this.$lang.FORMS_UPLOADER_EXTENSION_ERROR.replace("%s",e.name))),this.size&&e.size>this.maxSizeBytes&&(e.ignored=!0,this.showError(this.$lang.FORMS_UPLOADER_SIZE_ERROR.replace("%s",e.name)))},showError:function(e){AWES.notify({status:"error",message:e})},setProgress:function(e){this.$set(this.filesProgress,e.uniqueIdentifier,e.progress())},getExtension:function(e){return e.split(".").pop()},getName:function(e){var t=e.split(".");return t.pop(),t.join(".")},_extensionMatch:function(e){var t=this.getExtension(e.name);return this.formatArray.includes(t)},toggleFormBlock:function(e){this.$store.commit("setLoading",{formName:this.formId,status:e}),e||this.$forceUpdate()},addFileNameToForm:function(e,t,i,r){delete this.filesProgress[t.uniqueIdentifier];try{var n=JSON.parse(i),o=AWES.utils.object.get(n,"meta.path",t.relativePath);Array.isArray(this.formValue)?this.formValue.push(o):this.formValue=[o]}catch(e){console.log(e)}},removeFile:function(e,t){e.isComplete()&&this.formValue.splice(t,1),e.cancel(),delete this.filesProgress[e.uniqueIdentifier]},setFocus:function(e){var t=this;this.__retries=this.__retries||20;try{var i=!1!==e?"focus":"blur";this.$refs.uploaderBtn.$el[i](),this.__retries=20}catch(i){this.__retries-=1,this.__retries&&setTimeout(function(){return t.setFocus(e)},1e3)}}}},void 0,!1,void 0,void 0,void 0);var li={branding:!1,statusbar:!1,menubar:!1,fontsize_formats:"10px 12px 14px 16px 18px 24px 36px",plugins:"lists",toolbar:["fontselect fontsizeselect bold italic underline numlist bullist"],setup:function(){this.on("ExecCommand",function(e){"FontName"===e.command&&(e.target.getDoc().body.style.fontFamily=e.value)})},init_instance_callback:function(){this.execCommand("FontName",!1,"Arial")}};var ci={lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,autoCloseTags:!0,matchTags:!0,mode:"htmlmixed"},di=0,fi=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fb-editor fb-element",class:[{"fb-editor_disabled":e.isDisabled}]},[i("div",{staticClass:"fb-editor__modes"},[i("button",{class:["fb-editor__modes-button",{"is-active":"visual"===e.mode}],attrs:{type:"button"},on:{click:function(t){e.mode="visual"}}},[e._v(" "+e._s(e.$lang.FORMS_EDITOR_VISUAL)+" ")]),i("button",{class:["fb-editor__modes-button",{"is-active":"code"===e.mode}],attrs:{type:"button"},on:{click:function(t){e.mode="code"}}},[e._v(" "+e._s(e.$lang.FORMS_EDITOR_CODE)+" ")])]),i("div",{staticClass:"fb-editor__tabs"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"visual"===e.mode,expression:"mode === 'visual'"}],key:"visual",staticClass:"fb-editor__tab"},[i("textarea",{staticClass:"fb-editor__tiny",attrs:{id:e.editorId,disabled:e.isDisabled}},[e._v(e._s(e.formValue))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"code"===e.mode,expression:"mode === 'code'"}],key:"code",staticClass:"fb-editor__tab"},[i("textarea",{ref:"code",staticClass:"fb-editor__codemirror",attrs:{id:e.codeEditorId,disabled:e.isDisabled}},[e._v(e._s(e.formValue))])])])])},staticRenderFns:[]},void 0,{name:"fb-editor",mixins:[jt],props:{options:{type:Object,default:function(){return{}}}},data:function(){return{editorId:"fb-editor-"+di,codeEditorId:"fb-code-editor-"+di++,mode:"visual",codeEditorInited:!1}},watch:{mode:function(e){"visual"===e?(this._saveCode(),tinymce.get(this.editorId).setContent(this.value)):(this._saveVisual(),this.codeEditorInited?this._setCodeValue():AWES.utils.loadModules({codemirror:{src:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.css"]},"codemirror-plugins":{deps:["codemirror"],src:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/xml/xml.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/fold/xml-fold.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/matchbrackets.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/closebrackets.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/matchtags.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/closetag.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/htmlmixed/htmlmixed.min.js"]}}).then(this.initCodeEditor).then(this._setCodeValue))}},methods:{initEditor:function(){var e=this;li.selector="#"+this.editorId;var t=AWES.utils.object.get(AWES._config,"formBuilder.fbEditor",{});this.focus&&(t.auto_focus=this.editorId),Object.assign(t,this.options,li),tinymce.init(t);var i=tinymce.get(this.editorId);i.on("Change",this._debounceSave),void 0!==Yt(AWES._theme)&&i.once("Init",function(){e._switchThemeAttribute({detail:AWES._theme})})},initCodeEditor:function(){return this.codeEditorInited=!0,this._codeEditor=CodeMirror.fromTextArea(this.$refs.code,ci),this._codeEditor.on("update",this._debounceSave),this._codeEditor},save:function(){"visual"===this.mode?this._saveVisual():this._saveCode()},_debounceSave:function(){clearTimeout(this._debounce),this._debounce=setTimeout(this.save,1e3)},_saveVisual:function(){this.formValue=tinymce.get(this.editorId).save()},_saveCode:function(){this._codeEditor&&(this.formValue=this._codeEditor.doc.getValue())},_setCodeValue:function(){var e=this;this._codeEditor.doc.setValue(this.formValue),setTimeout(function(){e._codeEditor.refresh()},1)},_switchThemeAttribute:function(e){var t=tinymce.get(this.editorId).getDoc();1===e.detail?t.documentElement.setAttribute("data-dark",!0):t.documentElement.removeAttribute("data-dark")},setFocus:function(e){try{!1!==e&&("visual"===this.mode?tinymce.get(this.editorId).focus():this._codeEditor&&this._codeEditor.focus())}catch(e){console.warn("Error while setting focus"),console.error(e)}}},mounted:function(){this.formId&&AWES.on("form-builder::".concat(this.formId,":before-send"),this.save),this.$nextTick(this.initEditor),void 0!==Yt(AWES._theme)&&AWES.on("theme.change",this._switchThemeAttribute)},beforeDestroy:function(){this.formId&&AWES.off("form-builder::".concat(this.formId,":before-send"),this.save),void 0!==Yt(AWES._theme)&&AWES.off("theme.change",this._switchThemeAttribute)}},void 0,!1,void 0,void 0,void 0),hi=pe({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["fb-switcher","fb-element",{"fb-switcher_error":e.hasError,"fb-switcher_active":e.isActive,"fb-switcher_disabled":e.isDisabled}],on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.toggleValue(e.rangeValue)}}},[i("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("div",{staticClass:"fb-switcher__field-wrap",attrs:{"data-awes":e.$options.name+"."+e.name}},[i("input",e._g(e._b({ref:"element",staticClass:"fb-switcher__field",class:{"is-focusable":e.isFocusable,"in-focus":e.inFocus},attrs:{type:"range",min:"0",max:"1",step:"1",disabled:e.isDisabled},domProps:{value:e.rangeValue},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))},mousedown:function(t){e.oldValue=e.rangeValue},click:function(t){return e.toggleValue(e.oldValue)}}},"input",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler}))]),i("span",{staticClass:"fb-switcher__label",on:{click:function(t){return t.target!==t.currentTarget?null:e.toggleValue(e.rangeValue)}}},[e._v(e._s(e.label))])])],1)},staticRenderFns:[]},void 0,{name:"fb-switcher",inheritAttrs:!1,mixins:[zt],data:function(){return{oldValue:null}},computed:{rangeValue:function(){return Number(this.formId?this.formValue:this.vModelChecked)}},methods:{formValueHandler:function(e){this.oldValue=null;var t=+e.target.value;this.formValue=this.isNumeric?t:Boolean(t),this.error&&this.resetError()},vModelHandler:function(e){var t,i=this;this.oldValue=null,this.vModelArray?(t=this.value.slice(),e.target.value&&!this.vModelChecked?t.push(this.computedValue):!e.target.checked&&this.vModelChecked&&t.splice(t.findIndex(function(e){return e===i.computedValue}),1)):t=Boolean(e.target.value),this.$emit("input",t)},toggleValue:function(e){if(!this.isDisabled&&null!==e){var t={target:{value:e?0:1}};this.formId?this.formValueHandler(t):this.vModelHandler(t)}}}},void 0,!1,void 0,void 0,void 0);var mi={installed:!1,install:function(e){this.installed||(this.installed=!0,e.component("form-builder",ve),e.component("fb-error-wrap",be),e.component("fb-switcher",hi),e.component("fb-input",Wt),e.component("fb-multi-block",Ht),e.component("fb-checkbox",Ut),e.component("fb-select",Gt),e.component("fb-textarea",Kt),e.component("fb-code",Qt),e.component("fb-company-slug",function(e){AWES.utils.loadModule("urlify","https://unpkg.com/urlify@0.3.6/dist/urlify.js",function(){e(ti)})}),e.component("fb-auto-captcha",ii),e.component("fb-radio-group",ri),e.component("fb-slider",oi),e.component("fb-phone",ai),e.component("fb-uploader",function(e){AWES.utils.loadModule("vue-simple-uploader","https://unpkg.com/vue-simple-uploader@0.5.6/dist/vue-uploader.js",function(){e(ui)})}),e.component("fb-editor",function(e){AWES.utils.loadModules({"tiny-mce":"https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.2/tinymce.min.js","tiny-mce-plugins":{deps:["tiny-mce"],src:["https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.2/plugins/lists/plugin.min.js"]}}).then(function(){e(fi)})}))}},pi={FORMS_SEND:"Send",FORMS_CANCEL:"Cancel",FORMS_LOADING:"Loading...",FORMS_CONFIRM:"Are you shure? All not submitted data will be erased...",FORMS_MULTIBLOCK_ADD:"+ add",FORMS_SELECT_LABEL:"Select a value",FORMS_SELECT_PLACEHOLDER:"Pick a value",FORMS_SELECT_AJAX_PLACEHOLDER:"Start typing...",FORMS_SELECT_EMPTY:"Nothing found",FORMS_SELECT_ADD_TAG:"Add new value",FORMS_UPLOAD_DROP:"Drag and drop file or",FORMS_UPLOAD_ADD:"Add file",FORMS_UPLOAD_FORMAT:"File formats only",FORMS_UPLOAD_SIZE:"Size of files no more then",FORMS_UPLOAD_REMOVE:"Remove file",FORMS_UPLOADER_EXTENSION_ERROR:"File %s has wrong extension",FORMS_UPLOADER_SIZE_ERROR:"File %s is too big",FORMS_EDITOR_VISUAL:"Visual",FORMS_EDITOR_CODE:"Code"};function vi(e){e.isEdited||Vue.set(e,"isEdited",!0)}var bi={state:function(){return{}},getters:{form:function(e){return function(t){return e[t]}},fields:function(e,t){return function(e){var i={},r=t.form(e);return r&&(i=r.fields),i}},multiblockIds:function(e,t){return function(e,i){var r=[0],n=t.form(e);return n&&(r=n.multiblocks[i].ids),r}},errorsOrFalse:function(e,t){return function(e){var i=t.form(e),r=i&&i.errors||{};return!AWES.utils.object.isEmpty(r)&&r}},hasCaptchaError:function(e,t){return function(e){return!!t.form(e)["g-recaptcha-response"]}},isLoading:function(e,t){return function(e){var i=t.form(e);return i&&i.isLoading}},isMultiblockDisabled:function(e,t){return function(e,i){var r=t.form(name);return r&&!r.multiblocksDisabled[i]}},fieldValue:function(e,t){return function(e,i){var r=t.form(e);return r&&r.fields[i]}},fieldError:function(e,t){return function(e,i){var r=t.form(e);return r&&r.errors[i]}},firstErrorField:function(e){return function(t){return e[t]&&e[t].firstErrorField}}},mutations:{createForm:function(e,t){var i=t.formName,r=t.fields;Vue.set(e,i,{initialState:r,fields:{},errors:{},multiblocks:{},isLoading:!1,isEdited:!1,firstErrorField:null})},setLoading:function(e,t){var i=t.formName,r=t.status;Vue.set(e[i],"isLoading",r)},deleteForm:function(e,t){Vue.delete(e,t)},setFormErrors:function(e,t){var i=t.formName,r=t.errors,n=e[i];Vue.set(n,"firstErrorField",Object.keys(r)[0]);var o={};for(var s in r){var a=r[s];o[ot(s)]=a}Vue.set(n,"errors",o)},createField:function(e,t){var i=t.formName,r=t.fieldName,n=t.value,o=e[i];n=AWES.utils.object.get(o.initialState,r,n),Vue.set(o.fields,r,n)},setFieldValue:function(e,t){var i=t.formName,r=t.fieldName,n=t.value,o=e[i];Vue.set(o.fields,r,n),vi(o)},deleteField:function(e,t){var i=t.formName,r=t.fieldName,n=e[i];Vue.delete(n.fields,r),Vue.delete(n.errors,r)},resetError:function(e,t){var i=t.formName,r=t.fieldName;Vue.delete(e[i].errors,r)},resetErrors:function(e,t){Vue.set(e[t],"errors",{})},resetFirstErrorField:function(e,t){Vue.set(e[t],"firstErrorField",null)},createMutiblock:function(e,t){var i=t.formName,r=t.multiblockName,n=t.disabled,o=e[i],s=AWES.utils.object,a=s.get,u=s.isEmpty,l=a(o.initialState,r);l=u(l)?[{}]:l;var c=Object.keys(l).map(function(e){return Number(e)});Vue.set(o.multiblocks,r,{disabled:n,ids:c})},deleteMutiblock:function(e,t){var i=t.formName,r=t.multiblockName;Vue.delete(e[i].multiblocks,r)},toggleMultiblockState:function(e,t){var i=t.formName,r=t.multiblockName,n=t.status;Vue.set(e[i].multiblocks[r],"disabled",n)},addMultiblockId:function(e,t){var i=t.formName,r=t.multiblockName,n=t.id,o=e[i];o.multiblocks[r].ids.push(n),vi(o)},deleteMultiblockId:function(e,t){var i=t.formName,r=t.multiblockName,n=t.id,o=e[i],s=o.multiblocks[r].ids,a=s.findIndex(function(e){return e===n});s.splice(a,1),vi(o)}},actions:{restoreData:function(e,t){var i,r,n,o,s,a=e.state[t.formName],u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={};for(var r in e){var n=t?t(e[r]):e[r];AWES.utils.object.set(i,r,n)}return i}(a.fields),l=Object.keys(a.multiblocks);if(l.length){i=u,r=l,n=AWES.utils.object,o=n.get,s=n.set,r.forEach(function(e){var t=o(i,e);s(i,e,t.filter(function(){return!0}))});for(var c=0,d=l;c<d.length;c++){var f=d[c],h=Object.keys(AWES.utils.object.get(u,f,[{}])).map(function(e){return Number(e)});Vue.set(a.multiblocks[f],"ids",h)}}return u},sendForm:function(e,t){var i=e.state,r=e.commit,n=e.dispatch,o=t.formName,s=t.url,a=t.method;return new Promise(function(e){var t,u=i[o];r("resetErrors",o),r("setLoading",{formName:o,status:!0}),n("restoreData",{formName:o}).then(function(e){return AWES.ajax(e,s,a)}).then(function(e){if(t=e,e.success){var i=e.data.data||{};Vue.set(u,"initialState",i);var n={};for(var s in u.fields)n[s]=AWES.utils.object.get(i,s);Vue.set(u,"fields",n),Vue.set(u,"isEdited",!1)}else e.data&&r("setFormErrors",{formName:o,errors:e.data})}).finally(function(){r("setLoading",{formName:o,status:!1}),e(t)})})}},namespaced:!0},_i={name:"form-builder",version:"1.4.2",modules:{"vue-shortkey":{src:"https://unpkg.com/vue-shortkey/dist/index.js",deps:["vue"],cb:function(){Vue.use(VueShortkey)}},"v-tooltip":{src:"https://unpkg.com/v-tooltip/dist/v-tooltip.min.js",deps:["vue"],cb:function(){VTooltip.default.options.popover=Object.assign(VTooltip.default.options.popover,{defaultPlacement:"right",defaultAutoHide:!1,defaultTrigger:"manual",defaultPopperOptions:{modifiers:{flip:{behavior:["right","top"]}}}})}},"vue-the-mask":{src:"https://unpkg.com/vue-the-mask@0.11.1/dist/vue-the-mask.js",deps:["vue"]}},install:function(e){Vue.use(mi),e._store.registerModule("forms",bi),e.lang=pi}};window&&"AWES"in window?AWES.use(_i):(window.__awes_plugins_stack__=window.__awes_plugins_stack__||[],window.__awes_plugins_stack__.push(_i))}();
