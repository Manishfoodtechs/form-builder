/**
 * Bundle of AWES form-builder transpiled and polyfilled
 * Generated: 2019-04-18 12:53:17
 * Version: 1.3.18
 */

!function(){"use strict";var t,e=function(t){return"object"==typeof t?null!==t:"function"==typeof t},i=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},r=Math.ceil,o=Math.floor,n=function(t){return isNaN(t=+t)?0:(t>0?o:r)(t)},s=Math.min,a=function(t){return t>0?s(n(t),9007199254740991):0},u=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},l=(t=!0,function(e,i){var r,o,s=String(u(e)),a=n(i),l=s.length;return a<0||a>=l?t?"":void 0:(r=s.charCodeAt(a))<55296||r>56319||a+1===l||(o=s.charCodeAt(a+1))<56320||o>57343?t?s.charAt(a):r:t?s.slice(a,a+2):o-56320+(r-55296<<10)+65536}),c=function(t,e,i){return e+(i?l(t,e).length:1)},d={}.toString,f=function(t){return d.call(t).slice(8,-1)};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function h(t,e){return t(e={exports:{}},e.exports),e.exports}var m,p,v=h(function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)}),b=(v.version,h(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),_=h(function(t){var e=b["__core-js_shared__"]||(b["__core-js_shared__"]={});(t.exports=function(t,i){return e[t]||(e[t]=void 0!==i?i:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),g=0,y=Math.random(),E=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++g+y).toString(36))},k=h(function(t){var e=_("wks"),i=b.Symbol,r="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=r&&i[t]||(r?i:E)("Symbol."+t))}).store=e}),w=k("toStringTag"),F="Arguments"==f(function(){return arguments}()),S=function(t){var e,i,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),w))?i:F?f(e):"Object"==(r=f(e))&&"function"==typeof e.callee?"Arguments":r},x=RegExp.prototype.exec,A=function(t,e){var i=t.exec;if("function"==typeof i){var r=i.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==S(t))throw new TypeError("RegExp#exec called on incompatible receiver");return x.call(t,e)},I=RegExp.prototype.exec,O=String.prototype.replace,C=I,T=(m=/a/,p=/b*/g,I.call(m,"a"),I.call(p,"a"),0!==m.lastIndex||0!==p.lastIndex),V=void 0!==/()??/.exec("")[1];(T||V)&&(C=function(t){var e,r,o,n,s=this;return V&&(r=new RegExp("^"+s.source+"$(?!\\s)",function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(s))),T&&(e=s.lastIndex),o=I.call(s,t),T&&o&&(s.lastIndex=s.global?o.index+o[0].length:e),V&&o&&o.length>1&&O.call(o[0],r,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(o[n]=void 0)}),o});var N=C,$=function(t){try{return!!t()}catch(t){return!0}},M=!$(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),D=b.document,R=e(D)&&e(D.createElement),j=function(t){return R?D.createElement(t):{}},L=!M&&!$(function(){return 7!=Object.defineProperty(j("div"),"a",{get:function(){return 7}}).a}),P=function(t,i){if(!e(t))return t;var r,o;if(i&&"function"==typeof(r=t.toString)&&!e(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!e(o=r.call(t)))return o;if(!i&&"function"==typeof(r=t.toString)&&!e(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")},W=Object.defineProperty,H={f:M?Object.defineProperty:function(t,e,r){if(i(t),e=P(e,!0),i(r),L)try{return W(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},U=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},z=M?function(t,e,i){return H.f(t,e,U(1,i))}:function(t,e,i){return t[e]=i,t},B={}.hasOwnProperty,X=function(t,e){return B.call(t,e)},Y=_("native-function-to-string",Function.toString),q=h(function(t){var e=E("src"),i=(""+Y).split("toString");v.inspectSource=function(t){return Y.call(t)},(t.exports=function(t,r,o,n){var s="function"==typeof o;s&&(X(o,"name")||z(o,"name",r)),t[r]!==o&&(s&&(X(o,e)||z(o,e,t[r]?""+t[r]:i.join(String(r)))),t===b?t[r]=o:n?t[r]?t[r]=o:z(t,r,o):(delete t[r],z(t,r,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||Y.call(this)})}),G=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},Z=function(t,e,i){if(G(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,o){return t.call(e,i,r,o)}}return function(){return t.apply(e,arguments)}},J=function(t,e,i){var r,o,n,s,a=t&J.F,u=t&J.G,l=t&J.S,c=t&J.P,d=t&J.B,f=u?b:l?b[e]||(b[e]={}):(b[e]||{}).prototype,h=u?v:v[e]||(v[e]={}),m=h.prototype||(h.prototype={});for(r in u&&(i=e),i)n=((o=!a&&f&&void 0!==f[r])?f:i)[r],s=d&&o?Z(n,b):c&&"function"==typeof n?Z(Function.call,n):n,f&&q(f,r,n,t&J.U),h[r]!=n&&z(h,r,s),c&&m[r]!=n&&(m[r]=n)};b.core=v,J.F=1,J.G=2,J.S=4,J.P=8,J.B=16,J.W=32,J.U=64,J.R=128;var K=J;K({target:"RegExp",proto:!0,forced:N!==/./.exec},{exec:N});var Q=k("species"),tt=!$(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),et=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();!function(t,e,i){var r=k(t),o=!$(function(){var e={};return e[r]=function(){return 7},7!=""[t](e)}),n=o?!$(function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[Q]=function(){return i}),i[r](""),!e}):void 0;if(!o||!n||"replace"===t&&!tt||"split"===t&&!et){var s=/./[r],a=i(u,r,""[t],function(t,e,i,r,n){return e.exec===N?o&&!n?{done:!0,value:s.call(e,i,r)}:{done:!0,value:t.call(i,e,r)}:{done:!1}}),l=a[0],c=a[1];q(String.prototype,t,l),z(RegExp.prototype,r,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}}("match",1,function(t,e,r,o){return[function(i){var r=t(this),o=null==i?void 0:i[e];return void 0!==o?o.call(i,r):new RegExp(i)[e](String(r))},function(t){var e=o(r,t,this);if(e.done)return e.value;var n=i(t),s=String(this);if(!n.global)return A(n,s);var u=n.unicode;n.lastIndex=0;for(var l,d=[],f=0;null!==(l=A(n,s));){var h=String(l[0]);d[f]=h,""===h&&(n.lastIndex=c(s,a(n.lastIndex),u)),f++}return 0===f?null:d}]});var it=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==f(t)?t.split(""):Object(t)},rt=function(t){return it(u(t))},ot=Math.max,nt=Math.min,st=function(t){return function(e,i,r){var o,s=rt(e),u=a(s.length),l=function(t,e){return(t=n(t))<0?ot(t+e,0):nt(t,e)}(r,u);if(t&&i!=i){for(;u>l;)if((o=s[l++])!=o)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===i)return t||l||0;return!t&&-1}},at=k("unscopables"),ut=Array.prototype;null==ut[at]&&z(ut,at,{});var lt=function(t){ut[at][t]=!0},ct=st(!0);K(K.P,"Array",{includes:function(t){return ct(this,t,arguments.length>1?arguments[1]:void 0)}}),lt("includes");var dt=k("match"),ft=function(t,i,r){if(e(o=i)&&(void 0!==(n=o[dt])?n:"RegExp"==f(o)))throw TypeError("String#"+r+" doesn't accept regex!");var o,n;return String(u(t))},ht=k("match");K(K.P+K.F*function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[ht]=!1,!"/./"[t](e)}catch(t){}}return!0}("includes"),"String",{includes:function(t){return!!~ft(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}});var mt=0,pt=[{type:"beforeunload",handler:"windowUnloadHandler"},{type:"popstate",handler:"popStateHandler"}];var vt=function(t,e,i,r,o,n,s,a,u,l){"boolean"!=typeof s&&(u=a,a=s,s=!1);var c,d="function"==typeof i?i.options:i;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),r&&(d._scopeId=r),n?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,u(t)),t&&t._registeredComponents&&t._registeredComponents.add(n)},d._ssrRegister=c):e&&(c=s?function(){e.call(this,l(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),c)if(d.functional){var f=d.render;d.render=function(t,e){return c.call(e),f(t,e)}}else{var h=d.beforeCreate;d.beforeCreate=h?[].concat(h,c):[c]}return i},bt=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"form-builder",class:{modal_form:t.modal},attrs:{action:t.replacedUrl,method:t.method},on:{submit:function(e){return e.preventDefault(),t.send(e)}}},[t._t("default",null,null,t.fields),t.autoSubmit?t._e():i("div",{class:t.modal?"line-btns":null},[i("div",{class:t.modal?"line-btns__wrap":"line-btns"},[i("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],staticClass:"btn btn-send has-wave",class:{"loading-inline":t.isLoading},attrs:{disabled:!t.isEdited||t.isLoading,"data-loading":t.$lang.FORMS_LOADING,type:"submit","data-awes":"modal_button_ok"},on:{shortkey:t.send}},[t._v(" "+t._s(t.sendText||t.$lang.FORMS_SEND)+" "),i("span",{staticClass:"wave"})]),t.modal||t.$listeners.cancel?i("button",t._g({directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],staticClass:"btn has-wave",class:{btn_transparent:t.$listeners.cancel},attrs:{type:"button"}},{shortkey:t.close,click:t.modal?t.close:t.$listeners.cancel}),[t._v(" "+t._s(t.cancelText||t.$lang.FORMS_CANCEL)+" "),i("span",{staticClass:"wave"})]):t._e(),t._t("buttons-after")],2)])],2)},staticRenderFns:[]},void 0,{name:"form-builder",props:{name:{type:String,default:function(){return"form-builder-".concat(mt++)}},url:{type:String,required:!0},method:{type:String,default:"post",validator:function(t){return void 0===t||["get","put","post","delete","patch"].includes(t.toLowerCase())}},default:Object,storeData:String,sendText:String,cancelText:String,loadingText:String,disabledDialog:{type:Boolean,default:!1},autoSubmit:{type:Boolean,default:!1}},inject:{modal:{from:"modal",default:!1}},provide:function(){return{formId:this.name,isModal:!!this.modal}},computed:{form:function(){return this.$store.state.forms[this.name]},isLoading:function(){return this.form&&this.form.isLoading},isEdited:function(){return this.form&&this.form.isEdited},fields:function(){return this.$store.getters["forms/fields"](this.name)},replacedUrl:function(){var t=this,e=this.url;if(this.form){var i=e.match(/(?!{)([\w.\[\]]+)(?=})/g);i&&i.length&&i.forEach(function(i){e=e.replace("{"+i+"}",AWES.utils.object.get(t.form.initialState,i,""))})}return e.replace(/([^:]\/)\/+/g,"$1")}},methods:{send:function(){var t=this;!this.isLoading&&this.isEdited&&(AWES.emit("form-builder::".concat(this.name,":before-send")),this.$listeners.send?this.$store.dispatch("forms/restoreData",{formName:this.name}).then(function(e){t.$emit("send",e)}):this.$store.dispatch("forms/sendForm",{formName:this.name,url:this.replacedUrl,method:this.method}).then(function(e){t.$emit(e.success?"sended":"error",e.data),t.modal&&e.success&&t.close()}))},addUnloadHandlers:function(){var t=this;pt.forEach(function(e){window.addEventListener(e.type,t[e.handler],!1)})},removeUnloadHandlers:function(){var t=this;pt.forEach(function(e){window.removeEventListener(e.type,t[e.handler])})},checkCloseAllowed:function(){return!!this.disabledDialog||(!this.isEdited||confirm(this.$lang.FORMS_CONFIRM))},popStateHandler:function(){if(this.removeUnloadHandlers(),this.checkCloseAllowed())this.modal&&this.close();else{var t=this.modal?this.modal.hash:"",e=location.href+t;history.pushState({modal:t},document.title,e),this.addUnloadHandlers()}},windowUnloadHandler:function(t){return!(!this.disabledDialog&&this.isEdited)||(t.returnValue=this.$lang.FORMS_CONFIRM,this.$lang.FORMS_CONFIRM)},close:function(){this.checkCloseAllowed()&&(this.removeUnloadHandlers(),AWES.off("modal::".concat(this.modal.name,".before-close"),this.preventModalClose),AWES.emit("modal::".concat(this.modal.name,".close")))},preventModalClose:function(t){t.detail.preventClose(),this.close()}},created:function(){var t=this,e=this.storeData?this.$store.state[this.storeData]:this.default||{};this.$store.commit("forms/createForm",{formName:this.name,fields:e}),this.modal&&this.$watch("isEdited",function(e){AWES[e?"on":"off"]("modal::".concat(t.modal.name,".before-close"),t.preventModalClose)})},mounted:function(){this.addUnloadHandlers(),this.autoSubmit&&this.$watch("fields",this.send)},beforeDestroy:function(){this.removeUnloadHandlers()},destroyed:function(){AWES.off("modal::".concat(this.modal.name,".before-close"),this.preventModalClose),this.$store.commit("forms/deleteForm",this.name)}},void 0,!1,void 0,void 0,void 0),_t=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-popover",{staticClass:"display-block",attrs:{placement:t.placement,open:t.open,"popover-class":["theme-error",{tooltip_modal:t.isModal}]}},[t._t("default"),t.open?i("span",{staticClass:"tooltip__text",attrs:{slot:"popover"},on:{click:function(e){return t.$emit("clickTooltip")}},slot:"popover"},[i("span",{staticClass:"errors__list"},[t._v(" "+t._s(t.errorText)+" ")])]):t._e()],2)},staticRenderFns:[]},void 0,{name:"error-wrap",inject:{isModal:{from:"isModal",default:!1}},props:{open:{type:Boolean,default:!1},placement:{type:String,default:"top"},error:{type:[String,Array]}},computed:{errorText:function(){return Array.isArray(this.error)?this.error.join(", "):this.error}}},void 0,!1,void 0,void 0,void 0),gt={f:{}.propertyIsEnumerable},yt=Object.getOwnPropertyDescriptor,Et={f:M?yt:function(t,e){if(t=rt(t),e=P(e,!0),L)try{return yt(t,e)}catch(t){}if(X(t,e))return U(!gt.f.call(t,e),t[e])}},kt=function(t,r){if(i(t),!e(r)&&null!==r)throw TypeError(r+": can't set as prototype!")},wt={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=Z(Function.call,Et.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return kt(t,r),e?t.__proto__=r:i(t,r),t}}({},!1):void 0),check:kt}.set,Ft=_("keys"),St=function(t){return Ft[t]||(Ft[t]=E(t))},xt=st(!1),At=St("IE_PROTO"),It=function(t,e){var i,r=rt(t),o=0,n=[];for(i in r)i!=At&&X(r,i)&&n.push(i);for(;e.length>o;)X(r,i=e[o++])&&(~xt(n,i)||n.push(i));return n},Ot="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Ct=Ot.concat("length","prototype"),Tt={f:Object.getOwnPropertyNames||function(t){return It(t,Ct)}},Vt="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Nt="["+Vt+"]",$t=RegExp("^"+Nt+Nt+"*"),Mt=RegExp(Nt+Nt+"*$"),Dt=function(t,e,i){var r={},o=$(function(){return!!Vt[t]()||"âÂ"!="âÂ"[t]()}),n=r[t]=o?e(Rt):Vt[t];i&&(r[i]=n),K(K.P+K.F*o,"String",r)},Rt=Dt.trim=function(t,e){return t=String(u(t)),1&e&&(t=t.replace($t,"")),2&e&&(t=t.replace(Mt,"")),t},jt=Dt,Lt=Object.keys||function(t){return It(t,Ot)},Pt=M?Object.defineProperties:function(t,e){i(t);for(var r,o=Lt(e),n=o.length,s=0;n>s;)H.f(t,r=o[s++],e[r]);return t},Wt=b.document,Ht=Wt&&Wt.documentElement,Ut=St("IE_PROTO"),zt=function(){},Bt=function(){var t,e=j("iframe"),i=Ot.length;for(e.style.display="none",Ht.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Bt=t.F;i--;)delete Bt.prototype[Ot[i]];return Bt()},Xt=Object.create||function(t,e){var r;return null!==t?(zt.prototype=i(t),r=new zt,zt.prototype=null,r[Ut]=t):r=Bt(),void 0===e?r:Pt(r,e)},Yt=Tt.f,qt=Et.f,Gt=H.f,Zt=jt.trim,Jt=b.Number,Kt=Jt,Qt=Jt.prototype,te="Number"==f(Xt(Qt)),ee="trim"in String.prototype,ie=function(t){var e=P(t,!1);if("string"==typeof e&&e.length>2){var i,r,o,n=(e=ee?e.trim():Zt(e,3)).charCodeAt(0);if(43===n||45===n){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var s,a=e.slice(2),u=0,l=a.length;u<l;u++)if((s=a.charCodeAt(u))<48||s>o)return NaN;return parseInt(a,r)}}return+e};if(!Jt(" 0o1")||!Jt("0b1")||Jt("+0x1")){Jt=function(t){var i=arguments.length<1?0:t,r=this;return r instanceof Jt&&(te?$(function(){Qt.valueOf.call(r)}):"Number"!=f(r))?function(t,i,r){var o,n=i.constructor;return n!==r&&"function"==typeof n&&(o=n.prototype)!==r.prototype&&e(o)&&wt&&wt(t,o),t}(new Kt(ie(i)),r,Jt):ie(i)};for(var re,oe=M?Yt(Kt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ne=0;oe.length>ne;ne++)X(Kt,re=oe[ne])&&!X(Jt,re)&&Gt(Jt,re,qt(Kt,re));Jt.prototype=Qt,Qt.constructor=Jt,q(b,"Number",Jt)}function se(t){return t&&t.split(/(?:\]?\.|\[(?:\'|\")?|(?:\'|\")?\])/g).filter(function(t){return""!==t}).map(function(t){return t.match(/^\d+$/)?"["+t+"]":t.match(/ /)?"['"+t+"']":"."+t}).join("").replace(/^\./,"")}var ae={props:{name:String,id:Number,disabled:{type:Boolean,default:!1}},inject:{formId:{from:"formId",default:!1},isModal:{from:"isModal",default:!1},multiblock:{from:"multiblock",default:!1}},computed:{realName:function(){return this.multiblock?"".concat(this.multiblock,"[").concat(this.id,"].").concat(se(this.name)):se(this.name)},formLoading:function(){return this.$store.getters["forms/isLoading"](this.formId)},isDisabled:function(){return this.formLoading||this.disabled||this.isMultiblockDisabled},isMultiblockDisabled:function(){return!!this.multiblock&&this.$store.getters["forms/isMultiblockDisabled"](this.formId,this.multiblock)}}},ue=function(t){return Object(u(t))},le=function(t,e,r,o){try{return o?e(i(r)[0],r[1]):e(r)}catch(e){var n=t.return;throw void 0!==n&&i(n.call(t)),e}},ce={},de=k("iterator"),fe=Array.prototype,he=function(t,e,i){e in t?H.f(t,e,U(0,i)):t[e]=i},me=k("iterator"),pe=v.getIteratorMethod=function(t){if(null!=t)return t[me]||t["@@iterator"]||ce[S(t)]},ve=k("iterator"),be=!1;try{[7][ve]().return=function(){be=!0}}catch(t){}K(K.S+K.F*!function(t,e){if(!e&&!be)return!1;var i=!1;try{var r=[7],o=r[ve]();o.next=function(){return{done:i=!0}},r[ve]=function(){return o},t(r)}catch(t){}return i}(function(t){}),"Array",{from:function(t){var e,i,r,o,n,s=ue(t),u="function"==typeof this?this:Array,l=arguments.length,c=l>1?arguments[1]:void 0,d=void 0!==c,f=0,h=pe(s);if(d&&(c=Z(c,l>2?arguments[2]:void 0,2)),null!=h&&(u!=Array||(void 0===(n=h)||ce.Array!==n&&fe[de]!==n)))for(o=h.call(s),i=new u;!(r=o.next()).done;f++)he(i,f,d?le(o,c,[r.value,f],!0):r.value);else for(i=new u(e=a(s.length));e>f;f++)he(i,f,d?c(s[f],f):s[f]);return i.length=f,i}});var _e=Array.isArray||function(t){return"Array"==f(t)},ge=k("species"),ye=function(t,i){return new(function(t){var i;return _e(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!_e(i.prototype)||(i=void 0),e(i)&&null===(i=i[ge])&&(i=void 0)),void 0===i?Array:i}(t))(i)},Ee=function(t,e){var i=1==t,r=2==t,o=3==t,n=4==t,s=6==t,u=5==t||s,l=e||ye;return function(e,c,d){for(var f,h,m=ue(e),p=it(m),v=Z(c,d,3),b=a(p.length),_=0,g=i?l(e,b):r?l(e,0):void 0;b>_;_++)if((u||_ in p)&&(h=v(f=p[_],_,m),t))if(i)g[_]=h;else if(h)switch(t){case 3:return!0;case 5:return f;case 6:return _;case 2:g.push(f)}else if(n)return!1;return s?-1:o||n?n:g}},ke=Ee(6),we="findIndex",Fe=!0;we in[]&&Array(1)[we](function(){Fe=!1}),K(K.P+K.F*Fe,"Array",{findIndex:function(t){return ke(this,t,arguments.length>1?arguments[1]:void 0)}}),lt(we);var Se=function(t,e){return{value:e,done:!!t}},xe=H.f,Ae=k("toStringTag"),Ie=function(t,e,i){t&&!X(t=i?t:t.prototype,Ae)&&xe(t,Ae,{configurable:!0,value:e})},Oe={};z(Oe,k("iterator"),function(){return this});var Ce=function(t,e,i){t.prototype=Xt(Oe,{next:U(1,i)}),Ie(t,e+" Iterator")},Te=St("IE_PROTO"),Ve=Object.prototype,Ne=Object.getPrototypeOf||function(t){return t=ue(t),X(t,Te)?t[Te]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ve:null},$e=k("iterator"),Me=!([].keys&&"next"in[].keys()),De=function(){return this};!function(t,e,i,r,o,n,s){Ce(i,e,r);var a,u,l,c=function(t){if(!Me&&t in m)return m[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},d=e+" Iterator",f="values"==o,h=!1,m=t.prototype,p=m[$e]||m["@@iterator"]||o&&m[o],v=p||c(o),b=o?f?c("entries"):v:void 0,_="Array"==e&&m.entries||p;if(_&&(l=Ne(_.call(new t)))!==Object.prototype&&l.next&&(Ie(l,d,!0),"function"!=typeof l[$e]&&z(l,$e,De)),f&&p&&"values"!==p.name&&(h=!0,v=function(){return p.call(this)}),(Me||h||!m[$e])&&z(m,$e,v),ce[e]=v,ce[d]=De,o)if(a={values:f?v:c("values"),keys:n?v:c("keys"),entries:b},s)for(u in a)u in m||q(m,u,a[u]);else K(K.P+K.F*(Me||h),e,a)}(Array,"Array",function(t,e){this._t=rt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,Se(1)):Se(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values");ce.Arguments=ce.Array,lt("keys"),lt("values"),lt("entries");function Re(t,e,i){function r(t){if(!i||0===Object.keys(i).length)return t;for(var e in i)t[e]=i[e];return t}if(document.createEvent){var o=new Event(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(r(o))}else{var n=document.createEventObject();e.fireEvent("on"+t,r(n))}}!function(t,e){var i=(v.Object||{})[t]||Object[t],r={};r[t]=e(i),K(K.S+K.F*$(function(){i(1)}),"Object",r)}("keys",function(){return function(t){return Lt(ue(t))}});var je={mixins:[ae,{props:{enterSkip:{type:Boolean,default:!1},focus:{type:Boolean,default:!1}},data:function(){return{inFocus:this.focus}},computed:{isFocusable:function(){return!this.enterSkip&&!this.disabled&&this.formId}},methods:{focusNext:function(t){var e=this;try{var i=t.target.closest("form"),r=i.querySelectorAll(".is-focusable"),o=Array.from(r).findIndex(function(e){return e===t.target})+1;if(o<r.length)r[o].focus();else{t.target.blur();var n=i.querySelector('[type="submit"]');this.$nextTick(function(){n.click(),e.initWawesEffect(n)})}}catch(t){console.warn("Error while setting focus"),console.error(t)}},setFocus:function(t){try{var e=!1!==t?"focus":"blur";this.$refs.element[e]()}catch(t){console.warn("Error while setting focus"),console.error(t)}},initWawesEffect:function(t){var e={top:0,left:0};"function"==typeof t.getBoundingClientRect&&(e=t.getBoundingClientRect()),Re("mousedown",t,{pageY:e.top+window.pageYOffset-document.documentElement.clientTop+t.clientHeight/2,pageX:e.left+window.pageXOffset-document.documentElement.clientLeft+t.clientWidth/2}),setTimeout(Re,250,"mouseup",t)}},mounted:function(){this.setFocus(this.focus)}}],props:{label:String},data:function(){return{showTooltip:!1,hasError:!1}},computed:{formValue:{get:function(){return this.$store.getters["forms/fieldValue"](this.formId,this.realName)},set:function(t){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:t})}},shake:function(){return!this.formLoading&&this.showTooltip},error:function(){return this.$store.getters["forms/fieldError"](this.formId,this.realName)},firstErrorField:function(){return this.$store.getters["forms/firstErrorField"](this.formId)}},watch:{error:{handler:function(t){t?(this.showTooltip=!0,this.hasError=!0,this.checkFocus()):(this.showTooltip=!1,this.hasError=!1,this.resetInputWatcher())},immediate:!0}},methods:{initField:function(){this.formId&&(void 0===this.formValue?this.createStoreInstance():this.fieldValue=this.formValue),this.$root.$on("forms:reset",this.resetFormValue)},createStoreInstance:function(){this.$store.commit("forms/createField",{formName:this.formId,fieldName:this.realName,value:this.value})},clickTooltip:function(){this.showTooltip=!1,"function"==typeof this.setFocus&&this.setFocus()},resetError:function(){this.showTooltip=!1,this.$store.commit("forms/resetError",{formName:this.formId,fieldName:this.realName}),this.resetInputWatcher()},resetInputWatcher:function(){this.$refs.element&&this.$refs.element.removeEventListener("input",this.resetError)},resetFormValue:function(t){this.formId===t&&(this.formValue=AWES.utils.object.get(this.$options,"props.value.default"))},checkFocus:function(){"function"==typeof this.setFocus&&this.firstErrorField===this.realName&&(setTimeout(this.setFocus,0),this.$store.commit("resetFirstErrorField",this.formId))},destroyField:function(){this.$store.commit("forms/deleteField",{formName:this.formId,fieldName:this.realName}),this.resetInputWatcher(),this.$root.$off("forms:reset",this.resetFormValue)}},created:function(){this.initField()},destroyed:function(){this.destroyField()}},Le={mixins:[je],props:{value:{type:String,default:""},debounce:{type:[String,Number],default:300}},computed:{isActive:function(){return!!(this.inFocus||this.value||this.formValue)}},methods:{formValueHandler:function(t){var e=this;this.error?(this.formValue=t.target.value,this.resetError()):(clearTimeout(this.__debounce),this.__debounce=setTimeout(function(){e.formValue=t.target.value},Number(this.debounce)))},vModelHandler:function(t){this.$emit("input",t.target.value)},save:function(){clearTimeout(this.__debounce),this.formValue=this.$refs.element.value}},mounted:function(){this.formId&&AWES.on("form-builder::".concat(this.formId,":before-send"),this.save)},beforeDestroy:function(){this.formId&&AWES.off("form-builder::".concat(this.formId,":before-send"),this.save)}},Pe=0,We=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["fb-input","fb-element",{"fb-input_disabled":t.isDisabled,"fb-input_active":t.isActive||t.autoFilled,"fb-input_error":t.hasError,"animated shake":t.shake},t.$attrs.type?"fb-input_type-"+t.$attrs.type:""]},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("label",{staticClass:"fb-input__label fb-input__label_field",attrs:{for:"#"+t.inputId}},[t._v(t._s(t.label))]),t.mask?i("input",t._g(t._b({directives:[{name:"mask",rawName:"v-mask",value:t.mask,expression:"mask"}],ref:"element",class:["fb-input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{"fb-input__field_password":"password"===t.$attrs.type}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,type:t.inputType,disabled:t.isDisabled},domProps:{value:t.formId?t.formValue:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.save(),t.inFocus=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focusNext(e))},animationstart:t.autoFillHack}},"input",t.$attrs,!1),{input:t.formId?t.formValueHandler:t.vModelHandler})):i("input",t._g(t._b({ref:"element",class:["fb-input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{"fb-input__field_password":"password"===t.$attrs.type}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,type:t.inputType,disabled:t.isDisabled},domProps:{value:t.formId?t.formValue:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.save(),t.inFocus=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focusNext(e))},animationstart:t.autoFillHack}},"input",t.$attrs,!1),{input:t.formId?t.formValueHandler:t.vModelHandler})),"password"===t.$attrs.type?i("button",{staticClass:"fb-input__eye",attrs:{type:"button",tabindex:"-1","aria-label":t.$lang.SHOW_PASSWORD},on:{click:function(e){return e.preventDefault(),t.togglePassword(e)}}},[i("i",{class:["icon","password"===t.inputType?"icon-eye":"icon-eye2"]})]):t._e()])],1)},staticRenderFns:[]},void 0,{name:"fb-input",inheritAttrs:!1,mixins:[Le],props:{label:{type:String,default:""},mask:String},data:function(){return{inputType:this.$attrs.type||"text",autoFilled:!1}},computed:{inputId:function(){return"input-"+Pe++}},methods:{togglePassword:function(){this.setFocus(),"password"===this.inputType?this.inputType="text":this.inputType="password"},autoFillHack:function(t){switch(t.animationName){case"autoFillStart":this.autoFilled=!0;break;case"autoFillEnd":this.autoFilled=!1}}}},void 0,!1,void 0,void 0,void 0),He=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb-multiblock fb-element",class:[{"fb-multiblock_disabled":this.isDisabled}]},[t._l(t.blocks,function(e){return i("div",{key:e,class:["fb-multiblock__block",{"fb-multiblock_has-close":t.hasClose}]},[t._t("default",null,{id:e}),t.hasClose?i("button",{staticClass:"fb-multiblock__clear",attrs:{"aria-label":"delete"},on:{click:function(i){return i.preventDefault(),t.removeField(e)}}},[i("i",{staticClass:"icon icon-cross"})]):t._e()],2)}),i("button",{staticClass:"fb-multiblock__add",on:{click:function(e){return e.preventDefault(),t.addField(e)}}},[t._v(" "+t._s(t.label||t.$lang.FORMS_MULTIBLOCK_ADD)+" ")])],2)},staticRenderFns:[]},void 0,{name:"fb-multi-block",mixins:[ae],props:{label:String},provide:function(){return{multiblock:this.realName,nextIndex:0}},computed:{blocks:function(){return this.$store.getters["forms/multiblockIds"](this.formId,this.name)},hasClose:function(){return this.blocks.length>1},errors:function(){return this.$store.getters["forms/errorsOrFalse"](this.formId)},fields:function(){return this.$options}},watch:{disabled:function(t){this.$store.commit("forms/toggleMultiblockState",{formName:this.formId,multiblockName:this.realName,status:t})}},methods:{addField:function(){this.isDisabled||(this.$store.commit("forms/addMultiblockId",{formName:this.formId,multiblockName:this.name,id:this.nextIndex++}),this.updateTooltips())},removeField:function(t){this.isDisabled||(this.$store.commit("forms/deleteMultiblockId",{formName:this.formId,multiblockName:this.name,id:t}),this.updateTooltips())},updateTooltips:function(){this.errors&&this.$nextTick(function(){Re("scroll",window)})},initMultiblock:function(){this.$store.commit("forms/createMutiblock",{formName:this.formId,multiblockName:this.realName,disabled:this.disabled}),this.nextIndex=Math.max.apply(null,this.blocks)+1},destroyMultiblock:function(){this.$store.commit("forms/deleteMultiblock",{formName:this.formId,multiblockName:this.realName})}},created:function(){this.initMultiblock()},destroyed:function(){this.destroyMultiblock()}},void 0,!1,void 0,void 0,void 0),Ue={mixins:[je],props:{value:{type:[Boolean,Number,Array],default:0},defaultValue:String,label:{type:String,required:!0}},data:function(){return{isNumeric:!0}},computed:{isActive:function(){return!!(this.formId?this.formValue:this.vModelChecked)},vModelArray:function(){return!this.formId&&Array.isArray(this.value)},vModelChecked:function(){return this.vModelArray?this.value.includes(this.computedValue):this.value},computedValue:function(){return this.defaultValue||this.label.replace(/ /g,"_").toLowerCase()}},created:function(){this.formId&&"boolean"==typeof this.formValue&&(this.isNumeric=!1)}},ze=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["fb-checkbox","fb-element",{"fb-checkbox_error":t.hasError},{"fb-checkbox_active":t.isActive},{"fb-checkbox_disabled":t.isDisabled}]},[i("label",{staticClass:"fb-checkbox__label",attrs:{"data-awes":t.$options.name+"."+t.name}},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("input",t._g(t._b({ref:"element",class:{"is-focusable":t.isFocusable,"in-focus":t.inFocus},attrs:{type:"checkbox",disabled:t.isDisabled},domProps:{value:t.computedValue,checked:t.formId?t.formValue:t.vModelChecked},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focusNext(e))}}},"input",t.$attrs,!1),{change:t.formId?t.formValueHandler:t.vModelHandler})),i("span",{staticClass:"fb-checkbox__text"},[i("i",{staticClass:"icon icon-checkbox"}),i("span",[t._v(t._s(t.label))])])])],1)])},staticRenderFns:[]},void 0,{name:"fb-checkbox",inheritAttrs:!1,mixins:[Ue],methods:{formValueHandler:function(t){var e=t.target.checked;this.formValue=this.isNumeric?Number(e):e,this.error&&this.resetError()},vModelHandler:function(t){var e,i=this;this.vModelArray?(e=this.value.slice(),t.target.checked&&!this.vModelChecked?e.push(this.computedValue):!t.target.checked&&this.vModelChecked&&e.splice(e.findIndex(function(t){return t===i.computedValue}),1)):e=t.target.checked,this.$emit("input",e)}}},void 0,!1,void 0,void 0,void 0),Be=Ee(5),Xe=!0;"find"in[]&&Array(1).find(function(){Xe=!1}),K(K.P+K.F*Xe,"Array",{find:function(t){return Be(this,t,arguments.length>1?arguments[1]:void 0)}}),lt("find");var Ye,qe,Ge=[].sort,Ze=[1,2,3];K(K.P+K.F*($(function(){Ze.sort(void 0)})||!$(function(){Ze.sort(null)})||!((Ye=Ge)&&$(function(){qe?Ye.call(null,function(){},1):Ye.call(null)}))),"Array",{sort:function(t){return void 0===t?Ge.call(ue(this)):Ge.call(ue(this),G(t))}});var Je=20,Ke=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb-select fb-element",class:[{"fb-select_active":t.isActive},{"fb-select_opened":t.isOpened},{"fb-select_disabled":t.disabled}]},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("span",{staticClass:"fb-select__label"},[t._v(t._s(t.label||t.$lang.FORMS_SELECT_LABEL))]),i("multiselect",t._g({ref:"select",staticClass:"fb-select__field",attrs:{taggable:t.taggable,"show-labels":!1,multiple:t.multiple,"hide-selected":t.multiple,placeholder:t.placeholderText||t.defaultPlaceholder,"tag-placeholder":t.$lang.FORMS_SELECT_ADD_TAG,"internal-search":!t.isAjax,loading:t.isLoading,value:t.formId?t.convertValue(t.formValue):t.value,options:t.usedOptions,label:t.optionsName,"track-by":t.optionsValue,disabled:t.isDisabled},on:{open:function(e){t.isOpened=!0},close:function(e){t.isOpened=!1},tag:t.addOption}},{input:t.formId?t.formValueHandler:t.vModelHandler}),[i("template",{slot:"noOptions"},[t._v(t._s(t.$lang.FORMS_SELECT_EMPTY))])],2)],1)],1)},staticRenderFns:[]},void 0,{name:"fb-select",mixins:[je],components:{Multiselect:function(t){AWES.utils.loadModules({"vue-multiselect":{src:["https://unpkg.com/vue-multiselect@2.1.3/dist/vue-multiselect.min.js","https://unpkg.com/vue-multiselect@2.1.3/dist/vue-multiselect.min.css"],deps:["vue"],cb:function(){t(window.VueMultiselect.default)}}})}},props:{value:{},selectOptions:{type:[String,Array],default:function(){return[]}},optionsName:{type:String,default:"name"},optionsValue:{type:String,default:"value"},multiple:{type:Boolean,default:!0},taggable:{type:Boolean,default:!1},debounce:{type:[String,Number],default:1e3},autoFetch:{type:[String,Boolean],default:!1},placeholderText:String},data:function(){return{isOpened:!1,isLoading:!1,ajaxOptions:[],addedOptions:[]}},computed:{computedValue:function(){return this.formId?this.formValue:this.value},hasValue:function(){return!!(this.multiple?this.computedValue&&this.computedValue.length:this.computedValue)},isActive:function(){return this.isOpened||this.hasValue},isAjax:function(){return"string"==typeof this.selectOptions},defaultPlaceholder:function(){return this.$lang[this.isAjax?"FORMS_SELECT_AJAX_PLACEHOLDER":"FORMS_SELECT_PLACEHOLDER"]},usedOptions:function(){var t=this.isAjax?this.ajaxOptions:this.selectOptions;return this.filterValue(this.addedOptions,t).concat(t)}},methods:{formValueHandler:function(t){var e=this;t&&(this.formValue=this.multiple?t.map(function(t){return t[e.optionsValue]}).sort():t[this.optionsValue],this.error&&this.resetError())},vModelHandler:function(t){t&&this.$emit("input",t)},convertValue:function(t){var e=this;return this.multiple?Array.isArray(t)?this.usedOptions.filter(function(i){return t.includes(i[e.optionsValue])}):this.usedOptions.filter(function(i){return t===i[e.optionsValue]}):this.usedOptions.find(function(i){return t===i[e.optionsValue]})},filterValue:function(t,e){var i=this;return t.filter(function(t){return-1===e.findIndex(function(e){return e[i.optionsName]===t[i.optionsName]&&e[i.optionsValue]===t[i.optionsValue]})})},resetFormValue:function(t){this.formId===t&&(this.formValue=this.multiple?[]:void 0)},setFocus:function(t){try{var e=!1!==t?"focus":"blur";this.$refs.select.$el[e]()}catch(e){--Je&&setTimeout(this.setFocus,1e3,t)}},addOption:function(t){var e,i={};i[this.optionsName]=t,i[this.optionsValue]=t,this.addedOptions.push(i),e=this.multiple?[i].concat(this.$refs.select.value):i,this.formId?this.formValueHandler(e):this.vModelHandler(e)},wrapTabEvents:function(){try{this.$refs.select.$el.querySelector(".multiselect__input").classList.add("is-focusable")}catch(t){--Je&&setTimeout(this.wrapTabEvents,500)}},bindSearch:function(){try{if(this.isAjax&&(this.$refs.select.$on("search-change",this.ajaxSearch),"false"!==this.autoFetch.toString())){var t="string"==typeof this.autoFetch?this.autoFetch:"";this.ajaxSearch(t,!0)}}catch(t){Je&&setTimeout(this.bindSearch,500)}},ajaxSearch:function(t,e){var i=this;(t||e)&&(clearTimeout(this.__search),this.isLoading=!0,this.__search=setTimeout(function(){AWES.ajax({},i.selectOptions.replace("%s",t),"get").then(function(t){var e=[];if(!0===t.success&&(Array.isArray(t.data)?e=t.data:t.data&&Array.isArray(t.data.data)&&(e=t.data.data)),i.multiple&&i.hasValue){var r=i.convertValue(i.computedValue);e=(r=i.filterValue(r,e)).concat(e)}i.ajaxOptions=e,i.isLoading=!1})},Number(this.debounce)))}},mounted:function(){this.$nextTick(this.wrapTabEvents),this.$nextTick(this.bindSearch)},beforeDestroy:function(){this.isAjax&&this.$refs.select.$off("search-change",this.ajaxSearch)}},void 0,!1,void 0,void 0,void 0),Qe=h(function(t,e){!function(t,e){var i,r,o="function"==typeof Map?new Map:(i=[],r=[],{has:function(t){return i.indexOf(t)>-1},get:function(t){return r[i.indexOf(t)]},set:function(t,e){-1===i.indexOf(t)&&(i.push(t),r.push(e))},delete:function(t){var e=i.indexOf(t);e>-1&&(i.splice(e,1),r.splice(e,1))}}),n=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){n=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function s(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var e=null,i=null,r=null,s=function(){t.clientWidth!==i&&d()},a=function(e){window.removeEventListener("resize",s,!1),t.removeEventListener("input",d,!1),t.removeEventListener("keyup",d,!1),t.removeEventListener("autosize:destroy",a,!1),t.removeEventListener("autosize:update",d,!1),Object.keys(e).forEach(function(i){t.style[i]=e[i]}),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",a,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",d,!1),window.addEventListener("resize",s,!1),t.addEventListener("input",d,!1),t.addEventListener("autosize:update",d,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:a,update:d}),"vertical"===(u=window.getComputedStyle(t,null)).resize?t.style.resize="none":"both"===u.resize&&(t.style.resize="horizontal"),e="content-box"===u.boxSizing?-(parseFloat(u.paddingTop)+parseFloat(u.paddingBottom)):parseFloat(u.borderTopWidth)+parseFloat(u.borderBottomWidth),isNaN(e)&&(e=0),d()}var u;function l(e){var i=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=i,t.style.overflowY=e}function c(){if(0!==t.scrollHeight){var r=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+e+"px",i=t.clientWidth,r.forEach(function(t){t.node.scrollTop=t.scrollTop}),o&&(document.documentElement.scrollTop=o)}}function d(){c();var e=Math.round(parseFloat(t.style.height)),i=window.getComputedStyle(t,null),o="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):t.offsetHeight;if(o<e?"hidden"===i.overflowY&&(l("scroll"),c(),o="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==i.overflowY&&(l("hidden"),c(),o="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),r!==o){r=o;var s=n("autosize:resized");try{t.dispatchEvent(s)}catch(t){}}}}function a(t){var e=o.get(t);e&&e.destroy()}function u(t){var e=o.get(t);e&&e.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(t){return t}).destroy=function(t){return t},l.update=function(t){return t}):((l=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return s(t)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],a),t},l.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],u),t}),e.default=l,t.exports=e.default}(t,e)}),ti=0,ei=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb-textarea fb-element",class:{"fb-textarea_disabled":t.isDisabled,"fb-textarea_active":t.isActive,"fb-textarea_error":t.hasError,"animated shake":t.shake}},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("label",{staticClass:"fb-textarea__label",attrs:{for:t.textareaId}},[t._v(t._s(t.label))]),i("textarea",t._g(t._b({ref:"element",class:["fb-textarea__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus}],attrs:{id:t.textareaId,disabled:t.isDisabled},domProps:{value:t.formId?t.formValue:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.save(),t.inFocus=!1}}},"textarea",t.$attrs,!1),{input:t.formId?t.formValueHandler:t.vModelHandler}))])],1)},staticRenderFns:[]},void 0,{name:"fb-textarea",inheritAttrs:!1,mixins:[Le],props:{fixsize:{type:Boolean,default:!1}},computed:{textareaId:function(){return"textarea-"+ti++}},methods:{setAutoResize:function(){this.fixsize||(Qe(this.$refs.element),this.$watch("value",this.updateAutoResize))},updateAutoResize:function(){var t=this;this.$nextTick(function(){Qe.update(t.$refs.element)})}},mounted:function(){this.setAutoResize()}},void 0,!1,void 0,void 0,void 0);function ii(t){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ri=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["fb-keycode","fb-element",{"animated shake":t.shake},{"fb-keycode_disabled":t.isDisabled}]},[i("div",{staticClass:"fb-keycode__block"},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("div",{staticClass:"fb-keycode__wrap",attrs:{id:"keywrap"}},t._l(t.length,function(e){return i("div",{key:e,staticClass:"fb-keycode__field-wrap"},[i("input",{ref:"fields",refInFor:!0,class:["fb-keycode__field",{"is-focusable":t.isFocusable,"in-focus":t.inFocus[e-1]}],attrs:{type:"tel",inputmode:"numeric",pattern:"[0-9]*",maxlength:"1",autocomplete:"off",disabled:t.isDisabled},domProps:{value:t.inputValue[e-1]},on:{focus:function(i){t.inFocus[e-1]=!0},blur:function(i){t.inFocus[e-1]=!1},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focusNext(e))},function(i){if(!i.type.indexOf("key")&&t._k(i.keyCode,"backspace",void 0,i.key,void 0))return null;e>1&&t.onBackspace(i,e-1)},function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?null:"button"in i&&0!==i.button?null:void(e>1&&t.onLeft(i,e-1))},function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"right",39,i.key,["Right","ArrowRight"])?null:"button"in i&&2!==i.button?null:void(e<t.length&&t.onRight(i,e-1))}],input:function(i){return t.onInput(i,e-1)},paste:function(e){return e.preventDefault(),t.onPaste(e)}}})])}),0)])],1)])},staticRenderFns:[]},void 0,{name:"fb-code",mixins:[je],props:{length:{type:Number,default:6}},data:function(){return{inputValue:[],inFocus:[]}},computed:{value:{get:function(){return this.inputValue.join("")},set:function(t){t=t.trim().replace(/\D/g,"").substr(0,this.length),this.inputValue=t.split("")}},hasCaptchaError:function(){return this.$store.getters["forms/hasCaptchaError"](this.formId)}},watch:{error:function(t){var e=this;t&&t.length?(this.value="",this.$refs.fields.forEach(function(t){t.addEventListener("input",e.resetError,!1)}),this.$nextTick(function(){e.setFocus()})):this.$refs.fields.forEach(function(t){t.removeEventListener("input",e.resetError)})},hasCaptchaError:function(t){t||this.autoSubmitForm(this.value)},value:function(t){t.length===this.length&&(this.formValue=t)}},methods:{setFocus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("boolean"!=typeof t||!0!==t){if("number"==typeof t){t>=this.length&&(t=this.length-1);var e=this.$refs.fields[t];setTimeout(function(){e.focus(),e.setSelectionRange(0,e.value.length)},10)}}else this.$refs.fields[0].focus()},onInput:function(t,e){var i=t.target.value.replace(/\D/g,"");t.target.value=i,this.$set(this.inputValue,e,i),this.isEmpty(e)||e===this.length-1||this.setFocus(e+1)},onBackspace:function(t,e){this.setFocus(e-1)},onLeft:function(t,e){this.setFocus(e-1)},onRight:function(t,e){this.setFocus(e+1)},onPaste:function(t){this.error&&this.error.length&&this.resetError(),this.value=t.clipboardData.getData("text")},isEmpty:function(t){return""===this.inputValue[t]||"undefined"===ii(this.inputValue[t])}},created:function(){for(var t=0;t<this.length;t++)this.inFocus.push(!(0!==t||!this.focus)),this.inputValue.push("")},beforeDestroy:function(){var t=this;this.$refs.fields.forEach(function(e){e.removeEventListener("input",t.resetError)})}},void 0,!1,void 0,void 0,void 0),oi={domain:"awescrm.de",maxlength:32,ulrifyOptions:{spaces:"-",toLower:!0,trim:!0,addEToUmlauts:!0,nonPrintable:"",failureOutput:""}},ni=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["fb-slug","fb-element",{"fb-slug_disabled":t.isDisabled,"fb-slug_active":t.isActive,"fb-slug_error":t.hasError,"animated shake":t.shake}]},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("div",{staticClass:"fb-slug__group-wrap"},[i("span",{staticClass:"fb-slug__group-field"},[i("label",{staticClass:"fb-slug__label",attrs:{for:"#"+t.inputId}},[t._v(t._s(t.label))]),i("input",t._g(t._b({ref:"element",class:["fb-slug__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,maxlength:t.maxlength,type:"text",disabled:t.isDisabled},domProps:{value:t.formId?t.formValue:t.removeDomain(t.value)},on:{input:t.toggleWatcher,focus:function(e){t.inFocus=!0},blur:function(e){t.save(),t.inFocus=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focusNext(e))}}},"input",t.$attrs,!1),{input:t.formId?t.formValueHandler:t.vModelHandler}))]),i("span",{staticClass:"fb-slug__group-label"},[t._v(t._s(t.dotDomain))])])])],1)},staticRenderFns:[]},void 0,{name:"fb-company-slug",extends:We,props:{domain:{type:String,default:function(){return this._config.domain}},debounce:{type:[String,Number],default:0},input:{type:String,default:""},maxlength:{type:[String,Number],default:function(){return this._config.maxlength}}},data:function(){return{watchInput:!0}},computed:{dotDomain:function(){return"."+this.domain.replace(/^\./,"")},formValue:{get:function(){return this.removeDomain(this.$store.getters["forms/fieldValue"](this.formId,this.realName))},set:function(t){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:this.addDomain(this.noramlizeUrl(t))})}}},watch:{input:{handler:function(t){var e=this;!this.$isServer&&this.watchInput&&t&&(this.formId?this._isMounted?this.formValue=t:this.$nextTick(function(){return e.formValue=t}):this.vModelHandler({target:{value:t}}))},immediate:!0}},methods:{vModelHandler:function(t){this.$emit("input",this.addDomain(this.noramlizeUrl(t.target.value)))},toggleWatcher:function(t){""===t.target.value?this.watchInput=!0:this.watchInput&&(this.watchInput=!1)},noramlizeUrl:function(t){return t&&this.$toUrl(t).substr(0,+this.maxlength)},addDomain:function(t){return t&&this.removeDomain(t)+this.dotDomain},removeDomain:function(t){return t&&t.replace(this.dotDomain,"")}},beforeCreate:function(){this._config=Object.assign({},oi,window.AWES._config.companySlug),this.$toUrl=Urlify.create(this._config.ulrifyOptions)}},void 0,!1,void 0,void 0,void 0),si=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow&&!t.reset?i("div",[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:function(e){t.showTooltip=!1}}},[i("vue-recaptcha",t._g({ref:"recaptcha",staticClass:"re-captcha",attrs:{sitekey:t.sitekey,theme:t.theme}},{verify:t.formId?t.onVerify:null,expired:t.formId?t.onExpired:null}))],1)],1):t._e()},staticRenderFns:[]},void 0,{name:"fb-auto-captcha",mixins:[ae],components:{vueRecaptcha:function(t){return AWES.utils.loadModule("vue-recaptcha","https://unpkg.com/vue-recaptcha@latest/dist/vue-recaptcha.min.js",function(){t(window.VueRecaptcha)})}},props:{show:{type:Boolean,default:!1}},data:function(){return{sitekey:AWES._config.reCaptchaSiteKey,serverError:!1,showTooltip:!1,reset:!1,theme:AWES._themeDark?"dark":"light"}},computed:{formValue:{get:function(){return this.$store.getters["forms/fieldValue"](this.formId,this.realName)},set:function(t){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:t})}},error:function(){return this.$store.getters["forms/fieldError"](this.formId,this.realName)},realName:function(){return"g-recaptcha-response"},isShow:function(){return this.show||this.serverError}},watch:{error:function(t){(Array.isArray(t)&&t.length||t)&&(this.serverError=!0)},formLoading:function(t){var e=this;!t&&this.isShow&&this.$nextTick(function(){e.$refs.recaptcha.reset()})},theme:function(){var t=this;this.isShow&&(this.reset=!0,this.$nextTick(function(){t.reset=!1}))}},methods:{onVerify:function(t){this.formValue=t,this.resetError()},onExpired:function(){this.formValue=null},checkTheme:function(t){var e=t.detail;this.theme=e?"dark":"light"},resetError:function(){this.showTooltip=!1,this.$store.commit("forms/resetError",{formName:this.formId,fieldName:this.realName})},manageCaptchaScript:function(t){switch(t){case"add":if(!document.getElementById("g-captcha-script")){var e=document.createElement("script");e.setAttribute("id","g-captcha-script"),e.setAttribute("src","https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit"),document.head.appendChild(e)}break;case"remove":document.getElementById("g-captcha-script").remove()}}},created:function(){this.$isServer||(this.manageCaptchaScript("add"),AWES.on("theme.change",this.checkTheme))},beforeDestroy:function(){this.manageCaptchaScript("remove"),AWES.off("theme.change",this.checkTheme)}},void 0,!1,void 0,void 0,void 0),ai=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.items&&t.items.length?i("div",{staticClass:"fc-radio fb-element",class:[{"animated shake":t.shake,"fc-radio_disabled":t.isDisabled}]},[t.label?i("div",{staticClass:"fc-radio__label"},[t._v(t._s(t.label))]):t._e(),i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("div",{staticClass:"fc-radio__wrap"},t._l(t.items,function(e,r){return i("label",{key:r,class:["fc-radio__box",{"is-checked":t.checkActive(e)}]},[i("input",t._g(t._b({ref:"fields",refInFor:!0,class:["fc-radio__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus}],attrs:{type:"radio","data-awes":t.$options.name+"."+t.name,disabled:t.isDisabled},domProps:{checked:t.checkActive(e),value:e.value?e.value:e.toString()},on:{focus:function(e){return t.$set(t.inFocus,r,!0)},blur:function(e){return t.$set(t.inFocus,r,!1)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focusNext(e))}}},"input",t.$attrs,!1),{input:t.formId?t.formValueHandler:t.vModelHandler})),t._t("default",[i("span",{staticClass:"fc-radio__text"},[t._v(t._s(e.name?e.name:e.toString()))])],{item:e,checked:t.checkActive(e),focused:t.inFocus[r]})],2)}),0)])],1):t._e()},staticRenderFns:[]},void 0,{name:"fb-radio-group",mixins:[je],props:{items:Array,value:String},data:function(){return{inFocus:[]}},methods:{formValueHandler:function(t){this.formValue=t.target.value,this.error&&this.resetError()},vModelHandler:function(t){this.$emit("input",t.target.value)},checkActive:function(t){return this.getItemValue(t)==(this.formId?this.formValue:this.value)},getItemValue:function(t){return t.value?t.value:t.toString()},setFocus:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];"number"==typeof t?this.$refs.elements[t].focus():!0===t&&this.$refs.elements[0].focus()}},created:function(){for(var t=0;t<this.items.length;t++)this.inFocus.push(!(0!==t||!this.focus))}},void 0,!1,void 0,void 0,void 0),ui=0,li=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["fb-slider","fb-element",{"fb-slider_disabled":t.isDisabled,"fb-slider_error":t.hasError,"animated shake":t.shake}]},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("div",{staticClass:"fb-slider__wrap"},[i("div",{staticClass:"fb-slider__wrap-left"},[i("label",{staticClass:"fb-slider__label",attrs:{for:"#"+t.inputId}},[t._v(t._s(t.label))]),i("span",{staticClass:"fb-slider__value"},[t._v(t._s(t.percent)+" %")])]),i("div",{staticClass:"fb-slider__wrap-right"},[i("input",t._b({ref:"element",class:["fb-slider__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus}],style:"--percent: "+t.percent+"%",attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,type:"range",disabled:t.isDisabled},domProps:{value:(t.formId?t.formValue:t.value)||0},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focusNext(e))}}},"input",t.$attrs,!1))])])])],1)},staticRenderFns:[]},void 0,{name:"fb-slider",inheritAttrs:!1,mixins:[je],props:{min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},value:{type:[Number,String],default:0}},computed:{inputId:function(){return"slider-"+ui++},percent:function(){return Math.round(Number(this.formId?this.formValue:this.value)||0/Number(this.max)*100)}},methods:{formValueHandler:function(t){this.formValue=Number(t.target.value),this.error&&this.resetError()},vModelHandler:function(t){this.$emit("input",Number(t.target.value))},toggleListener:function(t){var e=(t?"add":"remove")+"EventListener",i=this.formId?this.formValueHandler:this.vModelHandler,r=window.MSInputMethodContext?"change":"input";this.$refs.element[e](r,i)}},mounted:function(){var t=this;this.$nextTick(function(){return t.toggleListener(!0)})},beforeDestroy:function(){this.toggleListener(!1)}},void 0,!1,void 0,void 0,void 0),ci=20,di=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["fb-phone","fb-element",{"fb-phone_disabled":t.isDisabled,"animated shake":t.shake,"fb-phone_active":t.isActive,"fb-phone_error":t.hasError}]},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("span",{staticClass:"fb-phone__label"},[t._v(t._s(t.label))]),i("vue-tel-input",t._g({ref:"tel",attrs:{value:t.formId?t.formValue:t.value,disabled:t.isDisabled},on:{onBlur:function(e){t.save(),t.inFocus=!1},onInput:t.checkFocus}},{input:t.formId?t.formValueHandler:t.vModelHandler}))],1)],1)},staticRenderFns:[]},void 0,{name:"fb-phone",mixins:[je],components:{VueTelInput:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return AWES.utils.loadModule("vue-tel-input",["https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.js","https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.css"],function(){t(VueTelInput.default)})})},props:{value:{type:String,default:""},debounce:{type:[String,Number],default:300}},data:function(){return{nativeTelInput:!1}},computed:{isActive:function(){return!!(this.inFocus||this.value||this.formValue)}},methods:{formValueHandler:function(t){var e=this;this.error?(this.formValue=t,this.resetError()):(clearTimeout(this.__debounce),this.__debounce=setTimeout(function(){e.formValue=t},Number(this.debounce)))},vModelHandler:function(t){this.$emit("input",t)},setFocusWatcher:function(){var t=this;this.$refs.tel&&(this.nativeTelInput=this.$refs.tel.$refs.input,this.nativeTelInput.addEventListener("focus",function(){t.inFocus=!0}),this.setFocusableClass(),this.setFocusClass())},setFocusClass:function(){this.nativeTelInput.classList[this.inFocus?"add":"remove"]("in-focus"),ci=20},setFocusableClass:function(){this.nativeTelInput.classList[this.isFocusable?"add":"remove"]("is-focusable"),ci=20},setFocus:function(t){var e=this;try{var i=!1!==t?"focus":"blur";this.nativeTelInput[i]()}catch(i){ci&&(ci--,setTimeout(function(){e.setFocus(t)},1e3))}},checkFocus:function(){this.inFocus||this.setFocus()},save:function(){clearTimeout(this.__debounce),this.formValue=this.nativeTelInput.value}},watch:{inFocus:function(){try{this.setFocusClass()}catch(t){ci&&(ci--,setTimeout(this.setFocusClass,1e3))}},isFocusable:function(){try{this.setFocusableClass()}catch(t){ci&&(ci--,setTimeout(this.setFocusableClass,1e3))}}},mounted:function(){this.setFocusWatcher()},updated:function(){this.nativeTelInput||this.setFocusWatcher()}},void 0,!1,void 0,void 0,void 0),fi=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("uploader",{staticClass:"fb-uploader fb-element",class:{"fb-uploader_disabled":t.isDisabled},attrs:{options:t.uploaderOptions},on:{"file-added":t.checkFile,"file-progress":t.setProgress,"file-success":t.addFileNameToForm,"upload-start":function(e){return t.toggleFormBlock(!0)},complete:function(e){return t.toggleFormBlock(!1)}}},[i("uploader-unsupport"),i("uploader-drop",[i("p",{staticClass:"fb-uploader__message"},[t._v(" "+t._s(t.$lang.FORMS_UPLOAD_DROP)+" "),i("span",{staticClass:"fb-uploader__fakebtn"},[t._v(t._s(t.$lang.FORMS_UPLOAD_ADD))]),i("uploader-btn",{ref:"uploaderBtn",staticClass:"fb-uploader__btn",attrs:{tabindex:"1"}},[i("span",[t._v(t._s(t.$lang.FORMS_UPLOAD_ADD))])])],1),t.format||t.size?i("p",[t.format?i("i",{staticClass:"fb-uploader__formats"},[t._v(" "+t._s(t.$lang.FORMS_UPLOAD_FORMAT)+" "+t._s(t.formatString)+". ")]):t._e(),t.size?i("i",{staticClass:"fb-uploader__size"},[t._v(" "+t._s(t.$lang.FORMS_UPLOAD_SIZE)+" "+t._s(t.size)+"Mb ")]):t._e()]):t._e()]),i("uploader-list",{scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("list",[e.fileList.length?i("div",{staticClass:"fb-uploader__cwrap"},[i("table",{staticClass:"fb-uploader__list"},[i("tbody",[t._l(e.fileList,function(e,r){return[i("tr",{key:e.id},[i("td",{staticClass:"fb-uploader__list-number"},[t._v(t._s(r+1))]),i("td",{staticClass:"fb-uploader__list-name"},[i("span",{staticClass:"fb-uploader__list-ftitle"},[t._v(t._s(t.getName(e.name)))])]),i("td",{staticClass:"fb-uploader__list-type"},[t._v(t._s(t.getExtension(e.name)))]),i("td",{staticClass:"fb-uploader__list-size"},[t._v(t._s(t._f("bytesToMb")(e.size)))]),i("td",{staticClass:"fb-uploader__list-date"},[e.isComplete()?[t._v(" "+t._s(t._f("timestampToDate")(e._lastProgressCallback))+" ")]:t._e()],2),i("td",{staticClass:"fb-uploader__list-delete"},[i("button",{staticClass:"fb-uploader__delete",attrs:{title:t.$lang.FORMS_UPLOAD_DELETE,"aria-label":t.$lang.FORMS_UPLOAD_DELETE},on:{click:function(i){return i.preventDefault(),t.removeFile(e,r)}}},[t._v("Ã")])])]),e.isComplete()?t._e():i("tr",{key:e.id+"loader",staticClass:"fb-uploader__list-pgwrap"},[i("td",{staticClass:"fb-uploader__list-progress",attrs:{colspan:"6"}},[i("progress",{staticClass:"fb-uploader__progress",attrs:{max:"1"},domProps:{value:t.filesProgress[e.uniqueIdentifier]}})])])]})],2)])]):t._e()],{fileList:e.fileList,removeFile:t.removeFile})]}}],null,!0)})],1)},staticRenderFns:[]},void 0,{name:"fb-uploader",mixins:[je],props:{url:{type:String,required:!0},format:{type:[String,Array]},size:[String,Number],validator:function(t){return+t==t}},data:function(){return{filesProgress:{}}},filters:{timestampToDate:function(t){var e=new Date(t);return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear()+1)},bytesToMb:function(t){var e=t/1024/1024;return(e<1?e.toFixed(3):e.toFixed(1))+"Mb"}},computed:{uploaderOptions:function(){return{target:this.url,testChunks:!1}},formatArray:function(){return this.format&&Array.isArray(this.format)?this.format:this.format.split(",").map(function(t){return t.trim()})},formatString:function(){return this.format&&Array.isArray(this.format)?this.format.concat(", "):this.format},maxSizeBytes:function(){return 1024*this.size*1024}},methods:{checkFile:function(t){this.format&&!this._extensionMatch(t)&&(t.ignored=!0,this.showError(this.$lang.FORMS_UPLOADER_EXTENSION_ERROR.replace("%s",t.name))),this.size&&t.size>this.maxSizeBytes&&(t.ignored=!0,this.showError(this.$lang.FORMS_UPLOADER_SIZE_ERROR.replace("%s",t.name)))},showError:function(t){AWES.notify({status:"error",message:t})},setProgress:function(t){this.$set(this.filesProgress,t.uniqueIdentifier,t.progress())},getExtension:function(t){return t.split(".").pop()},getName:function(t){var e=t.split(".");return e.pop(),e.join(".")},_extensionMatch:function(t){var e=this.getExtension(t.name);return this.formatArray.includes(e)},toggleFormBlock:function(t){this.$store.commit("setLoading",{formName:this.formId,status:t}),t||this.$forceUpdate()},addFileNameToForm:function(t,e,i,r){delete this.filesProgress[e.uniqueIdentifier];try{var o=JSON.parse(i),n=AWES.utils.object.get(o,"meta.path",e.relativePath);Array.isArray(this.formValue)?this.formValue.push(n):this.formValue=[n]}catch(t){console.log(t)}},removeFile:function(t,e){t.isComplete()&&this.formValue.splice(e,1),t.cancel(),delete this.filesProgress[t.uniqueIdentifier]},setFocus:function(t){var e=this;this.__retries=this.__retries||20;try{var i=!1!==t?"focus":"blur";this.$refs.uploaderBtn.$el[i](),this.__retries=20}catch(i){this.__retries-=1,this.__retries&&setTimeout(function(){return e.setFocus(t)},1e3)}}}},void 0,!1,void 0,void 0,void 0);var hi={branding:!1,statusbar:!1,menubar:!1,fontsize_formats:"10px 12px 14px 16px 18px 24px 36px",plugins:"lists",toolbar:["fontselect fontsizeselect bold italic underline numlist bullist"],setup:function(){this.on("ExecCommand",function(t){"FontName"===t.command&&(t.target.getDoc().body.style.fontFamily=t.value)})},init_instance_callback:function(){this.execCommand("FontName",!1,"Arial")}};var mi={lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,autoCloseTags:!0,matchTags:!0,mode:"htmlmixed"},pi=0,vi=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb-editor fb-element",class:[{"fb-editor_disabled":t.isDisabled}]},[i("div",{staticClass:"fb-editor__modes"},[i("button",{class:["fb-editor__modes-button",{"is-active":"visual"===t.mode}],attrs:{type:"button"},on:{click:function(e){t.mode="visual"}}},[t._v(" "+t._s(t.$lang.FORMS_EDITOR_VISUAL)+" ")]),i("button",{class:["fb-editor__modes-button",{"is-active":"code"===t.mode}],attrs:{type:"button"},on:{click:function(e){t.mode="code"}}},[t._v(" "+t._s(t.$lang.FORMS_EDITOR_CODE)+" ")])]),i("div",{staticClass:"fb-editor__tabs"},[i("div",{directives:[{name:"show",rawName:"v-show",value:"visual"===t.mode,expression:"mode === 'visual'"}],key:"visual",staticClass:"fb-editor__tab"},[i("textarea",{staticClass:"fb-editor__tiny",attrs:{id:t.editorId,disabled:t.isDisabled}},[t._v(t._s(t.formValue))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"code"===t.mode,expression:"mode === 'code'"}],key:"code",staticClass:"fb-editor__tab"},[i("textarea",{ref:"code",staticClass:"fb-editor__codemirror",attrs:{id:t.codeEditorId,disabled:t.isDisabled}},[t._v(t._s(t.formValue))])])])])},staticRenderFns:[]},void 0,{name:"fb-editor",mixins:[je],props:{options:{type:Object,default:function(){return{}}}},data:function(){return{editorId:"fb-editor-"+pi,codeEditorId:"fb-code-editor-"+pi++,mode:"visual",codeEditorInited:!1}},watch:{mode:function(t){"visual"===t?(this._saveCode(),tinymce.get(this.editorId).setContent(this.value)):(this._saveVisual(),this.codeEditorInited?this._setCodeValue():AWES.utils.loadModules({codemirror:{src:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.css"]},"codemirror-plugins":{deps:["codemirror"],src:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/xml/xml.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/fold/xml-fold.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/matchbrackets.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/closebrackets.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/matchtags.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/closetag.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/htmlmixed/htmlmixed.min.js"]}}).then(this.initCodeEditor).then(this._setCodeValue))}},methods:{initEditor:function(){var t=this;hi.selector="#"+this.editorId;var e=AWES.utils.object.get(AWES._config,"formBuilder.fbEditor",{});this.focus&&(e.auto_focus=this.editorId),Object.assign(e,this.options,hi),tinymce.init(e);var i=tinymce.get(this.editorId);i.on("Change",this._debounceSave),void 0!==ii(AWES._theme)&&i.once("Init",function(){t._switchThemeAttribute({detail:AWES._theme})})},initCodeEditor:function(){return this.codeEditorInited=!0,this._codeEditor=CodeMirror.fromTextArea(this.$refs.code,mi),this._codeEditor.on("update",this._debounceSave),this._codeEditor},save:function(){"visual"===this.mode?this._saveVisual():this._saveCode()},_debounceSave:function(){clearTimeout(this._debounce),this._debounce=setTimeout(this.save,1e3)},_saveVisual:function(){this.formValue=tinymce.get(this.editorId).save()},_saveCode:function(){this._codeEditor&&(this.formValue=this._codeEditor.doc.getValue())},_setCodeValue:function(){var t=this;this._codeEditor.doc.setValue(this.formValue),setTimeout(function(){t._codeEditor.refresh()},1)},_switchThemeAttribute:function(t){var e=tinymce.get(this.editorId).getDoc();1===t.detail?e.documentElement.setAttribute("data-dark",!0):e.documentElement.removeAttribute("data-dark")},setFocus:function(t){try{!1!==t&&("visual"===this.mode?tinymce.get(this.editorId).focus():this._codeEditor&&this._codeEditor.focus())}catch(t){console.warn("Error while setting focus"),console.error(t)}}},mounted:function(){this.formId&&AWES.on("form-builder::".concat(this.formId,":before-send"),this.save),this.$nextTick(this.initEditor),void 0!==ii(AWES._theme)&&AWES.on("theme.change",this._switchThemeAttribute)},beforeDestroy:function(){this.formId&&AWES.off("form-builder::".concat(this.formId,":before-send"),this.save),void 0!==ii(AWES._theme)&&AWES.off("theme.change",this._switchThemeAttribute)}},void 0,!1,void 0,void 0,void 0),bi=vt({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["fb-switcher","fb-element",{"fb-switcher_error":t.hasError,"fb-switcher_active":t.isActive,"fb-switcher_disabled":t.isDisabled}],on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.toggleValue(t.rangeValue)}}},[i("fb-error-wrap",{attrs:{open:t.showTooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("div",{staticClass:"fb-switcher__field-wrap",attrs:{"data-awes":t.$options.name+"."+t.name}},[i("input",t._g(t._b({ref:"element",staticClass:"fb-switcher__field",class:{"is-focusable":t.isFocusable,"in-focus":t.inFocus},attrs:{type:"range",min:"0",max:"1",step:"1",disabled:t.isDisabled},domProps:{value:t.rangeValue},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.focusNext(e))},mousedown:function(e){t.oldValue=t.rangeValue},click:function(e){return t.toggleValue(t.oldValue)}}},"input",t.$attrs,!1),{input:t.formId?t.formValueHandler:t.vModelHandler}))]),i("span",{staticClass:"fb-switcher__label",on:{click:function(e){return e.target!==e.currentTarget?null:t.toggleValue(t.rangeValue)}}},[t._v(t._s(t.label))])])],1)},staticRenderFns:[]},void 0,{name:"fb-switcher",inheritAttrs:!1,mixins:[Ue],data:function(){return{oldValue:null}},computed:{rangeValue:function(){return Number(this.formId?this.formValue:this.vModelChecked)}},methods:{formValueHandler:function(t){this.oldValue=null;var e=+t.target.value;this.formValue=this.isNumeric?e:Boolean(e),this.error&&this.resetError()},vModelHandler:function(t){var e,i=this;this.oldValue=null,this.vModelArray?(e=this.value.slice(),t.target.value&&!this.vModelChecked?e.push(this.computedValue):!t.target.checked&&this.vModelChecked&&e.splice(e.findIndex(function(t){return t===i.computedValue}),1)):e=Boolean(t.target.value),this.$emit("input",e)},toggleValue:function(t){if(!this.isDisabled&&null!==t){var e={target:{value:t?0:1}};this.formId?this.formValueHandler(e):this.vModelHandler(e)}}}},void 0,!1,void 0,void 0,void 0);var _i={installed:!1,install:function(t){this.installed||(this.installed=!0,t.component("form-builder",bt),t.component("fb-error-wrap",_t),t.component("fb-switcher",bi),t.component("fb-input",We),t.component("fb-multi-block",He),t.component("fb-checkbox",ze),t.component("fb-select",Ke),t.component("fb-textarea",ei),t.component("fb-code",ri),t.component("fb-company-slug",function(t){AWES.utils.loadModule("urlify","https://unpkg.com/urlify@0.3.6/dist/urlify.js",function(){t(ni)})}),t.component("fb-auto-captcha",si),t.component("fb-radio-group",ai),t.component("fb-slider",li),t.component("fb-phone",di),t.component("fb-uploader",function(t){AWES.utils.loadModule("vue-simple-uploader","https://unpkg.com/vue-simple-uploader@0.5.6/dist/vue-uploader.js",function(){t(fi)})}),t.component("fb-editor",function(t){AWES.utils.loadModules({"tiny-mce":"https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.2/tinymce.min.js","tiny-mce-plugins":{deps:["tiny-mce"],src:["https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.2/plugins/lists/plugin.min.js"]}}).then(function(){t(vi)})}))}},gi={FORMS_SEND:"Send",FORMS_CANCEL:"Cancel",FORMS_LOADING:"Loading...",FORMS_CONFIRM:"Are you shure? All not submitted data will be erased...",FORMS_MULTIBLOCK_ADD:"+ add",FORMS_SELECT_LABEL:"Select a value",FORMS_SELECT_PLACEHOLDER:"Pick a value",FORMS_SELECT_AJAX_PLACEHOLDER:"Start typing...",FORMS_SELECT_EMPTY:"Nothing found",FORMS_SELECT_ADD_TAG:"Add new value",FORMS_UPLOAD_DROP:"Drag and drop file or",FORMS_UPLOAD_ADD:"Add file",FORMS_UPLOAD_FORMAT:"File formats only",FORMS_UPLOAD_SIZE:"Size of files no more then",FORMS_UPLOAD_REMOVE:"Remove file",FORMS_UPLOADER_EXTENSION_ERROR:"File %s has wrong extension",FORMS_UPLOADER_SIZE_ERROR:"File %s is too big",FORMS_EDITOR_VISUAL:"Visual",FORMS_EDITOR_CODE:"Code"};function yi(t){t.isEdited||Vue.set(t,"isEdited",!0)}var Ei={state:function(){return{}},getters:{form:function(t){return function(e){return t[e]}},fields:function(t,e){return function(t){var i={},r=e.form(t);return r&&(i=r.fields),i}},multiblockIds:function(t,e){return function(t,i){var r=[0],o=e.form(t);return o&&(r=o.multiblocks[i].ids),r}},errorsOrFalse:function(t,e){return function(t){var i=e.form(t),r=i&&i.errors||{};return!AWES.utils.object.isEmpty(r)&&r}},hasCaptchaError:function(t,e){return function(t){return!!e.form(t)["g-recaptcha-response"]}},isLoading:function(t,e){return function(t){var i=e.form(t);return i&&i.isLoading}},isMultiblockDisabled:function(t,e){return function(t,i){var r=e.form(name);return r&&!r.multiblocksDisabled[i]}},fieldValue:function(t,e){return function(t,i){var r=e.form(t);return r&&r.fields[i]}},fieldError:function(t,e){return function(t,i){var r=e.form(t);return r&&r.errors[i]}},firstErrorField:function(t){return function(e){return t[e]&&t[e].firstErrorField}}},mutations:{createForm:function(t,e){var i=e.formName,r=e.fields;Vue.set(t,i,{initialState:r,fields:{},errors:{},multiblocks:{},isLoading:!1,isEdited:!1,firstErrorField:null})},setLoading:function(t,e){var i=e.formName,r=e.status;Vue.set(t[i],"isLoading",r)},deleteForm:function(t,e){Vue.delete(t,e)},setFormErrors:function(t,e){var i=e.formName,r=e.errors,o=t[i];Vue.set(o,"firstErrorField",Object.keys(r)[0]);var n={};for(var s in r){var a=r[s];n[se(s)]=a}Vue.set(o,"errors",n)},createField:function(t,e){var i=e.formName,r=e.fieldName,o=e.value,n=t[i];o=AWES.utils.object.get(n.initialState,r,o),Vue.set(n.fields,r,o)},setFieldValue:function(t,e){var i=e.formName,r=e.fieldName,o=e.value,n=t[i];Vue.set(n.fields,r,o),yi(n)},deleteField:function(t,e){var i=e.formName,r=e.fieldName,o=t[i];Vue.delete(o.fields,r),Vue.delete(o.errors,r)},resetError:function(t,e){var i=e.formName,r=e.fieldName;Vue.delete(t[i].errors,r)},resetErrors:function(t,e){Vue.set(t[e],"errors",{})},resetFirstErrorField:function(t,e){Vue.set(t[e],"firstErrorField",null)},createMutiblock:function(t,e){var i=e.formName,r=e.multiblockName,o=e.disabled,n=t[i],s=AWES.utils.object,a=s.get,u=s.isEmpty,l=a(n.initialState,r);l=u(l)?[{}]:l;var c=Object.keys(l).map(function(t){return Number(t)});Vue.set(n.multiblocks,r,{disabled:o,ids:c})},deleteMutiblock:function(t,e){var i=e.formName,r=e.multiblockName;Vue.delete(t[i].multiblocks,r)},toggleMultiblockState:function(t,e){var i=e.formName,r=e.multiblockName,o=e.status;Vue.set(t[i].multiblocks[r],"disabled",o)},addMultiblockId:function(t,e){var i=e.formName,r=e.multiblockName,o=e.id,n=t[i];n.multiblocks[r].ids.push(o),yi(n)},deleteMultiblockId:function(t,e){var i=e.formName,r=e.multiblockName,o=e.id,n=t[i],s=n.multiblocks[r].ids,a=s.findIndex(function(t){return t===o});s.splice(a,1),yi(n)}},actions:{restoreData:function(t,e){var i,r,o,n,s,a=t.state[e.formName],u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={};for(var r in t){var o=e?e(t[r]):t[r];AWES.utils.object.set(i,r,o)}return i}(a.fields),l=Object.keys(a.multiblocks);if(l.length){i=u,r=l,o=AWES.utils.object,n=o.get,s=o.set,r.forEach(function(t){var e=n(i,t);s(i,t,e.filter(function(){return!0}))});for(var c=0;c<l.length;c++){var d=l[c],f=Object.keys(AWES.utils.object.get(u,d,[{}])).map(function(t){return Number(t)});Vue.set(a.multiblocks[d],"ids",f)}}return u},sendForm:function(t,e){var i=t.state,r=t.commit,o=t.dispatch,n=e.formName,s=e.url,a=e.method;return new Promise(function(t){var e,u=i[n];r("resetErrors",n),r("setLoading",{formName:n,status:!0}),o("restoreData",{formName:n}).then(function(t){return AWES.ajax(t,s,a)}).then(function(t){if(e=t,t.success){var i=t.data.data||{};Vue.set(u,"initialState",i);var o={};for(var s in u.fields)o[s]=AWES.utils.object.get(i,s);Vue.set(u,"fields",o),Vue.set(u,"isEdited",!1)}else t.data&&r("setFormErrors",{formName:n,errors:t.data})}).finally(function(){r("setLoading",{formName:n,status:!1}),t(e)})})}},namespaced:!0},ki={name:"form-builder",version:"1.3.18",modules:{"vue-shortkey":{src:"https://unpkg.com/vue-shortkey/dist/index.js",deps:["vue"],cb:function(){Vue.use(VueShortkey)}},"v-tooltip":{src:"https://unpkg.com/v-tooltip/dist/v-tooltip.min.js",deps:["vue"],cb:function(){VTooltip.default.options.popover=Object.assign(VTooltip.default.options.popover,{defaultPlacement:"right",defaultAutoHide:!1,defaultTrigger:"manual",defaultPopperOptions:{modifiers:{flip:{behavior:["right","top"]}}}})}},"vue-the-mask":{src:"https://unpkg.com/vue-the-mask@0.11.1/dist/vue-the-mask.js",deps:["vue"]}},install:function(t){Vue.use(_i),t._store.registerModule("forms",Ei),t.lang=gi}};window&&"AWES"in window?AWES.use(ki):(window.__awes_plugins_stack__=window.__awes_plugins_stack__||[],window.__awes_plugins_stack__.push(ki))}();
