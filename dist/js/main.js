/**
 * Bundle of AWES form-builder
 * Generated: 2019-06-25 00:06:43
 * Version: 1.5.4
 */

!function(){"use strict";let e=0;const t=[{type:"beforeunload",handler:"windowUnloadHandler"}];var r=function(e,t,r,s,i,a,n,o,u,l){"boolean"!=typeof n&&(u=o,o=n,n=!1);var d,c="function"==typeof r?r.options:r;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),s&&(c._scopeId=s),a?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=d):t&&(d=n?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),d)if(c.functional){var f=c.render;c.render=function(e,t){return d.call(t),f(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,d):[d]}return r};var s=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"form-builder",class:{modal_form:e.modal},attrs:{action:e.replacedUrl,method:e.method},on:{submit:function(t){return t.preventDefault(),e.send(t)}}},[e._t("default",null,null,e.fields),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.autoSubmit,expression:"! autoSubmit"}],staticClass:"line-btns"},[r("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],staticClass:"form-builder__send btn has-wave",class:{"loading-inline":e.isLoading},attrs:{disabled:!e.isEdited||e.isLoading,"data-loading":e.$lang.FORMS_LOADING,type:"submit","data-awes":"modal_button_ok"},on:{shortkey:e.send}},[e._v(" "+e._s(e.sendText||e.$lang.FORMS_SEND)+" "),r("span",{staticClass:"wave"})]),e.modal||e.$listeners.cancel?r("button",e._g({directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],staticClass:"form-builder__cancel btn btn_transparent has-wave",attrs:{type:"button"}},{shortkey:e.close,click:e.modal?e.close:e.$listeners.cancel}),[e._v(" "+e._s(e.cancelText||e.$lang.FORMS_CANCEL)+" "),r("span",{staticClass:"wave"})]):e._e(),e._t("buttons-after")],2)],2)},staticRenderFns:[]},void 0,{name:"form-builder",props:{name:{type:String,default:()=>`form-builder-${e++}`},url:{type:String,required:!0},method:{type:String,default:"post",validator:e=>void 0===e||["get","put","post","delete","patch"].includes(e.toLowerCase())},default:Object,storeData:String,sendText:String,cancelText:String,loadingText:String,disabledDialog:{type:Boolean,default:!1},autoSubmit:{type:Boolean,default:!1}},inject:{modal:{from:"modal",default:!1}},provide(){return{formId:this.name,isModal:!1!==this.modal}},computed:{form(){return this.$store.state.forms[this.name]},isLoading(){return this.form&&this.form.isLoading},isEdited(){return this.form&&this.form.isEdited},fields(){return this.$store.getters["forms/fields"](this.name)},replacedUrl(){let e=this.url;if(this.form){let t=e.match(/(?!{)([\w.\[\]]+)(?=})/g);t&&t.length&&t.forEach(t=>{e=e.replace("{"+t+"}",AWES.utils.object.get(this.form.initialState,t,""))})}return e.replace(/([^:]\/)\/+/g,"$1")}},methods:{send(){!this.isLoading&&this.isEdited&&(AWES.emit(`form-builder::${this.name}:before-send`),this.$listeners.send?this.$store.dispatch("forms/restoreData",{formName:this.name}).then(e=>{this.$emit("send",e)}):this.$store.dispatch("forms/sendForm",{formName:this.name,url:this.replacedUrl,method:this.method}).then(e=>{this.$emit(e.success?"sended":"error",e.data),this.storeData&&e.success&&this.$store.$set(this.storeData,this.$get(e.data,"data",{})),this.modal&&e.success&&this.close()}))},addUnloadHandlers(){t.forEach(e=>{window.addEventListener(e.type,this[e.handler],!1)})},removeUnloadHandlers(){t.forEach(e=>{window.removeEventListener(e.type,this[e.handler])})},checkCloseAllowed(){if(this.disabledDialog)return!0;if(this.isEdited){return confirm(this.$lang.FORMS_CONFIRM)}return!0},windowUnloadHandler(e){return!(!this.disabledDialog&&this.isEdited)||(e.returnValue=this.$lang.FORMS_CONFIRM,this.$lang.FORMS_CONFIRM)},close(){this.checkCloseAllowed()&&(this.removeUnloadHandlers(),AWES.off(`modal::${this.modal.name}:before-close`,this.preventModalClose),this.modal.close())},preventModalClose(e){this.checkCloseAllowed()||e.detail.preventClose()}},created(){let e=this.storeData?this.$store.state[this.storeData]:this.default||{};this.$store.commit("forms/createForm",{formName:this.name,fields:e}),this.modal&&this.$watch("isEdited",e=>{AWES[e?"on":"off"](`modal::${this.modal.name}:before-close`,this.preventModalClose)})},mounted(){this.addUnloadHandlers(),this.autoSubmit&&this.$watch("fields",this.send,{deep:!0})},beforeDestroy(){this.removeUnloadHandlers()},destroyed(){AWES.off(`modal::${this.modal.name}:before-close`,this.preventModalClose),this.$store.commit("forms/deleteForm",this.name)}},void 0,!1,void 0,void 0,void 0);var i=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-popover",{staticClass:"display-block",attrs:{placement:e.placement,open:e.open,"popover-class":["theme-error",{tooltip_modal:e.isModal}]}},[e._t("default"),e.open?r("span",{staticClass:"tooltip__text",attrs:{slot:"popover"},on:{click:function(t){return e.$emit("clickTooltip")}},slot:"popover"},[r("span",{staticClass:"errors__list"},[e._v(" "+e._s(e.errorText)+" ")])]):e._e()],2)},staticRenderFns:[]},void 0,{name:"error-wrap",inject:{isModal:{from:"isModal",default:!1}},props:{open:{type:Boolean,default:!1},placement:{type:String,default:"top"},error:{type:[String,Array]}},computed:{errorText(){return Array.isArray(this.error)?this.error.join(", "):this.error}}},void 0,!1,void 0,void 0,void 0);function a(e){return e&&e.split(/(?:\]?\.|\[(?:\'|\")?|(?:\'|\")?\])/g).filter(e=>""!==e).map(e=>e.match(/^\d+$/)?"["+e+"]":e.match(/ /)?"['"+e+"']":"."+e).join("").replace(/^\./,"")}var n={props:{name:String,id:Number,disabled:{type:Boolean,default:!1}},inject:{formId:{from:"formId",default:!1},isModal:{from:"isModal",default:!1},multiblock:{from:"multiblock",default:!1}},computed:{realName(){return this.multiblock?`${this.multiblock}[${this.id}].${a(this.name)}`:a(this.name)},formLoading(){return this.$store.getters["forms/isLoading"](this.formId)},isDisabled(){return this.formLoading||this.disabled||this.isMultiblockDisabled},isMultiblockDisabled(){return!!this.multiblock&&this.$store.getters["forms/isMultiblockDisabled"](this.formId,this.multiblock)}}};function o(e,t,r){function s(e){if(!r||0===Object.keys(r).length)return e;for(let t in r)e[t]=r[t];return e}if(document.createEvent){const r=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(s(r))}else{const r=document.createEventObject();t.fireEvent("on"+e,s(r))}}var u={mixins:[n,{props:{enterSkip:{type:Boolean,default:!1},focus:{type:Boolean,default:!1}},data(){return{inFocus:this.focus}},computed:{isFocusable(){return!this.enterSkip&&!this.disabled&&this.formId}},methods:{focusNext(e){try{const t=e.target.closest("form"),r=t.querySelectorAll(".is-focusable"),s=Array.from(r).findIndex(t=>t===e.target)+1;if(s<r.length)r[s].focus();else{e.target.blur();const r=t.querySelector('[type="submit"]');this.$nextTick(()=>{r.click(),this.initWawesEffect(r)})}}catch(e){console.warn("Error while setting focus"),console.error(e)}},setFocus(e){try{let t=!1!==e?"focus":"blur";this.$refs.element[t]()}catch(e){console.warn("Error while setting focus"),console.error(e)}},initWawesEffect(e){let t={top:0,left:0};"function"==typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect()),o("mousedown",e,{pageY:t.top+window.pageYOffset-document.documentElement.clientTop+e.clientHeight/2,pageX:t.left+window.pageXOffset-document.documentElement.clientLeft+e.clientWidth/2}),setTimeout(o,250,"mouseup",e)}},mounted(){this.setFocus(this.focus)}}],props:{label:String},data:()=>({showTooltip:!1,hasError:!1}),computed:{formValue:{get(){return this.$store.getters["forms/fieldValue"](this.formId,this.realName)},set(e){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:e})}},shake(){return!this.formLoading&&this.showTooltip},error(){return this.$store.getters["forms/fieldError"](this.formId,this.realName)},firstErrorField(){return this.$store.getters["forms/firstErrorField"](this.formId)}},watch:{error:{handler(e){e?(this.showTooltip=!0,this.hasError=!0,this.checkFocus()):(this.showTooltip=!1,this.hasError=!1,this.resetInputWatcher())},immediate:!0}},methods:{initField(){this.formId&&(void 0===this.formValue?this.createStoreInstance():this.fieldValue=this.formValue),this.$root.$on("forms:reset",this.resetFormValue)},createStoreInstance(){this.$store.commit("forms/createField",{formName:this.formId,fieldName:this.realName,value:this.value})},clickTooltip(){this.showTooltip=!1,"function"==typeof this.setFocus&&this.setFocus()},resetError(){this.showTooltip=!1,this.$store.commit("forms/resetError",{formName:this.formId,fieldName:this.realName}),this.resetInputWatcher()},resetInputWatcher(){this.$refs.element&&this.$refs.element.removeEventListener("input",this.resetError)},resetFormValue(e){this.formId===e&&(this.formValue=AWES.utils.object.get(this.$options,"props.value.default"))},checkFocus(){"function"==typeof this.setFocus&&this.firstErrorField===this.realName&&(setTimeout(this.setFocus,0),this.$store.commit("resetFirstErrorField",this.formId))},destroyField(){this.$store.commit("forms/deleteField",{formName:this.formId,fieldName:this.realName}),this.resetInputWatcher(),this.$root.$off("forms:reset",this.resetFormValue)}},created(){this.initField()},destroyed(){this.destroyField()}},l={mixins:[u],props:{value:{type:String,default:""},debounce:{type:[String,Number],default:300}},computed:{isActive(){return!!(this.inFocus||this.value||this.formValue)}},methods:{formValueHandler(e){this.error?(this.formValue=e.target.value,this.resetError()):(clearTimeout(this.__debounce),this.__debounce=setTimeout(()=>{this.formValue=e.target.value},Number(this.debounce)))},vModelHandler(e){this.$emit("input",e.target.value)},save(){clearTimeout(this.__debounce),this.$refs.element&&(this.formValue=this.$refs.element.value)}},mounted(){this.formId&&AWES.on(`form-builder::${this.formId}:before-send`,this.save)},beforeDestroy(){this.formId&&AWES.off(`form-builder::${this.formId}:before-send`,this.save)}};let d=0;var c=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["fb-input","fb-element",{"fb-input_disabled":e.isDisabled,"fb-input_active":e.isActive||e.autoFilled,"fb-input_error":e.hasError,"animated shake":e.shake},e.$attrs.type?"fb-input_type-"+e.$attrs.type:""]},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("label",{staticClass:"fb-input__label fb-input__label_field",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),e.mask?r("input",e._g(e._b({directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"}],ref:"element",class:["fb-input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{"fb-input__field_password":"password"===e.$attrs.type},{"has-label":e.label}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,type:e.inputType,disabled:e.isDisabled},domProps:{value:e.formId?e.formValue:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.save(),e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))},animationstart:e.autoFillHack}},"input",e.$attrs,!1),e.mergedListeners)):r("input",e._g(e._b({ref:"element",class:["fb-input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{"fb-input__field_password":"password"===e.$attrs.type},{"has-label":e.label}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,type:e.inputType,disabled:e.isDisabled},domProps:{value:e.formId?e.formValue:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.save(),e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))},animationstart:e.autoFillHack}},"input",e.$attrs,!1),e.mergedListeners)),"password"===e.$attrs.type?r("button",{staticClass:"fb-input__eye",attrs:{type:"button",tabindex:"-1","aria-label":e.$lang.SHOW_PASSWORD},on:{click:function(t){return t.preventDefault(),e.togglePassword(t)}}},[r("i",{class:["icon","password"===e.inputType?"icon-eye":"icon-eye2"]})]):e._e()])],1)},staticRenderFns:[]},void 0,{name:"fb-input",inheritAttrs:!1,mixins:[l],props:{label:{type:String,default:""},mask:String},data(){return{inputType:this.$attrs.type||"text",autoFilled:!1}},computed:{inputId:()=>"input-"+d++,mergedListeners(){return Object.assign({},this.$listeners,{input:this.formId?this.formValueHandler:this.vModelHandler})}},methods:{togglePassword(){this.setFocus(),"password"===this.inputType?this.inputType="text":this.inputType="password"},autoFillHack(e){switch(e.animationName){case"autoFillStart":this.autoFilled=!0;break;case"autoFillEnd":this.autoFilled=!1}}}},void 0,!1,void 0,void 0,void 0);var f=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fb-multiblock fb-element",class:[{"fb-multiblock_disabled":this.isDisabled}]},[e._l(e.blocks,function(t){return r("div",{key:t,class:["fb-multiblock__block",{"fb-multiblock_has-close":e.hasClose}]},[e._t("default",null,{id:t}),e.hasClose?r("button",{staticClass:"fb-multiblock__clear",attrs:{"aria-label":"delete"},on:{click:function(r){return r.preventDefault(),e.removeField(t)}}},[r("i",{staticClass:"icon icon-cross"})]):e._e()],2)}),r("button",{staticClass:"fb-multiblock__add",on:{click:function(t){return t.preventDefault(),e.addField(t)}}},[e._v(" "+e._s(e.label||e.$lang.FORMS_MULTIBLOCK_ADD)+" ")])],2)},staticRenderFns:[]},void 0,{name:"fb-multi-block",mixins:[n],props:{label:String},provide(){return{multiblock:this.realName,nextIndex:0}},computed:{blocks(){return this.$store.getters["forms/multiblockIds"](this.formId,this.name)},hasClose(){return this.blocks.length>1},errors(){return this.$store.getters["forms/errorsOrFalse"](this.formId)},fields(){return this.$options}},watch:{disabled(e){this.$store.commit("forms/toggleMultiblockState",{formName:this.formId,multiblockName:this.realName,status:e})}},methods:{addField(){this.isDisabled||(this.$store.commit("forms/addMultiblockId",{formName:this.formId,multiblockName:this.name,id:this.nextIndex++}),this.updateTooltips())},removeField(e){this.isDisabled||(this.$store.commit("forms/deleteMultiblockId",{formName:this.formId,multiblockName:this.name,id:e}),this.updateTooltips())},updateTooltips(){this.errors&&this.$nextTick(()=>{o("scroll",window)})},initMultiblock(){this.$store.commit("forms/createMutiblock",{formName:this.formId,multiblockName:this.realName,disabled:this.disabled}),this.nextIndex=Math.max.apply(null,this.blocks)+1},destroyMultiblock(){this.$store.commit("forms/deleteMultiblock",{formName:this.formId,multiblockName:this.realName})}},created(){this.initMultiblock()},destroyed(){this.destroyMultiblock()}},void 0,!1,void 0,void 0,void 0),h={mixins:[u],props:{value:{type:[Boolean,Number,Array],default:0},defaultValue:String,label:{type:String,required:!0}},data:()=>({isNumeric:!0}),computed:{isActive(){return!!(this.formId?this.formValue:this.vModelChecked)},vModelArray(){return!this.formId&&Array.isArray(this.value)},vModelChecked(){return this.vModelArray?this.value.includes(this.computedValue):this.value},computedValue(){return this.defaultValue||this.label.replace(/ /g,"_").toLowerCase()}},created(){this.formId&&"boolean"==typeof this.formValue&&(this.isNumeric=!1)}};var m=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["fb-checkbox","fb-element",{"fb-checkbox_error":e.hasError},{"fb-checkbox_active":e.isActive},{"fb-checkbox_disabled":e.isDisabled}]},[r("label",{staticClass:"fb-checkbox__label",attrs:{"data-awes":e.$options.name+"."+e.name}},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("input",e._g(e._b({ref:"element",class:{"is-focusable":e.isFocusable,"in-focus":e.inFocus},attrs:{type:"checkbox",disabled:e.isDisabled},domProps:{value:e.computedValue,checked:e.formId?e.formValue:e.vModelChecked},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))}}},"input",e.$attrs,!1),{change:e.formId?e.formValueHandler:e.vModelHandler})),r("span",{staticClass:"fb-checkbox__text"},[r("i",{staticClass:"icon icon-checkbox"}),r("span",[e._v(e._s(e.label))])])])],1)])},staticRenderFns:[]},void 0,{name:"fb-checkbox",inheritAttrs:!1,mixins:[h],methods:{formValueHandler(e){let t=e.target.checked;this.formValue=this.isNumeric?Number(t):t,this.error&&this.resetError()},vModelHandler(e){let t;this.vModelArray?(t=this.value.slice(),e.target.checked&&!this.vModelChecked?t.push(this.computedValue):!e.target.checked&&this.vModelChecked&&t.splice(t.findIndex(e=>e===this.computedValue),1)):t=e.target.checked,this.$emit("input",t)}}},void 0,!1,void 0,void 0,void 0);let p=20;var v=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fb-select fb-element",class:[{"fb-select_active":e.isActive},{"fb-select_opened":e.isOpened},{"fb-select_disabled":e.disabled}]},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("span",{staticClass:"fb-select__label"},[e._v(e._s(e.label||e.$lang.FORMS_SELECT_LABEL))]),r("multiselect",e._g({ref:"select",staticClass:"fb-select__field",attrs:{taggable:e.taggable,"show-labels":!1,multiple:e.multiple,"hide-selected":e.multiple,placeholder:e.placeholderText||e.defaultPlaceholder,"tag-placeholder":e.$lang.FORMS_SELECT_ADD_TAG,"internal-search":!e.isAjax,loading:e.isLoading,value:e.formId?e.convertValue(e.formValue):e.value,options:e.usedOptions,label:e.optionsName,"track-by":e.optionsValue,disabled:e.isDisabled},on:{open:function(t){e.isOpened=!0},close:function(t){e.isOpened=!1},tag:e.addOption}},{input:e.formId?e.formValueHandler:e.vModelHandler}),[r("template",{slot:"noOptions"},[e._v(e._s(e.$lang.FORMS_SELECT_EMPTY))])],2)],1)],1)},staticRenderFns:[]},void 0,{name:"fb-select",mixins:[u],components:{Multiselect:e=>{AWES.utils.loadModules({"vue-multiselect":{src:["https://unpkg.com/vue-multiselect@2.1.3/dist/vue-multiselect.min.js","https://unpkg.com/vue-multiselect@2.1.3/dist/vue-multiselect.min.css"],deps:["vue"],cb(){e(window.VueMultiselect.default)}}})}},props:{value:{},selectOptions:{type:Array,default:()=>[]},url:String,optionsName:{type:String,default:"name"},optionsValue:{type:String,default:"value"},multiple:{type:Boolean,default:!0},taggable:{type:Boolean,default:!1},debounce:{type:[String,Number],default:1e3},autoFetch:{type:[String,Boolean],default:!1},placeholderText:String},data:()=>({isOpened:!1,isLoading:!1,ajaxOptions:[],addedOptions:[]}),computed:{computedValue(){return this.formId?this.formValue:this.value},hasValue(){return!!(this.multiple?this.computedValue&&this.computedValue.length:this.computedValue)},isActive(){return this.isOpened||this.hasValue},isAjax(){return void 0!==this.url},defaultPlaceholder(){return this.$lang[this.isAjax?"FORMS_SELECT_AJAX_PLACEHOLDER":"FORMS_SELECT_PLACEHOLDER"]},allOptions(){return Array.prototype.concat(this.addedOptions,this.selectOptions,this.ajaxOptions).map(e=>{if(["string","number"].includes(typeof e)){let t={};return t[this.optionsName]=t[this.optionsValue]=e,t}return e})},usedOptions(){return this.allOptions.filter((e,t,r)=>{if(!e)return!1;return r.findIndex(t=>t[this.optionsName]===e[this.optionsName]&&t[this.optionsValue]===e[this.optionsValue])===t})}},methods:{formValueHandler(e){e&&(this.formValue=Array.isArray(e)?e.map(e=>e[this.optionsValue]):e[this.optionsValue],this.error&&this.resetError())},vModelHandler(e){e&&this.$emit("input",e)},convertValue(e){return this.multiple?Array.isArray(e)?this.usedOptions.filter(t=>e.includes(t[this.optionsValue])):this.usedOptions.filter(t=>e===t[this.optionsValue]):this.usedOptions.find(t=>(Array.isArray(e)?e[0]:e)===t[this.optionsValue])},resetFormValue(e){this.formId===e&&(this.formValue=this.multiple?[]:void 0)},setFocus(e){try{let t=!1!==e?"focus":"blur";this.$refs.select.$el[t]()}catch(t){--p&&setTimeout(this.setFocus,1e3,e)}},addOption(e){let t,r={};r[this.optionsName]=r[this.optionsValue]=e,this.addedOptions.push(r),t=this.multiple?[r].concat(this.$refs.select.value):r,this.formId?this.formValueHandler(t):this.vModelHandler(t)},wrapTabEvents(){try{this.$refs.select.$el.querySelector(".multiselect__input").classList.add("is-focusable")}catch(e){--p&&setTimeout(this.wrapTabEvents,500)}},bindSearch(){try{if(this.isAjax&&(this.$refs.select.$on("search-change",this.ajaxSearch),this.$refs.select.$once("hook:destroyed",()=>{this.$refs.select.$off("search-change",this.ajaxSearch)}),"false"!==this.autoFetch.toString())){let e="string"==typeof this.autoFetch?this.autoFetch:"";this.ajaxSearch(e,!0)}}catch(e){p&&setTimeout(this.bindSearch,500)}},ajaxSearch(e,t){(e||t)&&(clearTimeout(this.__search),this.isLoading=!0,this.__search=setTimeout(()=>{AWES.ajax({},this.url.replace("%s",e),"get").then(e=>{let t=[];!0===e.success&&(Array.isArray(e.data)?t=e.data:e.data&&Array.isArray(e.data.data)&&(t=e.data.data)),this.ajaxOptions=t,this.isLoading=!1})},Number(this.debounce)))}},created(){if(this.formId&&this.formValue){let e=Array.isArray(this.formValue)?this.formValue:[this.formValue],t=[],r=[];e.forEach((e,s)=>{if("object"==typeof e)r.push(Object.assign({},e)),t.push(e[this.optionsValue]);else{if(t.push(e),-1===this.usedOptions.findIndex(t=>t[this.optionsValue]===e)){let t={};t[this.optionsName]=t[this.optionsValue]=e,r.push(t)}}}),this.addedOptions=r,this.formValue=t}},mounted(){this.$nextTick(this.wrapTabEvents),this.$nextTick(this.bindSearch)}},void 0,!1,void 0,void 0,void 0);"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function g(e,t){return e(t={exports:{}},t.exports),t.exports}var b=g(function(e,t){!function(e,t){var r,s,i="function"==typeof Map?new Map:(r=[],s=[],{has:function(e){return r.indexOf(e)>-1},get:function(e){return s[r.indexOf(e)]},set:function(e,t){-1===r.indexOf(e)&&(r.push(e),s.push(t))},delete:function(e){var t=r.indexOf(e);t>-1&&(r.splice(t,1),s.splice(t,1))}}),a=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function n(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!i.has(e)){var t=null,r=null,s=null,n=function(){e.clientWidth!==r&&c()},o=function(t){window.removeEventListener("resize",n,!1),e.removeEventListener("input",c,!1),e.removeEventListener("keyup",c,!1),e.removeEventListener("autosize:destroy",o,!1),e.removeEventListener("autosize:update",c,!1),Object.keys(t).forEach(function(r){e.style[r]=t[r]}),i.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",o,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",c,!1),window.addEventListener("resize",n,!1),e.addEventListener("input",c,!1),e.addEventListener("autosize:update",c,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",i.set(e,{destroy:o,update:c}),"vertical"===(u=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===u.resize&&(e.style.resize="horizontal"),t="content-box"===u.boxSizing?-(parseFloat(u.paddingTop)+parseFloat(u.paddingBottom)):parseFloat(u.borderTopWidth)+parseFloat(u.borderBottomWidth),isNaN(t)&&(t=0),c()}var u;function l(t){var r=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=r,e.style.overflowY=t}function d(){if(0!==e.scrollHeight){var s=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),i=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",r=e.clientWidth,s.forEach(function(e){e.node.scrollTop=e.scrollTop}),i&&(document.documentElement.scrollTop=i)}}function c(){d();var t=Math.round(parseFloat(e.style.height)),r=window.getComputedStyle(e,null),i="content-box"===r.boxSizing?Math.round(parseFloat(r.height)):e.offsetHeight;if(i<t?"hidden"===r.overflowY&&(l("scroll"),d(),i="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==r.overflowY&&(l("hidden"),d(),i="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),s!==i){s=i;var n=a("autosize:resized");try{e.dispatchEvent(n)}catch(e){}}}}function o(e){var t=i.get(e);t&&t.destroy()}function u(e){var t=i.get(e);t&&t.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(e){return e}).destroy=function(e){return e},l.update=function(e){return e}):((l=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e},l.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],u),e}),t.default=l,e.exports=t.default}(e,t)});let _=0;var y=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fb-textarea fb-element",class:{"fb-textarea_disabled":e.isDisabled,"fb-textarea_active":e.isActive,"fb-textarea_error":e.hasError,"animated shake":e.shake}},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("label",{staticClass:"fb-textarea__label",attrs:{for:e.textareaId}},[e._v(e._s(e.label))]),r("textarea",e._g(e._b({ref:"element",class:["fb-textarea__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{id:e.textareaId,disabled:e.isDisabled},domProps:{value:e.formId?e.formValue:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.save(),e.inFocus=!1}}},"textarea",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler}))])],1)},staticRenderFns:[]},void 0,{name:"fb-textarea",inheritAttrs:!1,mixins:[l],props:{fixsize:{type:Boolean,default:!1}},computed:{textareaId:()=>"textarea-"+_++},methods:{setAutoResize(){this.fixsize||(b(this.$refs.element),this.$watch("value",this.updateAutoResize))},updateAutoResize(){this.$nextTick(()=>{b.update(this.$refs.element)})}},mounted(){this.setAutoResize()}},void 0,!1,void 0,void 0,void 0);var D=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["fb-keycode","fb-element",{"animated shake":e.shake},{"fb-keycode_disabled":e.isDisabled}]},[r("div",{staticClass:"fb-keycode__block"},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("div",{staticClass:"fb-keycode__wrap",attrs:{id:"keywrap"}},e._l(e.length,function(t){return r("div",{key:t,staticClass:"fb-keycode__field-wrap"},[r("input",{ref:"fields",refInFor:!0,class:["fb-keycode__field",{"is-focusable":e.isFocusable,"in-focus":e.inFocus[t-1]}],attrs:{type:"tel",inputmode:"numeric",pattern:"[0-9]*",maxlength:"1",autocomplete:"off",disabled:e.isDisabled},domProps:{value:e.inputValue[t-1]},on:{focus:function(r){e.inFocus[t-1]=!0},blur:function(r){e.inFocus[t-1]=!1},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))},function(r){if(!r.type.indexOf("key")&&e._k(r.keyCode,"backspace",void 0,r.key,void 0))return null;t>1&&e.onBackspace(r,t-1)},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"left",37,r.key,["Left","ArrowLeft"])?null:"button"in r&&0!==r.button?null:void(t>1&&e.onLeft(r,t-1))},function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"right",39,r.key,["Right","ArrowRight"])?null:"button"in r&&2!==r.button?null:void(t<e.length&&e.onRight(r,t-1))}],input:function(r){return e.onInput(r,t-1)},paste:function(t){return t.preventDefault(),e.onPaste(t)}}})])}),0)])],1)])},staticRenderFns:[]},void 0,{name:"fb-code",mixins:[u],props:{length:{type:Number,default:6}},data:()=>({inputValue:[],inFocus:[]}),computed:{value:{get(){return this.inputValue.join("")},set(e){e=e.trim().replace(/\D/g,"").substr(0,this.length),this.inputValue=e.split("")}}},watch:{error(e){e&&e.length?(this.value="",this.$refs.fields.forEach(e=>{e.addEventListener("input",this.resetError,!1)}),this.$nextTick(()=>{this.setFocus()})):this.$refs.fields.forEach(e=>{e.removeEventListener("input",this.resetError)})},value(e){e.length===this.length&&(this.formValue=e)},formValue(e){e!==this.value&&(this.value=e,this.setFocus(e.length))}},methods:{setFocus(e=0){if("boolean"==typeof e&&!0===e)return void this.$refs.fields[0].focus();if("number"!=typeof e)return;e>=this.length&&(e=this.length-1);const t=this.$refs.fields[e];setTimeout(()=>{t.focus(),t.setSelectionRange(0,t.value.length)},10)},onInput(e,t){const r=e.target.value.replace(/\D/g,"");e.target.value=r,this.$set(this.inputValue,t,r),this.isEmpty(t)||t===this.length-1||this.setFocus(t+1)},onBackspace(e,t){this.setFocus(t-1)},onLeft(e,t){this.setFocus(t-1)},onRight(e,t){this.setFocus(t+1)},onPaste(e){this.error&&this.error.length&&this.resetError(),this.value=e.clipboardData.getData("text")},isEmpty(e){return""===this.inputValue[e]||void 0===this.inputValue[e]}},created(){for(let e=0;e<this.length;e++)this.inFocus.push(!(0!==e||!this.focus)),this.inputValue.push("")},beforeDestroy(){this.$refs.fields.forEach(e=>{e.removeEventListener("input",this.resetError)})}},void 0,!1,void 0,void 0,void 0),S={domain:"awescrm.de",maxlength:32,ulrifyOptions:{spaces:"-",toLower:!0,trim:!0,addEToUmlauts:!0,nonPrintable:"",failureOutput:""}};var w=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["fb-slug","fb-element",{"fb-slug_disabled":e.isDisabled,"fb-slug_active":e.isActive,"fb-slug_error":e.hasError,"animated shake":e.shake}]},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("div",{staticClass:"fb-slug__group-wrap"},[r("span",{staticClass:"fb-slug__group-field"},[r("label",{staticClass:"fb-slug__label",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),r("input",e._g(e._b({ref:"element",class:["fb-slug__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,maxlength:e.maxlength,type:"text",disabled:e.isDisabled},domProps:{value:e.formId?e.formValue:e.removeDomain(e.value)},on:{input:e.toggleWatcher,focus:function(t){e.inFocus=!0},blur:function(t){e.save(),e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))}}},"input",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler}))]),r("span",{staticClass:"fb-slug__group-label"},[e._v(e._s(e.dotDomain))])])])],1)},staticRenderFns:[]},void 0,{name:"fb-company-slug",extends:c,props:{domain:{type:String,default(){return this._config.domain}},debounce:{type:[String,Number],default:0},input:{type:String,default:""},maxlength:{type:[String,Number],default(){return this._config.maxlength}}},data:()=>({watchInput:!0}),computed:{dotDomain(){return"."+this.domain.replace(/^\./,"")},formValue:{get(){return this.removeDomain(this.$store.getters["forms/fieldValue"](this.formId,this.realName))},set(e){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:this.addDomain(this.noramlizeUrl(e))})}}},watch:{input:{handler(e){!this.$isServer&&this.watchInput&&e&&(this.formId?this._isMounted?this.formValue=e:this.$nextTick(()=>this.formValue=e):this.vModelHandler({target:{value:e}}))},immediate:!0}},methods:{vModelHandler(e){this.$emit("input",this.addDomain(this.noramlizeUrl(e.target.value)))},toggleWatcher(e){""===e.target.value?this.watchInput=!0:this.watchInput&&(this.watchInput=!1)},noramlizeUrl(e){return e&&this.$toUrl(e).substr(0,+this.maxlength)},addDomain(e){return e&&this.removeDomain(e)+this.dotDomain},removeDomain(e){return e&&e.replace(this.dotDomain,"")}},beforeCreate(){this._config=Object.assign({},S,window.AWES._config.companySlug),this.$toUrl=Urlify.create(this._config.ulrifyOptions)}},void 0,!1,void 0,void 0,void 0);var M=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isShow&&!e.reset?r("div",[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:function(t){e.showTooltip=!1}}},[r("vue-recaptcha",e._g({ref:"recaptcha",staticClass:"re-captcha",attrs:{sitekey:e.sitekey,theme:e.theme}},{verify:e.formId?e.onVerify:null,expired:e.formId?e.onExpired:null}))],1)],1):e._e()},staticRenderFns:[]},void 0,{name:"fb-auto-captcha",mixins:[n],components:{vueRecaptcha:e=>AWES.utils.loadModule("vue-recaptcha","https://unpkg.com/vue-recaptcha@latest/dist/vue-recaptcha.min.js",()=>{e(window.VueRecaptcha)})},props:{show:{type:Boolean,default:!1}},data:()=>({sitekey:AWES._config.reCaptchaSiteKey,serverError:!1,showTooltip:!1,reset:!1,theme:AWES._themeDark?"dark":"light"}),computed:{formValue:{get(){return this.$store.getters["forms/fieldValue"](this.formId,this.realName)},set(e){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:e})}},error(){return this.$store.getters["forms/fieldError"](this.formId,this.realName)},realName:()=>"g-recaptcha-response",isShow(){return this.show||this.serverError}},watch:{error(e){(Array.isArray(e)&&e.length||e)&&(this.serverError=!0)},formLoading(e){!e&&this.isShow&&this.$nextTick(()=>{this.$refs.recaptcha.reset()})},theme(){this.isShow&&(this.reset=!0,this.$nextTick(()=>{this.reset=!1}))}},methods:{onVerify(e){this.formValue=e,this.resetError()},onExpired(){this.formValue=null},checkTheme({detail:e}){this.theme=e?"dark":"light"},resetError(){this.showTooltip=!1,this.$store.commit("forms/resetError",{formName:this.formId,fieldName:this.realName})},manageCaptchaScript(e){switch(e){case"add":if(!document.getElementById("g-captcha-script")){const e=document.createElement("script");e.setAttribute("id","g-captcha-script"),e.setAttribute("src","https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit"),document.head.appendChild(e)}break;case"remove":document.getElementById("g-captcha-script").remove()}}},created(){this.$isServer||(this.manageCaptchaScript("add"),AWES.on("theme.change",this.checkTheme))},beforeDestroy(){this.manageCaptchaScript("remove"),AWES.off("theme.change",this.checkTheme)}},void 0,!1,void 0,void 0,void 0);var k=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.items&&e.items.length?r("div",{staticClass:"fc-radio fb-element",class:{"animated shake":e.shake}},[e.label?r("div",{staticClass:"fc-radio__label"},[e._v(e._s(e.label))]):e._e(),r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("div",{staticClass:"fc-radio__wrap"},e._l(e.items,function(t,s){return r("label",{key:s,class:["fc-radio__box",{"is-checked":e.checkActive(t),"fc-radio_disabled":e.isItemDisabled(t)}]},[r("input",e._g(e._b({ref:"fields",refInFor:!0,class:["fc-radio__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{type:"radio","data-awes":e.$options.name+"."+e.name,disabled:e.isItemDisabled(t)},domProps:{checked:e.checkActive(t),value:t.value?t.value:t.toString()},on:{focus:function(t){return e.$set(e.inFocus,s,!0)},blur:function(t){return e.$set(e.inFocus,s,!1)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))}}},"input",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler})),e._t("default",[r("span",{staticClass:"fc-radio__text"},[e._v(e._s(t.name?t.name:t.toString()))])],{item:t,checked:e.checkActive(t),focused:e.inFocus[s]})],2)}),0)])],1):e._e()},staticRenderFns:[]},void 0,{name:"fb-radio-group",mixins:[u],props:{items:Array,value:String,disabled:{type:[String,Boolean],default:!1}},data:()=>({inFocus:[]}),computed:{disabledItems(){return"boolean"==typeof this.disabled&&this.disabled||""===this.disabled?this.items.map(e=>e.value):"string"==typeof this.disabled?this.disabled.split(",").map(e=>e.trim()):[]}},methods:{isItemDisabled(e){return this.disabledItems.indexOf(e.value)>-1},formValueHandler(e){this.formValue=e.target.value,this.error&&this.resetError()},vModelHandler(e){this.$emit("input",e.target.value)},checkActive(e){return this.getItemValue(e)==(this.formId?this.formValue:this.value)},getItemValue:e=>e.value?e.value:e.toString(),setFocus(e=!0){"number"==typeof e?this.$refs.elements[e].focus():!0===e&&this.$refs.elements[0].focus()}},created(){for(let e=0;e<this.items.length;e++)this.inFocus.push(!(0!==e||!this.focus))}},void 0,!1,void 0,void 0,void 0);let T=0;var E=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["fb-slider","fb-element",{"fb-slider_disabled":e.isDisabled,"fb-slider_error":e.hasError,"animated shake":e.shake}]},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("div",{staticClass:"fb-slider__wrap"},[r("div",{staticClass:"fb-slider__wrap-left"},[r("label",{staticClass:"fb-slider__label",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),r("span",{staticClass:"fb-slider__value"},[e._v(e._s(e.percent)+" %")])]),r("div",{staticClass:"fb-slider__wrap-right"},[r("input",e._b({ref:"element",class:["fb-slider__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],style:"--percent: "+e.percent+"%",attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,type:"range",disabled:e.isDisabled},domProps:{value:(e.formId?e.formValue:e.value)||0},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))}}},"input",e.$attrs,!1))])])])],1)},staticRenderFns:[]},void 0,{name:"fb-slider",inheritAttrs:!1,mixins:[u],props:{min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},value:{type:[Number,String],default:0}},computed:{inputId:()=>"slider-"+T++,percent(){return Math.round(Number(this.formId?this.formValue:this.value)||0/Number(this.max)*100)}},methods:{formValueHandler(e){this.formValue=Number(e.target.value),this.error&&this.resetError()},vModelHandler(e){this.$emit("input",Number(e.target.value))},toggleListener(e){let t=(e?"add":"remove")+"EventListener",r=this.formId?this.formValueHandler:this.vModelHandler,s=window.MSInputMethodContext?"change":"input";this.$refs.element[t](s,r)}},mounted(){this.$nextTick(()=>this.toggleListener(!0))},beforeDestroy(){this.toggleListener(!1)}},void 0,!1,void 0,void 0,void 0);let F=20;var $=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["fb-phone","fb-element",{"fb-phone_disabled":e.isDisabled,"animated shake":e.shake,"fb-phone_active":e.isActive,"fb-phone_error":e.hasError}]},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("span",{staticClass:"fb-phone__label"},[e._v(e._s(e.label))]),r("vue-tel-input",e._g({ref:"tel",attrs:{value:e.formId?e.formValue:e.value,disabled:e.isDisabled},on:{onBlur:function(t){e.save(),e.inFocus=!1},onInput:e.checkFocus}},{input:e.formId?e.formValueHandler:e.vModelHandler}))],1)],1)},staticRenderFns:[]},void 0,{name:"fb-phone",mixins:[u],components:{VueTelInput:e=>{return AWES.utils.loadModule("vue-tel-input",["https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.js","https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.css"],()=>{e(VueTelInput.default)})}},props:{value:{type:String,default:""},debounce:{type:[String,Number],default:300}},data:()=>({nativeTelInput:!1}),computed:{isActive(){return!!(this.inFocus||this.value||this.formValue)}},methods:{formValueHandler(e){this.error?(this.formValue=e,this.resetError()):(clearTimeout(this.__debounce),this.__debounce=setTimeout(()=>{this.formValue=e},Number(this.debounce)))},vModelHandler(e){this.$emit("input",e)},setFocusWatcher(){this.$refs.tel&&(this.nativeTelInput=this.$refs.tel.$refs.input,this.nativeTelInput.addEventListener("focus",()=>{this.inFocus=!0}),this.setFocusableClass(),this.setFocusClass())},setFocusClass(){this.nativeTelInput.classList[this.inFocus?"add":"remove"]("in-focus"),F=20},setFocusableClass(){this.nativeTelInput.classList[this.isFocusable?"add":"remove"]("is-focusable"),F=20},setFocus(e){try{let t=!1!==e?"focus":"blur";this.nativeTelInput[t]()}catch(t){F&&(F--,setTimeout(()=>{this.setFocus(e)},1e3))}},checkFocus(){this.inFocus||this.setFocus()},save(){clearTimeout(this.__debounce),this.formValue=this.nativeTelInput.value}},watch:{inFocus(){try{this.setFocusClass()}catch(e){F&&(F--,setTimeout(this.setFocusClass,1e3))}},isFocusable(){try{this.setFocusableClass()}catch(e){F&&(F--,setTimeout(this.setFocusableClass,1e3))}}},mounted(){this.setFocusWatcher()},updated(){this.nativeTelInput||this.setFocusWatcher()}},void 0,!1,void 0,void 0,void 0);var O=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("uploader",{staticClass:"fb-uploader fb-element",class:{"fb-uploader_disabled":e.isDisabled},attrs:{options:e.uploaderOptions},on:{"file-added":e.checkFile,"file-progress":e.setProgress,"file-success":e.addFileNameToForm,"upload-start":function(t){return e.toggleFormBlock(!0)},complete:function(t){return e.toggleFormBlock(!1)}}},[r("uploader-unsupport"),r("uploader-drop",[r("p",{staticClass:"fb-uploader__message"},[e._v(" "+e._s(e.$lang.FORMS_UPLOAD_DROP)+" "),r("span",{staticClass:"fb-uploader__fakebtn"},[e._v(e._s(e.$lang.FORMS_UPLOAD_ADD))]),r("uploader-btn",{ref:"uploaderBtn",staticClass:"fb-uploader__btn",attrs:{tabindex:"1"}},[r("span",[e._v(e._s(e.$lang.FORMS_UPLOAD_ADD))])])],1),e.format||e.size?r("p",[e.format?r("i",{staticClass:"fb-uploader__formats"},[e._v(" "+e._s(e.$lang.FORMS_UPLOAD_FORMAT)+" "+e._s(e.formatString)+". ")]):e._e(),e.size?r("i",{staticClass:"fb-uploader__size"},[e._v(" "+e._s(e.$lang.FORMS_UPLOAD_SIZE)+" "+e._s(e.size)+"Mb ")]):e._e()]):e._e()]),r("uploader-list",{scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("list",[t.fileList.length?r("div",{staticClass:"fb-uploader__cwrap"},[r("table",{staticClass:"fb-uploader__list"},[r("tbody",[e._l(t.fileList,function(t,s){return[r("tr",{key:t.id},[r("td",{staticClass:"fb-uploader__list-number"},[e._v(e._s(s+1))]),r("td",{staticClass:"fb-uploader__list-name"},[r("span",{staticClass:"fb-uploader__list-ftitle"},[e._v(e._s(e.getName(t.name)))])]),r("td",{staticClass:"fb-uploader__list-type"},[e._v(e._s(e.getExtension(t.name)))]),r("td",{staticClass:"fb-uploader__list-size"},[e._v(e._s(e._f("bytesToMb")(t.size)))]),r("td",{staticClass:"fb-uploader__list-date"},[t.isComplete()?[e._v(" "+e._s(e._f("timestampToDate")(t._lastProgressCallback))+" ")]:e._e()],2),r("td",{staticClass:"fb-uploader__list-delete"},[r("button",{staticClass:"fb-uploader__delete",attrs:{title:e.$lang.FORMS_UPLOAD_DELETE,"aria-label":e.$lang.FORMS_UPLOAD_DELETE},on:{click:function(r){return r.preventDefault(),e.removeFile(t,s)}}},[e._v("×")])])]),t.isComplete()?e._e():r("tr",{key:t.id+"loader",staticClass:"fb-uploader__list-pgwrap"},[r("td",{staticClass:"fb-uploader__list-progress",attrs:{colspan:"6"}},[r("progress",{staticClass:"fb-uploader__progress",attrs:{max:"1"},domProps:{value:e.filesProgress[t.uniqueIdentifier]}})])])]})],2)])]):e._e()],{fileList:t.fileList,removeFile:e.removeFile})]}}],null,!0)})],1)},staticRenderFns:[]},void 0,{name:"fb-uploader",mixins:[u],props:{url:{type:String,required:!0},format:{type:[String,Array]},size:[String,Number],validator:e=>+e==e},data:()=>({filesProgress:{}}),filters:{timestampToDate(e){let t=new Date(e);return`${t.getDate()}.${t.getMonth()+1}.${t.getFullYear()+1}`},bytesToMb(e){let t=e/1024/1024;return(t<1?t.toFixed(3):t.toFixed(1))+"Mb"}},computed:{uploaderOptions(){return{target:this.url,testChunks:!1}},formatArray(){return this.format&&Array.isArray(this.format)?this.format:this.format.split(",").map(e=>e.trim())},formatString(){return this.format&&Array.isArray(this.format)?this.format.concat(", "):this.format},maxSizeBytes(){return 1024*this.size*1024}},methods:{checkFile(e){this.format&&!this._extensionMatch(e)&&(e.ignored=!0,this.showError(this.$lang.FORMS_UPLOADER_EXTENSION_ERROR.replace("%s",e.name))),this.size&&e.size>this.maxSizeBytes&&(e.ignored=!0,this.showError(this.$lang.FORMS_UPLOADER_SIZE_ERROR.replace("%s",e.name)))},showError(e){AWES.notify({status:"error",message:e})},setProgress(e){this.$set(this.filesProgress,e.uniqueIdentifier,e.progress())},getExtension:e=>e.split(".").pop(),getName(e){let t=e.split(".");return t.pop(),t.join(".")},_extensionMatch(e){let t=this.getExtension(e.name);return this.formatArray.includes(t)},toggleFormBlock(e){this.$store.commit("setLoading",{formName:this.formId,status:e}),e||this.$forceUpdate()},addFileNameToForm(e,t,r,s){delete this.filesProgress[t.uniqueIdentifier];try{let e=JSON.parse(r),s=AWES.utils.object.get(e,"meta.path",t.relativePath);Array.isArray(this.formValue)?this.formValue.push(s):this.formValue=[s]}catch(e){console.log(e)}},removeFile(e,t){e.isComplete()&&this.formValue.splice(t,1),e.cancel(),delete this.filesProgress[e.uniqueIdentifier]},setFocus(e){this.__retries=this.__retries||20;try{let t=!1!==e?"focus":"blur";this.$refs.uploaderBtn.$el[t](),this.__retries=20}catch(t){this.__retries-=1,this.__retries&&setTimeout(()=>this.setFocus(e),1e3)}}}},void 0,!1,void 0,void 0,void 0);const x={branding:!1,statusbar:!1,menubar:!1,fontsize_formats:"10px 12px 14px 16px 18px 24px 36px",plugins:"lists",toolbar:["fontselect fontsizeselect bold italic underline numlist bullist"],setup:function(){this.on("ExecCommand",function(e){"FontName"===e.command&&(e.target.getDoc().body.style.fontFamily=e.value)})},init_instance_callback:function(){this.execCommand("FontName",!1,"Arial")}};const I={lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,autoCloseTags:!0,matchTags:!0,mode:"htmlmixed"};let C=0;var N=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fb-editor fb-element",class:[{"fb-editor_disabled":e.isDisabled}]},[r("div",{staticClass:"fb-editor__modes"},[r("button",{class:["fb-editor__modes-button",{"is-active":"visual"===e.mode}],attrs:{type:"button"},on:{click:function(t){e.mode="visual"}}},[e._v(" "+e._s(e.$lang.FORMS_EDITOR_VISUAL)+" ")]),r("button",{class:["fb-editor__modes-button",{"is-active":"code"===e.mode}],attrs:{type:"button"},on:{click:function(t){e.mode="code"}}},[e._v(" "+e._s(e.$lang.FORMS_EDITOR_CODE)+" ")])]),r("div",{staticClass:"fb-editor__tabs"},[r("div",{directives:[{name:"show",rawName:"v-show",value:"visual"===e.mode,expression:"mode === 'visual'"}],key:"visual",staticClass:"fb-editor__tab"},[r("textarea",{staticClass:"fb-editor__tiny",attrs:{id:e.editorId,disabled:e.isDisabled}},[e._v(e._s(e.formValue))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:"code"===e.mode,expression:"mode === 'code'"}],key:"code",staticClass:"fb-editor__tab"},[r("textarea",{ref:"code",staticClass:"fb-editor__codemirror",attrs:{id:e.codeEditorId,disabled:e.isDisabled}},[e._v(e._s(e.formValue))])])])])},staticRenderFns:[]},void 0,{name:"fb-editor",mixins:[u],props:{options:{type:Object,default:()=>({})}},data:()=>({editorId:"fb-editor-"+C,codeEditorId:"fb-code-editor-"+C++,mode:"visual",codeEditorInited:!1}),watch:{mode(e){"visual"===e?(this._saveCode(),tinymce.get(this.editorId).setContent(this.value)):(this._saveVisual(),this.codeEditorInited?this._setCodeValue():AWES.utils.loadModules({codemirror:{src:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.css"]},"codemirror-plugins":{deps:["codemirror"],src:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/xml/xml.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/fold/xml-fold.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/matchbrackets.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/closebrackets.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/matchtags.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/closetag.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/htmlmixed/htmlmixed.min.js"]}}).then(this.initCodeEditor).then(this._setCodeValue))}},methods:{initEditor(){x.selector="#"+this.editorId;let e=AWES.utils.object.get(AWES._config,"formBuilder.fbEditor",{});this.focus&&(e.auto_focus=this.editorId),Object.assign(e,this.options,x),tinymce.init(e);const t=tinymce.get(this.editorId);t.on("Change",this._debounceSave),void 0!==typeof AWES._theme&&t.once("Init",()=>{this._switchThemeAttribute({detail:AWES._theme})})},initCodeEditor(){return this.codeEditorInited=!0,this._codeEditor=CodeMirror.fromTextArea(this.$refs.code,I),this._codeEditor.on("update",this._debounceSave),this._codeEditor},save(){"visual"===this.mode?this._saveVisual():this._saveCode()},_debounceSave(){clearTimeout(this._debounce),this._debounce=setTimeout(this.save,1e3)},_saveVisual(){this.formValue=tinymce.get(this.editorId).save()},_saveCode(){this._codeEditor&&(this.formValue=this._codeEditor.doc.getValue())},_setCodeValue(){this._codeEditor.doc.setValue(this.formValue),setTimeout(()=>{this._codeEditor.refresh()},1)},_switchThemeAttribute(e){const t=tinymce.get(this.editorId).getDoc();1===e.detail?t.documentElement.setAttribute("data-dark",!0):t.documentElement.removeAttribute("data-dark")},setFocus(e){try{!1!==e&&("visual"===this.mode?tinymce.get(this.editorId).focus():this._codeEditor&&this._codeEditor.focus())}catch(e){console.warn("Error while setting focus"),console.error(e)}}},mounted(){this.formId&&AWES.on(`form-builder::${this.formId}:before-send`,this.save),this.$nextTick(this.initEditor),void 0!==typeof AWES._theme&&AWES.on("theme.change",this._switchThemeAttribute)},beforeDestroy(){this.formId&&AWES.off(`form-builder::${this.formId}:before-send`,this.save),void 0!==typeof AWES._theme&&AWES.off("theme.change",this._switchThemeAttribute)}},void 0,!1,void 0,void 0,void 0);var A=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["fb-switcher","fb-element",{"fb-switcher_error":e.hasError,"fb-switcher_active":e.isActive,"fb-switcher_disabled":e.isDisabled}],on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.toggleValue(e.rangeValue)}}},[r("fb-error-wrap",{attrs:{open:e.showTooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[r("div",{staticClass:"fb-switcher__field-wrap",attrs:{"data-awes":e.$options.name+"."+e.name}},[r("input",e._g(e._b({ref:"element",staticClass:"fb-switcher__field",class:{"is-focusable":e.isFocusable,"in-focus":e.inFocus},attrs:{type:"range",min:"0",max:"1",step:"1",disabled:e.isDisabled},domProps:{value:e.rangeValue},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusNext(t))},mousedown:function(t){e.oldValue=e.rangeValue},click:function(t){return e.toggleValue(e.oldValue)}}},"input",e.$attrs,!1),{input:e.formId?e.formValueHandler:e.vModelHandler}))]),r("span",{staticClass:"fb-switcher__label",on:{click:function(t){return t.target!==t.currentTarget?null:e.toggleValue(e.rangeValue)}}},[e._v(e._s(e.label))])])],1)},staticRenderFns:[]},void 0,{name:"fb-switcher",inheritAttrs:!1,mixins:[h],data:()=>({oldValue:null}),computed:{rangeValue(){return Number(this.formId?this.formValue:this.vModelChecked)}},methods:{formValueHandler(e){this.oldValue=null;let t=+e.target.value;this.formValue=this.isNumeric?t:Boolean(t),this.error&&this.resetError()},vModelHandler(e){let t;this.oldValue=null,this.vModelArray?(t=this.value.slice(),e.target.value&&!this.vModelChecked?t.push(this.computedValue):!e.target.checked&&this.vModelChecked&&t.splice(t.findIndex(e=>e===this.computedValue),1)):t=Boolean(e.target.value),this.$emit("input",t)},toggleValue(e){if(this.isDisabled||null===e)return;let t={target:{value:e?0:1}};this.formId?this.formValueHandler(t):this.vModelHandler(t)}}},void 0,!1,void 0,void 0,void 0);function V(){var e=new Date;return e.setHours(0,0,0,0),e}function Y(e,t){return(e&&e.toDateString())===(t&&t.toDateString())}function R(e,t,r){var s=(e=new Date(e)).getDate(),i=e.getMonth()+t;return e.setDate(1),e.setMonth(r?(12+i)%12:i),e.setDate(s),e.getDate()<s&&e.setDate(0),e}function H(e,t){return(e=new Date(e)).setFullYear(e.getFullYear()+t),e}function L(e){return function(t){return function(e){return(e=new Date(e)).setHours(0,0,0,0),e}("string"==typeof t?e(t):t)}}function W(e,t,r){return e<t?t:e>r?r:e}function j(e,t){var r=void 0;return function(){clearTimeout(r),r=setTimeout(t,e)}}function P(){}function z(){for(var e=arguments,t=e[0],r=1;r<e.length;++r){var s=e[r]||{};for(var i in s)t[i]=s[i]}return t}var U={days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",clear:"Clear",close:"Close"};function B(e){e=e||{};var t=L((e=z({lang:U,mode:"dp-modal",hilightedDate:V(),format:function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},parse:function(e){var t=new Date(e);return isNaN(t)?V():t},dateClass:function(){},inRange:function(){return!0},appendTo:document.body},e)).parse);return e.lang=z(U,e.lang),e.parse=t,e.inRange=function(e){var t=e.inRange;return function(r,s){return t(r,s)&&e.min<=r&&e.max>=r}}(e),e.min=t(e.min||H(V(),-100)),e.max=t(e.max||H(V(),100)),e.hilightedDate=e.parse(e.hilightedDate),e}var X={left:37,up:38,right:39,down:40,enter:13,esc:27};function Z(e,t,r){return t.addEventListener(e,r,!0),function(){t.removeEventListener(e,r,!0)}}var G=function(){var e=window.CustomEvent;"function"!=typeof e&&((e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}).prototype=window.Event.prototype);return e}();var q={day:{onKeyDown:function(e,t){var r=e.keyCode,s=r===X.left?-1:r===X.right?1:r===X.up?-7:r===X.down?7:0;r===X.esc?t.close():s&&(e.preventDefault(),t.setState({hilightedDate:(i=t.state.hilightedDate,a=s,(i=new Date(i)).setDate(i.getDate()+a),i)}));var i,a},onClick:{"dp-day":function(e,t){t.setState({selectedDate:new Date(parseInt(e.target.getAttribute("data-date")))})},"dp-next":function(e,t){var r=t.state.hilightedDate;t.setState({hilightedDate:R(r,1)})},"dp-prev":function(e,t){var r=t.state.hilightedDate;t.setState({hilightedDate:R(r,-1)})},"dp-today":function(e,t){t.setState({selectedDate:V()})},"dp-clear":function(e,t){t.setState({selectedDate:null})},"dp-close":function(e,t){t.close()},"dp-cal-month":function(e,t){t.setState({view:"month"})},"dp-cal-year":function(e,t){t.setState({view:"year"})}},render:function(e){var t=e.opts,r=t.lang,s=e.state,i=r.days,a=t.dayOffset||0,n=s.selectedDate,o=s.hilightedDate,u=o.getMonth(),l=V().getTime();return'<div class="dp-cal"><header class="dp-cal-header"><button tabindex="-1" type="button" class="dp-prev">Prev</button><button tabindex="-1" type="button" class="dp-cal-month">'+r.months[u]+'</button><button tabindex="-1" type="button" class="dp-cal-year">'+o.getFullYear()+'</button><button tabindex="-1" type="button" class="dp-next">Next</button></header><div class="dp-days">'+i.map(function(e,t){return'<span class="dp-col-header">'+i[(t+a)%i.length]+"</span>"}).join("")+function(e,t,r){var s="",i=new Date(e);i.setDate(1),i.setDate(1-i.getDay()+t),t&&i.getDate()===t+1&&i.setDate(t-6);for(var a=0;a<42;++a)s+=r(i),i.setDate(i.getDate()+1);return s}(o,a,function(r){var s=r.getMonth()!==u,i=!t.inRange(r),a=r.getTime()===l,d="dp-day";return d+=s?" dp-edge-day":"",d+=Y(r,o)?" dp-current":"",d+=Y(r,n)?" dp-selected":"",d+=i?" dp-day-disabled":"",d+=a?" dp-day-today":"",'<button tabindex="-1" type="button" class="'+(d+=" "+t.dateClass(r,e))+'" data-date="'+r.getTime()+'">'+r.getDate()+"</button>"})+'</div><footer class="dp-cal-footer"><button tabindex="-1" type="button" class="dp-today">'+r.today+'</button><button tabindex="-1" type="button" class="dp-clear">'+r.clear+'</button><button tabindex="-1" type="button" class="dp-close">'+r.close+"</button></footer></div>"}},year:{render:function(e){var t=e.state,r=t.hilightedDate.getFullYear(),s=t.selectedDate.getFullYear();return'<div class="dp-years">'+function(e,t){for(var r="",s=e.opts.max.getFullYear();s>=e.opts.min.getFullYear();--s)r+=t(s);return r}(e,function(e){var t="dp-year";return t+=e===r?" dp-current":"",'<button tabindex="-1" type="button" class="'+(t+=e===s?" dp-selected":"")+'" data-year="'+e+'">'+e+"</button>"})+"</div>"},onKeyDown:function(e,t){var r=e.keyCode,s=t.opts,i=r===X.left||r===X.up?1:r===X.right||r===X.down?-1:0;if(r===X.esc)t.setState({view:"day"});else if(i){e.preventDefault();var a=H(t.state.hilightedDate,i);t.setState({hilightedDate:W(a,s.min,s.max)})}},onClick:{"dp-year":function(e,t){t.setState({hilightedDate:(r=t.state.hilightedDate,s=parseInt(e.target.getAttribute("data-year")),(r=new Date(r)).setFullYear(s),r),view:"day"});var r,s}}},month:{onKeyDown:function(e,t){var r=e.keyCode,s=r===X.left?-1:r===X.right?1:r===X.up?-3:r===X.down?3:0;r===X.esc?t.setState({view:"day"}):s&&(e.preventDefault(),t.setState({hilightedDate:R(t.state.hilightedDate,s,!0)}))},onClick:{"dp-month":function(e,t){t.setState({hilightedDate:(r=t.state.hilightedDate,s=parseInt(e.target.getAttribute("data-month")),R(r,s-r.getMonth())),view:"day"});var r,s}},render:function(e){var t=e.opts.lang.months,r=e.state.hilightedDate.getMonth();return'<div class="dp-months">'+t.map(function(e,t){var s="dp-month";return'<button tabindex="-1" type="button" class="'+(s+=r===t?" dp-current":"")+'" data-month="'+t+'">'+e+"</button>"}).join("")+"</div>"}}};function J(e,t,r){var s,i,a=!1,n={el:void 0,opts:r,shouldFocusOnBlur:!0,shouldFocusOnRender:!0,state:{get selectedDate(){return i},set selectedDate(e){e&&!r.inRange(e)||(e?(i=new Date(e),n.state.hilightedDate=i):i=e,n.updateInput(i),t("select"),n.close())},view:"day"},adjustPosition:P,containerHTML:'<div class="dp"></div>',attachToDom:function(){r.appendTo.appendChild(n.el)},updateInput:function(t){var s=new G("change",{bubbles:!0});s.simulated=!0,e.value=t?r.format(t):"",e.dispatchEvent(s)},computeSelectedDate:function(){return r.parse(e.value)},currentView:function(){return q[n.state.view]},open:function(){a||(n.el||(n.el=function(e,t){var r=document.createElement("div");return r.className=e.mode,r.innerHTML=t,r}(r,n.containerHTML),function(e){var t=e.el,r=t.querySelector(".dp");function s(t){t.target.className.split(" ").forEach(function(r){var s=e.currentView().onClick[r];s&&s(t,e)})}t.ontouchstart=P,Z("blur",r,j(150,function(){e.hasFocus()||e.close(!0)})),Z("keydown",t,function(t){t.keyCode===X.enter?s(t):e.currentView().onKeyDown(t,e)}),Z("mousedown",r,function(t){t.target.focus&&t.target.focus(),document.activeElement!==t.target&&(t.preventDefault(),Q(e))}),Z("click",t,s)}(n)),i=W(n.computeSelectedDate(),r.min,r.max),n.state.hilightedDate=i||r.hilightedDate,n.state.view="day",n.attachToDom(),n.render(),t("open"))},isVisible:function(){return!!n.el&&!!n.el.parentNode},hasFocus:function(){var e=document.activeElement;return n.el&&n.el.contains(e)&&e.className.indexOf("dp-focuser")<0},shouldHide:function(){return n.isVisible()},close:function(r){var s=n.el;if(n.isVisible()){if(s){var i=s.parentNode;i&&i.removeChild(s)}a=!0,r&&n.shouldFocusOnBlur&&function(e){e.focus(),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.blur()}(e),setTimeout(function(){a=!1},100),t("close")}},destroy:function(){n.close(),s()},render:function(){if(n.el){var e=n.hasFocus(),t=n.currentView().render(n);t&&(n.el.firstChild.innerHTML=t),n.adjustPosition(),(e||n.shouldFocusOnRender)&&Q(n)}},setState:function(e){for(var r in e)n.state[r]=e[r];t("statechange"),n.render()}};return s=function(e,t){var r=j(5,function(){t.shouldHide()?t.close():t.open()}),s=[Z("blur",e,j(150,function(){t.hasFocus()||t.close(!0)})),Z("mousedown",e,function(){e===document.activeElement&&r()}),Z("focus",e,r),Z("input",e,function(e){var r=t.opts.parse(e.target.value);isNaN(r)||t.setState({hilightedDate:r})})];return function(){s.forEach(function(e){e()})}}(e,n),n}function Q(e){var t=e.el.querySelector(".dp-current");return t&&t.focus()}function K(e,t,r){var s=J(e,t,r);return s.shouldFocusOnBlur=!1,Object.defineProperty(s,"shouldFocusOnRender",{get:function(){return e!==document.activeElement}}),s.adjustPosition=function(){!function(e,t){var r=e.getBoundingClientRect(),s=window;(function(e,t,r){var s=e.el,i=r.pageYOffset,a=i+t.top,n=s.offsetHeight,o=a+t.height+8,u=a-n-8,l=u>0&&o+n>i+r.innerHeight,d=l?u:o;s.classList&&(s.classList.toggle("dp-is-above",l),s.classList.toggle("dp-is-below",!l));s.style.top=d+"px"})(t,r,s),function(e,t,r){var s=e.el,i=r.pageXOffset,a=t.left+i,n=r.innerWidth+i,o=s.offsetWidth,u=n-o,l=a+o>n&&u>0?u:a;s.style.left=l+"px"}(t,r,s),t.el.style.visibility=""}(e,s)},s}function ee(e,t,r){return e=e&&e.tagName?e:document.querySelector(e),"dp-modal"===r.mode?function(e,t,r){var s=J(e,t,r);return e.readonly=!0,s.containerHTML+='<a href="#" class="dp-focuser">.</a>',s}(e,t,r):"dp-below"===r.mode?K(e,t,r):"dp-permanent"===r.mode?function(e,t,r){var s=J(e,t,r);return s.close=P,s.updateInput=P,s.shouldFocusOnRender=r.shouldFocusOnRender,s.computeSelectedDate=function(){return r.hilightedDate},s.attachToDom=function(){e.appendChild(s.el)},s.open(),s}(e,t,r):void 0}function te(){var e={};function t(t,r){(e[t]=e[t]||[]).push(r)}return{on:function(e,r){return r?t(e,r):function(e){for(var r in e)t(r,e[r])}(e),this},emit:function(t,r){(e[t]||[]).forEach(function(e){e(t,r)})},off:function(t,r){return t?e[t]=r?(e[t]||[]).filter(function(e){return e!==r}):[]:e={},this}}}function re(e,t){var r=te(),s=ee(e,function(e){r.emit(e,i)},B(t)),i={get state(){return s.state},on:r.on,off:r.off,setState:s.setState,open:s.open,close:s.close,destroy:s.destroy};return i}var se=re;function ie(e,t){t=t||{};var r,s=te(),i=function(e){"string"==typeof e&&(e=document.querySelector(e));return e.innerHTML='<div class="dr-cals"><div class="dr-cal-start"></div><div class="dr-cal-end"></div></div>',e.querySelector(".dr-cals")}(e),a={start:void 0,end:void 0},n=re(i.querySelector(".dr-cal-start"),z({},t.startOpts,{mode:"dp-permanent",dateClass:f})),o=re(i.querySelector(".dr-cal-end"),z({},t.endOpts,{mode:"dp-permanent",hilightedDate:R(n.state.hilightedDate,1),dateClass:f})),u={statechange:function(e,t){var r=n.state.hilightedDate,s=o.state.hilightedDate;if(1===function(e,t){return ae(t)-ae(e)}(r,s))return;t===n?o.setState({hilightedDate:R(t.state.hilightedDate,1)}):n.setState({hilightedDate:R(t.state.hilightedDate,-1)})},select:function(e,t){var r=t.state.selectedDate;!a.start||a.end?d({start:r,end:void 0}):d({start:r>a.start?a.start:r,end:r>a.start?r:a.start})}},l={state:a,setState:d,on:s.on,off:s.off};function d(e){for(var t in e)a[t]=e[t];s.emit("statechange",l),c()}function c(){n.setState({}),o.setState({})}function f(e){return((a.end||r)&&a.start&&function(e,t,r){return e<r&&e>=t||e<=t&&e>r}(e,a.end||r,a.start)?"dr-in-range ":"")+(Y(e,a.start)||Y(e,a.end)?"dr-selected ":"")}return n.on(u),o.on(u),/iPhone|iPad|iPod/i.test(navigator.userAgent)||i.addEventListener("mouseover",function(e){if(e.target.classList.contains("dp-day")){var t=new Date(parseInt(e.target.dataset.date));!Y(t,r)&&(r=t,c())}}),l}function ae(e){return 12*e.getYear()+e.getMonth()}var ne=function(e){var t=new Date(e.getTime()),r=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*r+t.getTime()%6e4};var oe=function(e){return e instanceof Date},ue=36e5,le=6e4,de=2,ce=/[T ]/,fe=/:/,he=/^(\d{2})$/,me=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],pe=/^(\d{4})/,ve=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],ge=/^-(\d{2})$/,be=/^-?(\d{3})$/,_e=/^-?(\d{2})-?(\d{2})$/,ye=/^-?W(\d{2})$/,De=/^-?W(\d{2})-?(\d{1})$/,Se=/^(\d{2}([.,]\d*)?)$/,we=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,Me=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,ke=/([Z+-].*)$/,Te=/^(Z)$/,Ee=/^([+-])(\d{2})$/,Fe=/^([+-])(\d{2}):?(\d{2})$/;function $e(e,t,r){t=t||0,r=r||0;var s=new Date(0);s.setUTCFullYear(e,0,4);var i=7*t+r+1-(s.getUTCDay()||7);return s.setUTCDate(s.getUTCDate()+i),s}var Oe=function(e,t){if(oe(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var r=(t||{}).additionalDigits;r=null==r?de:Number(r);var s=function(e){var t,r={},s=e.split(ce);if(fe.test(s[0])?(r.date=null,t=s[0]):(r.date=s[0],t=s[1]),t){var i=ke.exec(t);i?(r.time=t.replace(i[1],""),r.timezone=i[1]):r.time=t}return r}(e),i=function(e,t){var r,s=me[t],i=ve[t];if(r=pe.exec(e)||i.exec(e)){var a=r[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(r=he.exec(e)||s.exec(e)){var n=r[1];return{year:100*parseInt(n,10),restDateString:e.slice(n.length)}}return{year:null}}(s.date,r),a=i.year,n=function(e,t){if(null===t)return null;var r,s,i,a;if(0===e.length)return(s=new Date(0)).setUTCFullYear(t),s;if(r=ge.exec(e))return s=new Date(0),i=parseInt(r[1],10)-1,s.setUTCFullYear(t,i),s;if(r=be.exec(e)){s=new Date(0);var n=parseInt(r[1],10);return s.setUTCFullYear(t,0,n),s}if(r=_e.exec(e)){s=new Date(0),i=parseInt(r[1],10)-1;var o=parseInt(r[2],10);return s.setUTCFullYear(t,i,o),s}if(r=ye.exec(e))return a=parseInt(r[1],10)-1,$e(t,a);if(r=De.exec(e)){a=parseInt(r[1],10)-1;var u=parseInt(r[2],10)-1;return $e(t,a,u)}return null}(i.restDateString,a);if(n){var o,u=n.getTime(),l=0;if(s.time&&(l=function(e){var t,r,s;if(t=Se.exec(e))return(r=parseFloat(t[1].replace(",",".")))%24*ue;if(t=we.exec(e))return r=parseInt(t[1],10),s=parseFloat(t[2].replace(",",".")),r%24*ue+s*le;if(t=Me.exec(e)){r=parseInt(t[1],10),s=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return r%24*ue+s*le+1e3*i}return null}(s.time)),s.timezone)m=s.timezone,o=((p=Te.exec(m))?0:(p=Ee.exec(m))?(v=60*parseInt(p[2],10),"+"===p[1]?-v:v):(p=Fe.exec(m))?(v=60*parseInt(p[2],10)+parseInt(p[3],10),"+"===p[1]?-v:v):0)*le;else{var d=u+l,c=new Date(d);o=ne(c);var f=new Date(d);f.setDate(c.getDate()+1);var h=ne(f)-ne(c);h>0&&(o+=h)}return new Date(u+l+o)}var m,p,v;return new Date(e)};var xe=function(e,t){var r=Oe(e),s=Number(t);return r.setDate(r.getDate()+s),r};var Ie=function(e,t){var r=Oe(e).getTime(),s=Number(t);return new Date(r+s)},Ce=36e5;var Ne=function(e,t){var r=Number(t);return Ie(e,r*Ce)};var Ae=function(e,t){var r=t&&Number(t.weekStartsOn)||0,s=Oe(e),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s};var Ve=function(e){return Ae(e,{weekStartsOn:1})};var Ye=function(e){var t=Oe(e),r=t.getFullYear(),s=new Date(0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);var i=Ve(s),a=new Date(0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);var n=Ve(a);return t.getTime()>=i.getTime()?r+1:t.getTime()>=n.getTime()?r:r-1};var Re=function(e){var t=Ye(e),r=new Date(0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ve(r)};var He=function(e){var t=Oe(e);return t.setHours(0,0,0,0),t},Le=6e4,We=864e5;var je=function(e,t){var r=He(e),s=He(t),i=r.getTime()-r.getTimezoneOffset()*Le,a=s.getTime()-s.getTimezoneOffset()*Le;return Math.round((i-a)/We)};var Pe=function(e,t){var r=Oe(e),s=Number(t),i=je(r,Re(r)),a=new Date(0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),(r=Re(a)).setDate(r.getDate()+i),r};var ze=function(e,t){var r=Number(t);return Pe(e,Ye(e)+r)},Ue=6e4;var Be=function(e,t){var r=Number(t);return Ie(e,r*Ue)};var Xe=function(e){var t=Oe(e),r=t.getFullYear(),s=t.getMonth(),i=new Date(0);return i.setFullYear(r,s+1,0),i.setHours(0,0,0,0),i.getDate()};var Ze=function(e,t){var r=Oe(e),s=Number(t),i=r.getMonth()+s,a=new Date(0);a.setFullYear(r.getFullYear(),i,1),a.setHours(0,0,0,0);var n=Xe(a);return r.setMonth(i,Math.min(n,r.getDate())),r};var Ge=function(e,t){var r=Number(t);return Ze(e,3*r)};var qe=function(e,t){var r=Number(t);return Ie(e,1e3*r)};var Je=function(e,t){var r=Number(t);return xe(e,7*r)};var Qe=function(e,t){var r=Number(t);return Ze(e,12*r)};var Ke=function(e,t,r,s){var i=Oe(e).getTime(),a=Oe(t).getTime(),n=Oe(r).getTime(),o=Oe(s).getTime();if(i>a||n>o)throw new Error("The start of the range cannot be after the end of the range");return i<o&&n<a};var et=function(e,t){if(!(t instanceof Array))throw new TypeError(toString.call(t)+" is not an instance of Array");var r,s,i=Oe(e).getTime();return t.forEach(function(e,t){var a=Oe(e),n=Math.abs(i-a.getTime());(void 0===r||n<s)&&(r=t,s=n)}),r};var tt=function(e,t){if(!(t instanceof Array))throw new TypeError(toString.call(t)+" is not an instance of Array");var r,s,i=Oe(e).getTime();return t.forEach(function(e){var t=Oe(e),a=Math.abs(i-t.getTime());(void 0===r||a<s)&&(r=t,s=a)}),r};var rt=function(e,t){var r=Oe(e).getTime(),s=Oe(t).getTime();return r<s?-1:r>s?1:0};var st=function(e,t){var r=Oe(e).getTime(),s=Oe(t).getTime();return r>s?-1:r<s?1:0},it=6e4,at=6048e5;var nt=function(e,t){var r=Ve(e),s=Ve(t),i=r.getTime()-r.getTimezoneOffset()*it,a=s.getTime()-s.getTimezoneOffset()*it;return Math.round((i-a)/at)};var ot=function(e,t){return Ye(e)-Ye(t)};var ut=function(e,t){var r=Oe(e),s=Oe(t);return 12*(r.getFullYear()-s.getFullYear())+(r.getMonth()-s.getMonth())};var lt=function(e){var t=Oe(e);return Math.floor(t.getMonth()/3)+1};var dt=function(e,t){var r=Oe(e),s=Oe(t);return 4*(r.getFullYear()-s.getFullYear())+(lt(r)-lt(s))},ct=6e4,ft=6048e5;var ht=function(e,t,r){var s=Ae(e,r),i=Ae(t,r),a=s.getTime()-s.getTimezoneOffset()*ct,n=i.getTime()-i.getTimezoneOffset()*ct;return Math.round((a-n)/ft)};var mt=function(e,t){var r=Oe(e),s=Oe(t);return r.getFullYear()-s.getFullYear()};var pt=function(e,t){var r=Oe(e),s=Oe(t),i=rt(r,s),a=Math.abs(je(r,s));return r.setDate(r.getDate()-i*a),i*(a-(rt(r,s)===-i))};var vt=function(e,t){var r=Oe(e),s=Oe(t);return r.getTime()-s.getTime()},gt=36e5;var bt=function(e,t){var r=vt(e,t)/gt;return r>0?Math.floor(r):Math.ceil(r)};var _t=function(e,t){var r=Number(t);return ze(e,-r)};var yt=function(e,t){var r=Oe(e),s=Oe(t),i=rt(r,s),a=Math.abs(ot(r,s));return r=_t(r,i*a),i*(a-(rt(r,s)===-i))},Dt=6e4;var St=function(e,t){var r=vt(e,t)/Dt;return r>0?Math.floor(r):Math.ceil(r)};var wt=function(e,t){var r=Oe(e),s=Oe(t),i=rt(r,s),a=Math.abs(ut(r,s));return r.setMonth(r.getMonth()-i*a),i*(a-(rt(r,s)===-i))};var Mt=function(e,t){var r=wt(e,t)/3;return r>0?Math.floor(r):Math.ceil(r)};var kt=function(e,t){var r=vt(e,t)/1e3;return r>0?Math.floor(r):Math.ceil(r)};var Tt=function(e,t){var r=pt(e,t)/7;return r>0?Math.floor(r):Math.ceil(r)};var Et=function(e,t){var r=Oe(e),s=Oe(t),i=rt(r,s),a=Math.abs(mt(r,s));return r.setFullYear(r.getFullYear()-i*a),i*(a-(rt(r,s)===-i))};var Ft=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];var $t=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);var s=Ft.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+s.join("|")+"|.)","g")};var Ot=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Su","Mo","Tu","We","Th","Fr","Sa"],s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["AM","PM"],n=["am","pm"],o=["a.m.","p.m."],u={MMM:function(t){return e[t.getMonth()]},MMMM:function(e){return t[e.getMonth()]},dd:function(e){return r[e.getDay()]},ddd:function(e){return s[e.getDay()]},dddd:function(e){return i[e.getDay()]},A:function(e){return e.getHours()/12>=1?a[1]:a[0]},a:function(e){return e.getHours()/12>=1?n[1]:n[0]},aa:function(e){return e.getHours()/12>=1?o[1]:o[0]}};return["M","D","DDD","d","Q","W"].forEach(function(e){u[e+"o"]=function(t,r){return function(e){var t=e%100;if(t>20||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(r[e](t))}}),{formatters:u,formattingTokensRegExp:$t(u)}},xt={distanceInWords:function(){var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,r,s){var i;return s=s||{},i="string"==typeof e[t]?e[t]:1===r?e[t].one:e[t].other.replace("{{count}}",r),s.addSuffix?s.comparison>0?"in "+i:i+" ago":i}}}(),format:Ot()},It=1440,Ct=2520,Nt=43200,At=86400;var Vt=function(e,t,r){var s=r||{},i=st(e,t),a=s.locale,n=xt.distanceInWords.localize;a&&a.distanceInWords&&a.distanceInWords.localize&&(n=a.distanceInWords.localize);var o,u,l={addSuffix:Boolean(s.addSuffix),comparison:i};i>0?(o=Oe(e),u=Oe(t)):(o=Oe(t),u=Oe(e));var d,c=kt(u,o),f=u.getTimezoneOffset()-o.getTimezoneOffset(),h=Math.round(c/60)-f;if(h<2)return s.includeSeconds?c<5?n("lessThanXSeconds",5,l):c<10?n("lessThanXSeconds",10,l):c<20?n("lessThanXSeconds",20,l):c<40?n("halfAMinute",null,l):n(c<60?"lessThanXMinutes":"xMinutes",1,l):0===h?n("lessThanXMinutes",1,l):n("xMinutes",h,l);if(h<45)return n("xMinutes",h,l);if(h<90)return n("aboutXHours",1,l);if(h<It)return n("aboutXHours",Math.round(h/60),l);if(h<Ct)return n("xDays",1,l);if(h<Nt)return n("xDays",Math.round(h/It),l);if(h<At)return n("aboutXMonths",d=Math.round(h/Nt),l);if((d=wt(u,o))<12)return n("xMonths",Math.round(h/Nt),l);var m=d%12,p=Math.floor(d/12);return m<3?n("aboutXYears",p,l):m<9?n("overXYears",p,l):n("almostXYears",p+1,l)},Yt=1440,Rt=43200,Ht=525600;var Lt=function(e,t,r){var s=r||{},i=st(e,t),a=s.locale,n=xt.distanceInWords.localize;a&&a.distanceInWords&&a.distanceInWords.localize&&(n=a.distanceInWords.localize);var o,u,l,d={addSuffix:Boolean(s.addSuffix),comparison:i};i>0?(o=Oe(e),u=Oe(t)):(o=Oe(t),u=Oe(e));var c=Math[s.partialMethod?String(s.partialMethod):"floor"],f=kt(u,o),h=u.getTimezoneOffset()-o.getTimezoneOffset(),m=c(f/60)-h;if("s"===(l=s.unit?String(s.unit):m<1?"s":m<60?"m":m<Yt?"h":m<Rt?"d":m<Ht?"M":"Y"))return n("xSeconds",f,d);if("m"===l)return n("xMinutes",m,d);if("h"===l)return n("xHours",c(m/60),d);if("d"===l)return n("xDays",c(m/Yt),d);if("M"===l)return n("xMonths",c(m/Rt),d);if("Y"===l)return n("xYears",c(m/Ht),d);throw new Error("Unknown unit: "+l)};var Wt=function(e,t){return Vt(Date.now(),e,t)};var jt=function(e){var t=Oe(e);return t.setHours(23,59,59,999),t};var Pt=function(e,t){var r=t&&Number(t.weekStartsOn)||0,s=Oe(e),i=s.getDay(),a=6+(i<r?-7:0)-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s};var zt=function(e){var t=Oe(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t};var Ut=function(){return jt(new Date)};var Bt=function(e){var t=Oe(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r};var Xt=function(e){var t=Oe(e);return je(t,Bt(t))+1},Zt=6048e5;var Gt=function(e){var t=Oe(e),r=Ve(t).getTime()-Re(t).getTime();return Math.round(r/Zt)+1};var qt=function(e){if(oe(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")};var Jt={M:function(e){return e.getMonth()+1},MM:function(e){return Kt(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return Kt(e.getDate(),2)},DDD:function(e){return Xt(e)},DDDD:function(e){return Kt(Xt(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return Gt(e)},WW:function(e){return Kt(Gt(e),2)},YY:function(e){return Kt(e.getFullYear(),4).substr(2)},YYYY:function(e){return Kt(e.getFullYear(),4)},GG:function(e){return String(Ye(e)).substr(2)},GGGG:function(e){return Ye(e)},H:function(e){return e.getHours()},HH:function(e){return Kt(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:t>12?t%12:t},hh:function(e){return Kt(Jt.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return Kt(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return Kt(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return Kt(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return Kt(e.getMilliseconds(),3)},Z:function(e){return Qt(e.getTimezoneOffset(),":")},ZZ:function(e){return Qt(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function Qt(e,t){t=t||"";var r=e>0?"-":"+",s=Math.abs(e),i=s%60;return r+Kt(Math.floor(s/60),2)+t+Kt(i,2)}function Kt(e,t){for(var r=Math.abs(e).toString();r.length<t;)r="0"+r;return r}var er=function(e){var t=Oe(e).getFullYear();return t%400==0||t%4==0&&t%100!=0};var tr=function(e){var t=Oe(e).getDay();return 0===t&&(t=7),t},rr=6048e5;var sr=function(e){var t=Re(e),r=Re(Je(t,60)).valueOf()-t.valueOf();return Math.round(r/rr)};var ir=864e5;var ar=function(e){var t=Oe(e);return jt(t).getTime()===zt(t).getTime()};var nr=function(e){var t=Oe(e);return t.setMinutes(0,0,0),t};var or=function(e,t){var r=nr(e),s=nr(t);return r.getTime()===s.getTime()};var ur=function(e,t,r){var s=Ae(e,r),i=Ae(t,r);return s.getTime()===i.getTime()};var lr=function(e,t){return ur(e,t,{weekStartsOn:1})};var dr=function(e,t){var r=Re(e),s=Re(t);return r.getTime()===s.getTime()};var cr=function(e){var t=Oe(e);return t.setSeconds(0,0),t};var fr=function(e,t){var r=cr(e),s=cr(t);return r.getTime()===s.getTime()};var hr=function(e,t){var r=Oe(e),s=Oe(t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()};var mr=function(e){var t=Oe(e),r=t.getMonth(),s=r-r%3;return t.setMonth(s,1),t.setHours(0,0,0,0),t};var pr=function(e,t){var r=mr(e),s=mr(t);return r.getTime()===s.getTime()};var vr=function(e){var t=Oe(e);return t.setMilliseconds(0),t};var gr=function(e,t){var r=vr(e),s=vr(t);return r.getTime()===s.getTime()};var br=function(e,t){var r=Oe(e),s=Oe(t);return r.getFullYear()===s.getFullYear()};var _r=function(e){return or(new Date,e)};var yr=function(e){return lr(new Date,e)};var Dr=function(e){return dr(new Date,e)};var Sr=function(e){return fr(new Date,e)};var wr=function(e){return hr(new Date,e)};var Mr=function(e){return pr(new Date,e)};var kr=function(e){return gr(new Date,e)};var Tr=function(e,t){return ur(new Date,e,t)};var Er=function(e){return br(new Date,e)};var Fr=function(e,t){var r=t&&Number(t.weekStartsOn)||0,s=Oe(e),i=s.getDay(),a=6+(i<r?-7:0)-(i-r);return s.setHours(0,0,0,0),s.setDate(s.getDate()+a),s};var $r=function(e){var t=Ye(e),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var s=Ve(r);return s.setDate(s.getDate()-1),s};var Or=function(e,t){var r=Oe(e),s=Number(t);return r.setDate(s),r};var xr=function(e,t,r){var s=r&&Number(r.weekStartsOn)||0,i=Oe(e),a=Number(t),n=i.getDay();return xe(i,((a%7+7)%7<s?7:0)+a-n)};var Ir=function(e,t){var r=Oe(e),s=Number(t);return r.setMonth(0),r.setDate(s),r};var Cr=function(e,t){var r=Oe(e),s=Number(t);return r.setHours(s),r};var Nr=function(e,t){var r=Oe(e),s=Number(t),i=tr(r);return xe(r,s-i)};var Ar=function(e,t){var r=Oe(e),s=Number(t),i=Gt(r)-s;return r.setDate(r.getDate()-7*i),r};var Vr=function(e,t){var r=Oe(e),s=Number(t);return r.setMilliseconds(s),r};var Yr=function(e,t){var r=Oe(e),s=Number(t);return r.setMinutes(s),r};var Rr=function(e,t){var r=Oe(e),s=Number(t),i=r.getFullYear(),a=r.getDate(),n=new Date(0);n.setFullYear(i,s,15),n.setHours(0,0,0,0);var o=Xe(n);return r.setMonth(s,Math.min(a,o)),r};var Hr=function(e,t){var r=Oe(e),s=Number(t)-(Math.floor(r.getMonth()/3)+1);return Rr(r,r.getMonth()+3*s)};var Lr=function(e,t){var r=Oe(e),s=Number(t);return r.setSeconds(s),r};var Wr=function(e,t){var r=Oe(e),s=Number(t);return r.setFullYear(s),r};var jr=function(e){var t=Oe(e);return t.setDate(1),t.setHours(0,0,0,0),t};var Pr=function(){return He(new Date)};var zr=function(e,t){var r=Number(t);return xe(e,-r)};var Ur=function(e,t){var r=Number(t);return Ne(e,-r)};var Br=function(e,t){var r=Number(t);return Ie(e,-r)};var Xr=function(e,t){var r=Number(t);return Be(e,-r)};var Zr=function(e,t){var r=Number(t);return Ze(e,-r)};var Gr=function(e,t){var r=Number(t);return Ge(e,-r)};var qr=function(e,t){var r=Number(t);return qe(e,-r)};var Jr=function(e,t){var r=Number(t);return Je(e,-r)};var Qr=function(e,t){var r=Number(t);return Qe(e,-r)},Kr={addDays:xe,addHours:Ne,addISOYears:ze,addMilliseconds:Ie,addMinutes:Be,addMonths:Ze,addQuarters:Ge,addSeconds:qe,addWeeks:Je,addYears:Qe,areRangesOverlapping:Ke,closestIndexTo:et,closestTo:tt,compareAsc:rt,compareDesc:st,differenceInCalendarDays:je,differenceInCalendarISOWeeks:nt,differenceInCalendarISOYears:ot,differenceInCalendarMonths:ut,differenceInCalendarQuarters:dt,differenceInCalendarWeeks:ht,differenceInCalendarYears:mt,differenceInDays:pt,differenceInHours:bt,differenceInISOYears:yt,differenceInMilliseconds:vt,differenceInMinutes:St,differenceInMonths:wt,differenceInQuarters:Mt,differenceInSeconds:kt,differenceInWeeks:Tt,differenceInYears:Et,distanceInWords:Vt,distanceInWordsStrict:Lt,distanceInWordsToNow:Wt,eachDay:function(e,t,r){var s=Oe(e),i=void 0!==r?r:1,a=Oe(t).getTime();if(s.getTime()>a)throw new Error("The first date cannot be after the second date");var n=[],o=s;for(o.setHours(0,0,0,0);o.getTime()<=a;)n.push(Oe(o)),o.setDate(o.getDate()+i);return n},endOfDay:jt,endOfHour:function(e){var t=Oe(e);return t.setMinutes(59,59,999),t},endOfISOWeek:function(e){return Pt(e,{weekStartsOn:1})},endOfISOYear:function(e){var t=Ye(e),r=new Date(0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);var s=Ve(r);return s.setMilliseconds(s.getMilliseconds()-1),s},endOfMinute:function(e){var t=Oe(e);return t.setSeconds(59,999),t},endOfMonth:zt,endOfQuarter:function(e){var t=Oe(e),r=t.getMonth(),s=r-r%3+3;return t.setMonth(s,0),t.setHours(23,59,59,999),t},endOfSecond:function(e){var t=Oe(e);return t.setMilliseconds(999),t},endOfToday:Ut,endOfTomorrow:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),s=e.getDate(),i=new Date(0);return i.setFullYear(t,r,s+1),i.setHours(23,59,59,999),i},endOfWeek:Pt,endOfYear:function(e){var t=Oe(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t},endOfYesterday:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),s=e.getDate(),i=new Date(0);return i.setFullYear(t,r,s-1),i.setHours(23,59,59,999),i},format:function(e,t,r){var s=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",i=(r||{}).locale,a=xt.format.formatters,n=xt.format.formattingTokensRegExp;i&&i.format&&i.format.formatters&&(a=i.format.formatters,i.format.formattingTokensRegExp&&(n=i.format.formattingTokensRegExp));var o=Oe(e);return qt(o)?function(e,t,r){var s,i,a,n=e.match(r),o=n.length;for(s=0;s<o;s++)i=t[n[s]]||Jt[n[s]],n[s]=i||((a=n[s]).match(/\[[\s\S]/)?a.replace(/^\[|]$/g,""):a.replace(/\\/g,""));return function(e){for(var t="",r=0;r<o;r++)n[r]instanceof Function?t+=n[r](e,Jt):t+=n[r];return t}}(s,a,n)(o):"Invalid Date"},getDate:function(e){return Oe(e).getDate()},getDay:function(e){return Oe(e).getDay()},getDayOfYear:Xt,getDaysInMonth:Xe,getDaysInYear:function(e){return er(e)?366:365},getHours:function(e){return Oe(e).getHours()},getISODay:tr,getISOWeek:Gt,getISOWeeksInYear:sr,getISOYear:Ye,getMilliseconds:function(e){return Oe(e).getMilliseconds()},getMinutes:function(e){return Oe(e).getMinutes()},getMonth:function(e){return Oe(e).getMonth()},getOverlappingDaysInRanges:function(e,t,r,s){var i=Oe(e).getTime(),a=Oe(t).getTime(),n=Oe(r).getTime(),o=Oe(s).getTime();if(i>a||n>o)throw new Error("The start of the range cannot be after the end of the range");if(!(i<o&&n<a))return 0;var u=(o>a?a:o)-(n<i?i:n);return Math.ceil(u/ir)},getQuarter:lt,getSeconds:function(e){return Oe(e).getSeconds()},getTime:function(e){return Oe(e).getTime()},getYear:function(e){return Oe(e).getFullYear()},isAfter:function(e,t){var r=Oe(e),s=Oe(t);return r.getTime()>s.getTime()},isBefore:function(e,t){var r=Oe(e),s=Oe(t);return r.getTime()<s.getTime()},isDate:oe,isEqual:function(e,t){var r=Oe(e),s=Oe(t);return r.getTime()===s.getTime()},isFirstDayOfMonth:function(e){return 1===Oe(e).getDate()},isFriday:function(e){return 5===Oe(e).getDay()},isFuture:function(e){return Oe(e).getTime()>(new Date).getTime()},isLastDayOfMonth:ar,isLeapYear:er,isMonday:function(e){return 1===Oe(e).getDay()},isPast:function(e){return Oe(e).getTime()<(new Date).getTime()},isSameDay:function(e,t){var r=He(e),s=He(t);return r.getTime()===s.getTime()},isSameHour:or,isSameISOWeek:lr,isSameISOYear:dr,isSameMinute:fr,isSameMonth:hr,isSameQuarter:pr,isSameSecond:gr,isSameWeek:ur,isSameYear:br,isSaturday:function(e){return 6===Oe(e).getDay()},isSunday:function(e){return 0===Oe(e).getDay()},isThisHour:_r,isThisISOWeek:yr,isThisISOYear:Dr,isThisMinute:Sr,isThisMonth:wr,isThisQuarter:Mr,isThisSecond:kr,isThisWeek:Tr,isThisYear:Er,isThursday:function(e){return 4===Oe(e).getDay()},isToday:function(e){return He(e).getTime()===He(new Date).getTime()},isTomorrow:function(e){var t=new Date;return t.setDate(t.getDate()+1),He(e).getTime()===He(t).getTime()},isTuesday:function(e){return 2===Oe(e).getDay()},isValid:qt,isWednesday:function(e){return 3===Oe(e).getDay()},isWeekend:function(e){var t=Oe(e).getDay();return 0===t||6===t},isWithinRange:function(e,t,r){var s=Oe(e).getTime(),i=Oe(t).getTime(),a=Oe(r).getTime();if(i>a)throw new Error("The start of the range cannot be after the end of the range");return s>=i&&s<=a},isYesterday:function(e){var t=new Date;return t.setDate(t.getDate()-1),He(e).getTime()===He(t).getTime()},lastDayOfISOWeek:function(e){return Fr(e,{weekStartsOn:1})},lastDayOfISOYear:$r,lastDayOfMonth:function(e){var t=Oe(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t},lastDayOfQuarter:function(e){var t=Oe(e),r=t.getMonth(),s=r-r%3+3;return t.setMonth(s,0),t.setHours(0,0,0,0),t},lastDayOfWeek:Fr,lastDayOfYear:function(e){var t=Oe(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(0,0,0,0),t},max:function(){var e=Array.prototype.slice.call(arguments).map(function(e){return Oe(e)}),t=Math.max.apply(null,e);return new Date(t)},min:function(){var e=Array.prototype.slice.call(arguments).map(function(e){return Oe(e)}),t=Math.min.apply(null,e);return new Date(t)},parse:Oe,setDate:Or,setDay:xr,setDayOfYear:Ir,setHours:Cr,setISODay:Nr,setISOWeek:Ar,setISOYear:Pe,setMilliseconds:Vr,setMinutes:Yr,setMonth:Rr,setQuarter:Hr,setSeconds:Lr,setYear:Wr,startOfDay:He,startOfHour:nr,startOfISOWeek:Ve,startOfISOYear:Re,startOfMinute:cr,startOfMonth:jr,startOfQuarter:mr,startOfSecond:vr,startOfToday:Pr,startOfTomorrow:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),s=e.getDate(),i=new Date(0);return i.setFullYear(t,r,s+1),i.setHours(0,0,0,0),i},startOfWeek:Ae,startOfYear:Bt,startOfYesterday:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth(),s=e.getDate(),i=new Date(0);return i.setFullYear(t,r,s-1),i.setHours(0,0,0,0),i},subDays:zr,subHours:Ur,subISOYears:_t,subMilliseconds:Br,subMinutes:Xr,subMonths:Zr,subQuarters:Gr,subSeconds:qr,subWeeks:Jr,subYears:Qr},es=Kr.format,ts=Kr.parse;function rs(e){return e.split(":").map(Number)}function ss(e){return e.map(e=>String(e||0)).map(e=>e.padStart(2,"0")).join(":")}function is(e){return 60*e[0]+e[1]}var as={props:{min:{type:[String,Number,Object]},max:{type:[String,Number,Object]},yearRange:{type:Number,default:4},dayOffset:{type:Number,default:1},format:{type:String,default:"MM/DD/YYYY"},disabled:{type:[Boolean,Array],default:!1},lang:Object},data:()=>({picker:null,isOpened:!1}),computed:{isDisabledArray(){return Array.isArray(this.disabled)},disabledDates(){return this.isDisabledArray?this.disabled.map(e=>new Date(e).setHours(0,0,0,0)):[]}},methods:{_getPickerOptions(){let e=31536e6*this.yearRange,t=(new Date).getTime(),r=this.min&&ts(this.min),s=this.max&&ts(this.max);return{min:r=r&&r.getTime()?r:new Date(t-e),max:s=s&&s.getTime()?s:new Date(t+e),dayOffset:this.dayOffset,lang:Object.assign({},this.$lang.FORMS_DATEPICKER,this.lang),dateClass:e=>!1!==this.disabled&&this.isDisabledArray?this.disabledDates.includes(e.getTime())?"dp-day-disabled":"":this.disabled?"dp-day-disabled":""}},showPicker(){this.isOpened=!0},hidePicker(){this.isOpened=!1,this.isTouch=!1},_focusoutHandler(e){clearTimeout(this.__showPicker),this.__showPicker=setTimeout(()=>{this.$el.contains(document.activeElement)||this.hidePicker()},10)}}};var ns=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"time-range"},[r("ul",{staticClass:"time-range__intervals"},e._l(e.timeIntervals,function(t){return r("li",{key:t,staticClass:"time-range__interval"},[r("button",{staticClass:"time-range__button",class:{"is-current":e.value===t,"is-disabled":e._isDisabled(t)},attrs:{type:"button",disabled:e._isDisabled(t)},on:{click:function(r){!e._isDisabled(t)&&e.$emit("input",t)}}},[e._v(" "+e._s(t)+" ")])])}),0)])},staticRenderFns:[]},void 0,{name:"TimeRange",props:{value:String,min:{type:String,default:"00:00"},max:String,step:{type:[String,Number],default:30},disabled:{type:[Boolean,Array],default:!1}},computed:{endTimeMinutes(){return this.max&&is(rs(this.max))},timeIntervals(){let e=[],t=rs(this.min);for(;t[0]<24&&this._inRange(t);)e.push(ss(t)),t=this._nextPeriod(t);return e}},methods:{_nextPeriod(e){let[t,r]=e;if((r+=Number(this.step))>=60){let e=Math.floor(r/60);r-=60*e,t+=e}return[t,r]},_inRange(e){return!this.endTimeMinutes||is(e)<=this.endTimeMinutes},_isDisabled(e){return Array.isArray(this.disabled)?this.disabled.indexOf(e)>-1:this.disabled}}},void 0,!1,void 0,void 0,void 0);var os=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fb-date fb-element",on:{focusout:e._focusoutHandler}},[r("label",{staticClass:"fb-input fb-date__fb-input",class:{"fb-input_disabled":e.isDisabled,"fb-input_active":e.dateFormatted}},[r("span",{staticClass:"fb-input__label fb-input__label_field"},[e._v(" "+e._s(e.label)+" ")]),r("input",{ref:"element",staticClass:"fb-input__field",class:{"is-focusable":e.isFocusable,"in-focus":e.inFocus},attrs:{disabled:e.isDisabled,readonly:""},domProps:{value:e.dateFormatted},on:{focus:e.showPicker,blur:e._focusoutHandler}})]),r("div",{staticClass:"fb-date__picker",class:{"has-time":e.hasTime,"is-opened":e.isOpened}},[r("div",{ref:"picker",staticClass:"dp-wrapper",on:{click:e._calendarClickHandler}}),e.hasTime?r("time-range",e._b({staticClass:"fb-date__time-range",model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},"time-range",e.timeRangeOptions,!1)):e._e()],1),r("fb-input",{attrs:{name:e.realName,type:"hidden"}})],1)},staticRenderFns:[]},void 0,{name:"fb-date",mixins:[u,as],props:{value:String,timeRange:{type:[Boolean,Object],default:!0},format:{type:String,default(){return!1===this.$options.propsData.timeRange?"MM/DD/YYYY":"MM/DD/YYYY HH:mm"}}},components:{TimeRange:ns},computed:{date:{get(){return this.formId?this.formValue:this.value},set(e){e=e&&e.toISOString(),this.formId?this.formValue=e:this.$emit("input",e)}},time:{get(){let e=ts(this.date);return ss([e.getHours(),e.getMinutes()])},set(e){let t=this._addTime(function(e){let t=ts(e);return t.getTime()?t:new Date}(this.date),e);this.date=t}},dateFormatted(){return this.date&&es(this.date,this.format)||""},hasTime(){return!!this.timeRange},timeRangeOptions(){return AWES.utils.object.isObject(this.timeRange)?this.timeRange:{}},isDisabled(){return this.formLoading||this.isMultiblockDisabled||!Array.isArray(this.disabled)&&this.disabled}},methods:{init(){const e=this._getPickerOptions();e.mode="dp-permanent",this.picker=new se(this.$refs.picker,e),this.$watch("date",{handler(){let e=ts(this.date);e.setHours(0,0,0,0),this.picker.setState({selectedDate:e})},immediate:!0}),this.picker.on("select",this._setDate)},_addTime(e,t){let r=rs(t);return(e=ts(e)).setHours(...r),e},_setDate(e,{state:t}){if(this.timeRange){let e=this._addTime(t.selectedDate,this.time);this.date=e}else this.date=t.selectedDate,this.hidePicker()},_calendarClickHandler(e){"dp-close"===e.target.className&&this.hidePicker()}},mounted(){this.$nextTick(this.init)}},void 0,!1,void 0,void 0,void 0);var us=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fb-date is-range fb-element",on:{focusout:e._focusoutHandler}},[r("label",{staticClass:"fb-input fb-date__fb-input",class:{"fb-input_disabled":e.isDisabled,"fb-input_active":e.startDateFormatted}},[r("span",{staticClass:"fb-input__label fb-input__label_field"},[e._v(" "+e._s(e.labelStart||e.$lang.FORMS_DATERANGE_START_LABEL)+" ")]),r("input",{staticClass:"fb-input__field",attrs:{disabled:e.isDisabled,readonly:""},domProps:{value:e.startDateFormatted},on:{focus:e.showPicker,blur:e._focusoutHandler}})]),r("label",{staticClass:"fb-input fb-date__fb-input",class:{"fb-input_disabled":e.isDisabled,"fb-input_active":e.endDateFormatted}},[r("span",{staticClass:"fb-input__label fb-input__label_field"},[e._v(" "+e._s(e.labelEnd||e.$lang.FORMS_DATERANGE_END_LABEL)+" ")]),r("input",{staticClass:"fb-input__field",attrs:{disabled:e.isDisabled,readonly:""},domProps:{value:e.endDateFormatted},on:{focus:e.showPicker,blur:e._focusoutHandler}})]),r("div",{ref:"picker",staticClass:"fb-date__picker",class:{"is-opened":e.isOpened}}),r("fb-input",{attrs:{name:e.startName,value:e.valueStart,type:"hidden"}}),r("fb-input",{attrs:{name:e.endName,value:e.valueEnd,type:"hidden"}})],1)},staticRenderFns:[]},void 0,{name:"fb-date-range",mixins:[n,as],props:{labelStart:String,labelEnd:String,valueStart:String,valueEnd:String},computed:{startName(){return this.realName+"_start"},endName(){return this.realName+"_end"},startDate:{get(){let e=this.formId?this.$store.getters["forms/fieldValue"](this.formId,this.startName):this.valueStart;return e&&ts(e)||""},set(e){let t=e&&e.toISOString();this.formId?this._setField(this.startName,t):this.$emit("input",{start:e,end:this.valueEnd})}},startDateFormatted(){return this.startDate&&es(this.startDate,this.format)||""},endDate:{get(){let e=this.formId?this.$store.getters["forms/fieldValue"](this.formId,this.endName):this.valueEnd;return e&&ts(e)||""},set(e){let t=e&&e.toISOString();this.formId?this._setField(this.endName,t):this.$emit("input",{start:this.valueStart,end:e})}},endDateFormatted(){return this.endDate&&es(this.endDate,this.format)||""}},methods:{init(){const e=this._getPickerOptions();this.picker=new ie(this.$refs.picker,{startOpts:e,endOpts:e}),this.picker.setState({start:this.startDate,end:this.endDate}),this.$watch("startDate",e=>{this.picker.setState({start:e,end:this.endDate})}),this.$watch("endDate",e=>{this.picker.setState({start:this.startDate,end:e})}),this.picker.on("statechange",this._setDates)},_setDates(e,{state:t}){this.startDate=t.start,this.endDate=t.end,t.end&&this.hidePicker()},_setField(e,t){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:e,value:t})}},mounted(){this.init()}},void 0,!1,void 0,void 0,void 0),ls=g(function(e,t){e.exports=function(){var e="millisecond",t="second",r="minute",s="hour",i="day",a="week",n="month",o="quarter",u="year",l=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,d=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(e,t,r){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(r)+e},f={s:c,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),s=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+c(s,2,"0")+":"+c(i,2,"0")},m:function(e,t){var r=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(r,n),i=t-s<0,a=e.clone().add(r+(i?-1:1),n);return Number(-(r+(t-s)/(i?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(l){return{M:n,y:u,w:a,d:i,h:s,m:r,s:t,ms:e,Q:o}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m="en",p={};p[m]=h;var v=function(e){return e instanceof y},g=function(e,t,r){var s;if(!e)return null;if("string"==typeof e)p[e]&&(s=e),t&&(p[e]=t,s=e);else{var i=e.name;p[i]=e,s=i}return r||(m=s),s},b=function(e,t,r){if(v(e))return e.clone();var s=t?"string"==typeof t?{format:t,pl:r}:t:{};return s.date=e,new y(s)},_=f;_.l=g,_.i=v,_.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u})};var y=function(){function c(e){this.$L=this.$L||g(e.locale,null,!0)||m,this.parse(e)}var f=c.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(l);if(s)return r?new Date(Date.UTC(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)):new Date(s[1],s[2]-1,s[3]||1,s[4]||0,s[5]||0,s[6]||0,s[7]||0)}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return _},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(e,t){var r=b(e);return this.startOf(t)<=r&&r<=this.endOf(t)},f.isAfter=function(e,t){return b(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<b(e)},f.$g=function(e,t,r){return _.u(e)?this[t]:this.set(r,e)},f.year=function(e){return this.$g(e,"$y",u)},f.month=function(e){return this.$g(e,"$M",n)},f.day=function(e){return this.$g(e,"$W",i)},f.date=function(e){return this.$g(e,"$D","date")},f.hour=function(e){return this.$g(e,"$H",s)},f.minute=function(e){return this.$g(e,"$m",r)},f.second=function(e){return this.$g(e,"$s",t)},f.millisecond=function(t){return this.$g(t,"$ms",e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,o){var l=this,d=!!_.u(o)||o,c=_.p(e),f=function(e,t){var r=_.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return d?r:r.endOf(i)},h=function(e,t){return _.w(l.toDate()[e].apply(l.toDate(),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},m=this.$W,p=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case u:return d?f(1,0):f(31,11);case n:return d?f(1,p):f(0,p+1);case a:var b=this.$locale().weekStart||0,y=(m<b?m+7:m)-b;return f(d?v-y:v+(6-y),p);case i:case"date":return h(g+"Hours",0);case s:return h(g+"Minutes",1);case r:return h(g+"Seconds",2);case t:return h(g+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(a,o){var l,d=_.p(a),c="set"+(this.$u?"UTC":""),f=(l={},l[i]=c+"Date",l.date=c+"Date",l[n]=c+"Month",l[u]=c+"FullYear",l[s]=c+"Hours",l[r]=c+"Minutes",l[t]=c+"Seconds",l[e]=c+"Milliseconds",l)[d],h=d===i?this.$D+(o-this.$W):o;if(d===n||d===u){var m=this.clone().set("date",1);m.$d[f](h),m.init(),this.$d=m.set("date",Math.min(this.$D,m.daysInMonth())).toDate()}else f&&this.$d[f](h);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[_.p(e)]()},f.add=function(e,o){var l,d=this;e=Number(e);var c=_.p(o),f=function(t){var r=b(d);return _.w(r.date(r.date()+Math.round(t*e)),d)};if(c===n)return this.set(n,this.$M+e);if(c===u)return this.set(u,this.$y+e);if(c===i)return f(1);if(c===a)return f(7);var h=(l={},l[r]=6e4,l[s]=36e5,l[t]=1e3,l)[c]||1,m=this.valueOf()+e*h;return _.w(m,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=_.z(this),i=this.$locale(),a=this.$H,n=this.$m,o=this.$M,u=i.weekdays,l=i.months,c=function(e,s,i,a){return e&&(e[s]||e(t,r))||i[s].substr(0,a)},f=function(e){return _.s(a%12||12,e,"0")},h=i.meridiem||function(e,t,r){var s=e<12?"AM":"PM";return r?s.toLowerCase():s},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:_.s(o+1,2,"0"),MMM:c(i.monthsShort,o,l,3),MMMM:l[o]||l(this,r),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,u,2),ddd:c(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:_.s(a,2,"0"),h:f(1),hh:f(2),a:h(a,n,!0),A:h(a,n,!1),m:String(n),mm:_.s(n,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:s};return r.replace(d,function(e,t){return t||m[e]||s.replace(":","")})},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(e,l,d){var c,f=_.p(l),h=b(e),m=6e4*(h.utcOffset()-this.utcOffset()),p=this-h,v=_.m(this,h);return v=(c={},c[u]=v/12,c[n]=v,c[o]=v/3,c[a]=(p-m)/6048e5,c[i]=(p-m)/864e5,c[s]=p/36e5,c[r]=p/6e4,c[t]=p/1e3,c)[f]||p,d?v:_.a(v)},f.daysInMonth=function(){return this.endOf(n).$D},f.$locale=function(){return p[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var r=this.clone();return r.$L=g(e,t,!0),r},f.clone=function(){return _.w(this.toDate(),this)},f.toDate=function(){return new Date(this.$d)},f.toJSON=function(){return this.toISOString()},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},c}();return b.prototype=y.prototype,b.extend=function(e,t){return e(t,y,b),b},b.locale=g,b.isDayjs=v,b.unix=function(e){return b(1e3*e)},b.en=p[m],b.Ls=p,b}()}),ds=g(function(e,t){var r,s,i,a,n,o,u,l,d;e.exports=(s=/(\[[^[]*\])|([-:\/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d*[^\s\d-:\/.()]+/,u=[/[+-]\d\d:?\d\d/,function(e){var t,r;(this.zone||(this.zone={})).offset=(t=e.match(/([+-]|\d\d)/g),0==(r=60*t[1]+ +t[2])?0:"+"===t[0]?-r:r)}],l={A:[/[AP]M/,function(e){this.afternoon="PM"===e}],a:[/[ap]m/,function(e){this.afternoon="pm"===e}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[i=/\d\d/,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[a=/\d\d?/,(o=function(e){return function(t){this[e]=+t}})("seconds")],ss:[a,o("seconds")],m:[a,o("minutes")],mm:[a,o("minutes")],H:[a,o("hours")],h:[a,o("hours")],HH:[a,o("hours")],hh:[a,o("hours")],D:[a,o("day")],DD:[i,o("day")],Do:[n,function(e){var t=r.ordinal,s=e.match(/\d+/);if(this.day=s[0],t)for(var i=1;i<=31;i+=1)t(i).replace(/\[|\]/g,"")===e&&(this.day=i)}],M:[a,o("month")],MM:[i,o("month")],MMM:[n,function(e){var t=r,s=t.months,i=t.monthsShort,a=i?i.findIndex(function(t){return t===e}):s.findIndex(function(t){return t.substr(0,3)===e});if(a<0)throw new Error;this.month=a+1}],MMMM:[n,function(e){var t=r.months.indexOf(e);if(t<0)throw new Error;this.month=t+1}],Y:[/[+-]?\d+/,o("year")],YY:[i,function(e){e=+e,this.year=e+(e>68?1900:2e3)}],YYYY:[/\d{4}/,o("year")],Z:u,ZZ:u},d=function(e,t,r){try{var i=function(e){for(var t=e.match(s),r=t.length,i=0;i<r;i+=1){var a=t[i],n=l[a],o=n&&n[0],u=n&&n[1];t[i]=u?{regex:o,parser:u}:a.replace(/^\[|\]$/g,"")}return function(e){for(var s={},i=0,a=0;i<r;i+=1){var n=t[i];if("string"==typeof n)a+=n.length;else{var o=n.regex,u=n.parser,l=e.substr(a),d=o.exec(l)[0];u.call(s,d),e=e.replace(d,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(s),s}}(t)(e),a=i.year,n=i.month,o=i.day,u=i.hours,d=i.minutes,c=i.seconds,f=i.milliseconds,h=i.zone;if(h)return new Date(Date.UTC(a,n-1,o,u||0,d||0,c||0,f||0)+60*h.offset*1e3);var m=new Date,p=a||m.getFullYear(),v=n>0?n-1:m.getMonth(),g=o||m.getDate(),b=u||0,_=d||0,y=c||0,D=f||0;return r?new Date(Date.UTC(p,v,g,b,_,y,D)):new Date(p,v,g,b,_,y,D)}catch(e){return new Date("")}},function(e,t,s){var i=t.prototype,a=i.parse;i.parse=function(e){var t=e.date,i=e.format,n=e.pl,o=e.utc;this.$u=o,i?(r=n?s.Ls[n]:this.$locale(),this.$d=d(t,i,o),this.init(e)):a.call(this,e)}})});function cs(e,t,r){if(null==(s=e)||"object"!=typeof s)return console.warn("get supports only objects, ",e," given"),r;var s;t=function(e){return e.split(/(?:\]?\.|\[['"]?|['"]?\])/g).filter(e=>""!==e)}(t);let i,a=e;for(;t.length&&a;){let e=t.shift();t.length?a=a[e]:i=a[e]}return void 0!==i?i:r}var fs=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-calendar"},[r("div",{staticClass:"ui-calendar__weekdays"},[e._l(e.weekdays,function(t){return[e._t("weekday",[r("span",{key:t,staticClass:"ui-calendar__weekday"},[e._v(" "+e._s(t)+" ")])],{weekday:t})]})],2),r("div",{staticClass:"ui-calendar__days"},[e._l(this.days,function(t){var s=t.date,i=t.timestamp,a=t.isSelected,n=t.isEdge;return[e._t("day",[r("button",{key:i,staticClass:"ui-calendar__day",class:{"is-selected":a,"is-edge":n},on:{click:function(t){!n&&e.$emit("input",{date:s,timestamp:i,isSelected:a})}}},[e._v(" "+e._s(s.getDate())+" ")])],null,{date:s,timestamp:i,isSelected:a,isEdge:n})]})],2)])},staticRenderFns:[]},void 0,{name:"ui-calendar",mixins:[{props:{lang:Object},computed:{$lang:function(){return{...this.lang,...cs(this.$options,"_config.lang",{})}}}}],_config:{lang:{weekdays:["SU","MO","TU","WE","TH","FR","SA"]}},props:{month:{type:Number,default:()=>(new Date).getMonth()},year:{type:Number,default:()=>(new Date).getFullYear()},firstDay:{type:Number,default:0,validator:e=>e>-1&&e<7},value:[Array,Date,String,Number]},computed:{days(){return function(e,t,r=0){const s=[];let i=new Date(`${e+1} 1 ${t}`);i.getDay()!==r&&i.setDate(r-i.getDay()+1);for(let e=0;e<42;++e)s.push(new Date(i)),i.setDate(i.getDate()+1);return s}(this.month,this.year,this.firstDay).map(e=>{let t=e.getTime();return{date:e,timestamp:t,isSelected:this.selected.includes(t),isEdge:e.getMonth()!==+this.month}})},weekdays(){return this.days.slice(0,7).map(({date:e})=>this.$lang.weekdays[e.getDay()])},selected(){return Array.isArray(this.value)?this.value.map(this._toTimeStamp):[this._toDayTimeStamp(this.value)]}},methods:{_toDayTimeStamp:e=>new Date(e).setHours(0,0,0,0)}},void 0,!1,void 0,void 0,void 0);ls.extend(ds);var hs=r({render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fb-reservation fb-element",attrs:{tabindex:"0"}},[e._t("title"),r("div",{staticClass:"fb-reservation__calendar",class:{"is-visible":!e.showTime}},[r("div",{staticClass:"ui-calendar__header"},[r("time",{staticClass:"ui-calendar__caption",attrs:{datetime:e.year+"-"+(e.month+1)}},[e._v(" "+e._s(e.monthName)+" "+e._s(e.year)+" ")]),r("button",{staticClass:"ui-calendar__button is-prev",attrs:{disabled:e.prevButtonDisabled,type:"button"},on:{click:function(t){return e.setMonth(e.month-1)}}},[e._v(" previouse month ")]),r("button",{staticClass:"ui-calendar__button is-next",attrs:{type:"button"},on:{click:function(t){return e.setMonth(e.month+1)}}},[e._v(" next month ")])]),r("ui-calendar",e._b({staticClass:"fb-reservation__ui-calendar",attrs:{value:e.date,lang:{weekdays:e.$lang.FORMS_DATEPICKER.days}},scopedSlots:e._u([{key:"day",fn:function(t){var s=t.date,i=t.timestamp,a=t.isSelected,n=t.isEdge;return r("button",e._g({staticClass:"ui-calendar__day",class:{"is-edge":n,"is-selected":a,"is-today":i===e.today,"is-disabled":!e.availableDays[i]},attrs:{disabled:!e.availableDays[i],type:"button","data-date":n?null:i}},n||!e.availableDays[i]?{}:{click:e._setDate}),[e._v(" "+e._s(s.getDate())+" ")])}}])},"ui-calendar",{month:e.month,year:e.year,firstDay:e.firstDay},!1))],1),r("div",{directives:[{name:"show",rawName:"v-show",value:!!e.date,expression:"!! date"}],staticClass:"fb-reservation__time",class:{"is-visible":e.showTime}},[r("div",{staticClass:"ui-calendar__header"},[r("button",{staticClass:"ui-calendar__button is-prev fb-reservation__hide-time",attrs:{type:"button"},on:{click:function(t){e.showTime=!1}}},[e._v(" show datepicker ")]),r("time",{staticClass:"ui-calendar__caption",attrs:{datetime:e.dateInfo.datetime}},[e._t("time-header",[e._v(" "+e._s(e.dateInfo.weekdayName)+", "+e._s(e.dateInfo.monthName)+" "+e._s(e.dateInfo.day)+" "),r("span",{staticClass:"fb-reservation__caption-year"},[e._v(e._s(e.dateInfo.year))])],null,e.dateInfo)],2)]),r("div",{staticClass:"ui-calendar__time-range"},[e.availableTime?r("ul",{on:{click:e._setTime}},e._l(e.availableTime,function(t){var s=t.time_start,i=t.status,a=t.format24h,n=t.format12h;return r("li",{key:s},[r("button",{staticClass:"ui-calendar__button",class:[{"is-selected":e.time===a,"is-disabled":"available"!==i},"is-"+i],attrs:{type:"button",disabled:"available"!==i,"data-time":a}},[e._v(" "+e._s(e.is24hFormat?a:n)+" ")])])}),0):e._e()])]),r("fb-input",{attrs:{name:e.realName,type:"hidden"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"fb-reservation__loading"},[e._t("loading",[e._v(" Loading... ")])],2)],2)},staticRenderFns:[]},void 0,{name:"fb-reservation",mixins:[n],components:{uiCalendar:fs},props:{url:{type:String,required:!0},firstDay:Number},data:()=>({timeZone:null,isLoading:!1,month:(new Date).getMonth(),year:(new Date).getFullYear(),today:(new Date).setHours(0,0,0,0),date:null,time:null,showTime:!1,is24hFormat:!0,days:[]}),computed:{selected:{get(){return this.$store.getters["forms/fieldValue"](this.formId,this.realName)},set(e){this.$store.commit("forms/setFieldValue",{formName:this.formId,fieldName:this.realName,value:e})}},monthName(){return this.$lang.FORMS_DATEPICKER.months[this.month]},dateInfo(){if(this.date){let e=this.date.getDate(),t=this.date.getFullYear(),r=this.date.getMonth(),s=this.date.getDay();return{weekdayName:this.$lang.FORMS_DATEPICKER.daysFull[s],monthName:this.$lang.FORMS_DATEPICKER.months[r],day:e,year:t,datetime:this._formatDatestring(this.date)}}return{}},availableDays(){let e={};return this.days.forEach(t=>{if("available"!==t.status)return;let r=this._parseDatestring(t.date);e[r.getTime()]=t.spots}),e},availableTime(){return this.date?this.$get(this.availableDays,`${this.date.getTime()}`,[]).map(({start_time:e,status:t})=>{let r=ls(e);return{format24h:r.format("HH:mm"),format12h:r.format("hh:mm A"),start_time:e,status:t}}):null},prevButtonDisabled(){let e=new Date(this.today);return this.year===e.getFullYear()&&this.month===e.getMonth()}},methods:{fetchData(){AWES.on("core:ajax",this._showLoader);let e=ls(new Date(this.year,this.month)).set("date",1),t=e.add(1,"month").set("date",0);e=this._formatDatestring(e),t=this._formatDatestring(t),AWES.ajax({timezone:this.timeZone,range_start:e,range_end:t},this.url,"GET").then(({data:e})=>{this.days=this.$get(e,"data.days",[]),this.today=this._parseDatestring(this.$get(e,"data.today")).getTime(),this.is24hFormat="24h"===this.$get(e,"data.format")}).finally(()=>{this.isLoading=!1,AWES.off("core:ajax",this._showLoader)})},_showLoader(e){let{url:t,active:r}=e.detail;this.url===t&&(this.isLoading=r)},_parseDatestring:e=>ls(e,"YYYY-MM-DD").toDate(),_formatDatestring:e=>ls(e).format("YYYY-MM-DD"),_setDate(e){const t=new Date(+e.target.getAttribute("data-date"));this.date=t,this.time=null,this.selected=void 0,this.showTime=!0},_setTime(e){const t=e.target.getAttribute("data-time");if(!t)return;this.time=t;const[r,s]=t.split(":");let i=new Date(this.date);this.selected=ls(i.setHours(r,s,0,0)).format("YYYY-MM-DDTHH:mm:ssZ")},setMonth(e){switch(e){case-1:this.month=11,this.year-=1;break;case 12:this.month=0,this.year+=1;break;default:this.month=e}this.fetchData()}},beforeMount(){window.Intl&&(this.timeZone=Intl.DateTimeFormat().resolvedOptions().timeZone)},mounted(){this.$nextTick(()=>{if(this.selected){let e=ls(this.selected);this.date=new Date(e.toDate().setHours(0,0,0,0)),this.time=e.format("HH:mm")}this.fetchData()})}},void 0,!1,void 0,void 0,void 0);var ms={installed:!1,install:function(e){this.installed||(this.installed=!0,e.component("form-builder",s),e.component("fb-error-wrap",i),e.component("fb-switcher",A),e.component("fb-input",c),e.component("fb-multi-block",f),e.component("fb-checkbox",m),e.component("fb-select",v),e.component("fb-textarea",y),e.component("fb-code",D),e.component("fb-company-slug",e=>{AWES.utils.loadModule("urlify","https://unpkg.com/urlify@0.3.6/dist/urlify.js",()=>{e(w)})}),e.component("fb-auto-captcha",M),e.component("fb-radio-group",k),e.component("fb-slider",E),e.component("fb-phone",$),e.component("fb-uploader",e=>{AWES.utils.loadModule("vue-simple-uploader","https://unpkg.com/vue-simple-uploader@0.5.6/dist/vue-uploader.js",()=>{e(O)})}),e.component("fb-editor",e=>{AWES.utils.loadModules({"tiny-mce":"https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.2/tinymce.min.js","tiny-mce-plugins":{deps:["tiny-mce"],src:["https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.2/plugins/lists/plugin.min.js"]}}).then(()=>{e(N)})}),e.component("fb-date",os),e.component("fb-date-range",us),e.component("fb-reservation",hs))}},ps={FORMS_SEND:"Send",FORMS_CANCEL:"Cancel",FORMS_LOADING:"Loading...",FORMS_CONFIRM:"Are you shure? All not submitted data will be erased...",FORMS_MULTIBLOCK_ADD:"+ add",FORMS_SELECT_LABEL:"Select a value",FORMS_SELECT_PLACEHOLDER:"Pick a value",FORMS_SELECT_AJAX_PLACEHOLDER:"Start typing...",FORMS_SELECT_EMPTY:"Nothing found",FORMS_SELECT_ADD_TAG:"Add new value",FORMS_UPLOAD_DROP:"Drag and drop file or",FORMS_UPLOAD_ADD:"Add file",FORMS_UPLOAD_FORMAT:"File formats only",FORMS_UPLOAD_SIZE:"Size of files no more then",FORMS_UPLOAD_REMOVE:"Remove file",FORMS_UPLOADER_EXTENSION_ERROR:"File %s has wrong extension",FORMS_UPLOADER_SIZE_ERROR:"File %s is too big",FORMS_EDITOR_VISUAL:"Visual",FORMS_EDITOR_CODE:"Code",FORMS_DATERANGE_START_LABEL:"Start date",FORMS_DATERANGE_END_LABEL:"End date",FORMS_DATEPICKER:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysFull:["Sunday","Monday","Tuesday","Wednesday","Thirsday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",clear:"Clear",close:"Close"}};function vs(e){e.isEdited||Vue.set(e,"isEdited",!0)}var gs={state:()=>({}),getters:{form:e=>t=>e[t],fields:(e,t)=>e=>{let r={};const s=t.form(e);return s&&(r=s.fields),r},multiblockIds:(e,t)=>(e,r)=>{let s=[0];const i=t.form(e);return i&&(s=i.multiblocks[r].ids),s},errorsOrFalse:(e,t)=>e=>{const r=t.form(e);let s=r&&r.errors||{};return!AWES.utils.object.isEmpty(s)&&s},hasCaptchaError:(e,t)=>e=>{return!!t.form(e)["g-recaptcha-response"]},isLoading:(e,t)=>e=>{const r=t.form(e);return r&&r.isLoading},isMultiblockDisabled:(e,t)=>(e,r)=>{const s=t.form(name);return s&&!s.multiblocksDisabled[r]},fieldValue:(e,t)=>(e,r)=>{const s=t.form(e);return s&&s.fields[r]},fieldError:(e,t)=>(e,r)=>{const s=t.form(e);return s&&s.errors[r]},firstErrorField:e=>t=>e[t]&&e[t].firstErrorField},mutations:{createForm(e,{formName:t,fields:r}){Vue.set(e,t,{initialState:r,fields:{},errors:{},multiblocks:{},isLoading:!1,isEdited:!1,firstErrorField:null})},setLoading(e,{formName:t,status:r}){Vue.set(e[t],"isLoading",r)},deleteForm(e,t){Vue.delete(e,t)},setFormErrors(e,{formName:t,errors:r}){const s=e[t];Vue.set(s,"firstErrorField",Object.keys(r)[0]);let i={};for(let e in r){let t=r[e];i[a(e)]=t}Vue.set(s,"errors",i)},createField(e,{formName:t,fieldName:r,value:s}){const i=e[t];s=AWES.utils.object.get(i.initialState,r,s),Vue.set(i.fields,r,s)},setFieldValue(e,{formName:t,fieldName:r,value:s}){const i=e[t];Vue.set(i.fields,r,s),vs(i)},deleteField(e,{formName:t,fieldName:r}){const s=e[t];Vue.delete(s.fields,r),Vue.delete(s.errors,r)},resetError(e,{formName:t,fieldName:r}){Vue.delete(e[t].errors,r)},resetErrors(e,t){Vue.set(e[t],"errors",{})},resetFirstErrorField(e,t){Vue.set(e[t],"firstErrorField",null)},createMutiblock(e,{formName:t,multiblockName:r,disabled:s}){const i=e[t],{get:a,isEmpty:n}=AWES.utils.object;let o=a(i.initialState,r);o=n(o)?[{}]:o;let u=Object.keys(o).map(e=>Number(e));Vue.set(i.multiblocks,r,{disabled:s,ids:u})},deleteMutiblock(e,{formName:t,multiblockName:r}){Vue.delete(e[t].multiblocks,r)},toggleMultiblockState(e,{formName:t,multiblockName:r,status:s}){Vue.set(e[t].multiblocks[r],"disabled",s)},addMultiblockId(e,{formName:t,multiblockName:r,id:s}){const i=e[t];i.multiblocks[r].ids.push(s),vs(i)},deleteMultiblockId(e,{formName:t,multiblockName:r,id:s}){const i=e[t];let a=i.multiblocks[r].ids,n=a.findIndex(e=>e===s);a.splice(n,1),vs(i)}},actions:{restoreData({state:e},{formName:t}){const r=e[t],s=function(e,t=null){let r={};for(let s in e){let i=t?t(e[s]):e[s];AWES.utils.object.set(r,s,i)}return r}(r.fields),i=Object.keys(r.multiblocks);if(i.length){!function(e,t){const{get:r,set:s}=AWES.utils.object;t.forEach(t=>{let i=r(e,t);s(e,t,function(e){return e.filter(()=>!0)}(i))})}(s,i);for(let e of i){let t=Object.keys(AWES.utils.object.get(s,e,[{}])).map(e=>Number(e));Vue.set(r.multiblocks[e],"ids",t)}}return s},sendForm:({state:e,commit:t,dispatch:r},{formName:s,url:i,method:a})=>new Promise(n=>{let o;const u=e[s];t("resetErrors",s),t("setLoading",{formName:s,status:!0}),r("restoreData",{formName:s}).then(e=>AWES.ajax(e,i,a)).then(e=>{if(o=e,e.success){let t=e.data.data||{};Vue.set(u,"initialState",t);let r={};for(let e in u.fields)r[e]=AWES.utils.object.get(t,e);Vue.set(u,"fields",r),Vue.set(u,"isEdited",!1)}else e.data&&t("setFormErrors",{formName:s,errors:e.data})}).finally(()=>{t("setLoading",{formName:s,status:!1}),n(o)})})},namespaced:!0};const bs={name:"form-builder",version:"1.5.4",modules:{"vue-shortkey":{src:"https://unpkg.com/vue-shortkey/dist/index.js",deps:["vue"],cb(){Vue.use(VueShortkey)}},"v-tooltip":{src:"https://unpkg.com/v-tooltip@2/dist/v-tooltip.min.js",deps:["vue"],cb(){VTooltip.default.options.popover=Object.assign(VTooltip.default.options.popover,{defaultPlacement:"right",defaultAutoHide:!1,defaultTrigger:"manual",defaultPopperOptions:{modifiers:{flip:{behavior:["right","top"]}}}})}},"vue-the-mask":{src:"https://unpkg.com/vue-the-mask@0.11.1/dist/vue-the-mask.js",deps:["vue"]}},install(e){Vue.use(ms),e._store.registerModule("forms",gs),e.lang=ps}};window&&"AWES"in window?AWES.use(bs):(window.__awes_plugins_stack__=window.__awes_plugins_stack__||[],window.__awes_plugins_stack__.push(bs))}();
