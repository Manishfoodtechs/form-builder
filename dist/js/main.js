/**
 * Bundle of awes-forms
 * Generated: 2018-12-28
 * Version: 0.0.1
 */

!function(){"use strict";function e(e,t,i,n){let o=e.forms.find(e=>e.id==t);const s=e.forms.findIndex(e=>e.id==t);null===n?_.unset(o,i):_.set(o,i,n),Vue.set(e.forms,s,o)}function t(e,t,i){function n(e){if(!i||0===Object.keys(i).length)return e;for(let t in i)e[t]=i[t];return e}if(document.createEvent){const i=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(n(i))}else{const i=document.createEventObject();t.fireEvent("on"+e,n(i))}}function i(e){try{e.prototype.$awesForms=new Vuex.Store(s)}catch(e){console.log("Error creating store :",e)}e.component("form-builder",l),e.component("fb-input",h),e.component("fb-multi-block",p),e.component("fb-checkbox",v),e.component("fb-select",b),e.component("fb-textarea",y)}function n(e){e.$options.components=Object.assign(e.$options.components,{formBuilder:l,fbInput:h,fbMultiBlock:p,fbCheckbox:v,fbSelect:b,fbTextarea:y})}const o=({id:id,url:url,method:method,storeData:storeData})=>({id:id,url:url,storeData:storeData,initialState:{_method:method},realFields:[],workingState:{},loading:!1,isEdited:!1,editCounter:0,errors:{},firstErrorField:null,multiblockState:{}});var s={state:{forms:[]},getters:{form:e=>t=>e.forms.find(e=>e.id==t),formErrorsOrFalse:(e,t)=>e=>{const i=t.form(e).errors;return!!Object.keys(i).length&&i},isEdited:(e,t)=>e=>t.form(e).isEdited,fieldValue:(e,t)=>(e,i)=>_.get(t.form(e).workingState,i),fieldError:(e,t)=>(e,i)=>_.get(t.form(e).errors,i),firstErrorField:(e,t)=>e=>t.form(e).firstErrorField,workingState:(e,t)=>e=>{const i=t.form(e);return i.workingState},loading:(e,t)=>e=>t.form(e).loading,multiblockDisabled:(e,t)=>(e,i)=>_.get(t.form(e).multiblockState,i),hasCaptchaError:(e,t)=>e=>!!t.form(e).errors.hasOwnProperty("g-recaptcha-response")},mutations:{createForm(e,t){if(this.getters.form(t.id))throw new Error(`Form with ID ${t.id} already exists`);e.forms.push(o(t))},deleteForm(e,t){const i=e.forms.findIndex(e=>e.id===t);-1!==i?Vue.delete(e.forms,i):console.warn("No form to delete with id: "+t)},setDefaultData(e,{id:id,fields:fields}){const t=this.getters.form(id);t.initialState=_.merge(t.initialState,_.cloneDeep(fields)),t.workingState=_.cloneDeep(t.initialState)},resetFormEdited(e,t){this.getters.form(t).isEdited=!1},setErrors(e,{id:id,errors:errors}){const t=this.getters.form(id);t.firstErrorField=Object.keys(errors)[0],t.errors=errors},resetError(t,{id:id,fieldName:fieldName}){const i=this.getters.form(id);i&&(delete i.errors[fieldName],e(t,id,`errors`,i.errors))},resetErrors(e,t){this.getters.form(t).errors={}},renameError(e,{id:id,oldName:oldName,newName:newName,message:message}){const t=this.getters.form(id);Vue.set(t.errors,newName,message),Vue.delete(t.errors,oldName)},setField(t,{id:id,fieldName:fieldName,value:value,initial:initial}){e(t,id,`workingState.${fieldName}`,value);const i=this.getters.form(id);initial&&i.realFields.push(fieldName),!0!==initial&&(i.editCounter+=1,i.isEdited=!0)},unsetRealField(e,{id:id,fieldName:fieldName}){const t=this.getters.form(id);if(t){let e=t.realFields.indexOf(fieldName);Vue.delete(t.realFields,e)}},toggleFormLoading(e,{id:id,isLoading:isLoading}){this.getters.form(id).loading=isLoading},toggleMultiblockState(t,{id:id,multiblock:multiblock,value:value}){this.getters.form(id);e(t,id,`multiblockState.${multiblock}`,value)},resetFirstErrorField(e,t){this.getters.form(t).firstErrorField=null}}};let r=0;const a=[{type:"beforeunload",handler:"windowUnloadHandler"},{type:"popstate",handler:"popStateHandler"}];var l=function(e,t,i,n,o,s,r,a){const l=("function"==typeof i?i.options:i)||{};return l.__file="form-builder.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),l._scopeId=n,l}({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{staticClass:"form-builder",class:{modal__form:e.modal},attrs:{action:e.url,method:e.method}},[i("div",{staticClass:"grid grid_forms"},[e._t("default",null,{fields:e.workingState})],2),e._v(" "),e.autoSubmit?e._e():i("div",{class:e.modal?"line-btns":null},[i("div",{class:e.modal?"line-btns__wrap":"line-btns"},[i("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],staticClass:"btn btn-send waves-effect waves-button",class:{"loading-inline":e.showLoader},attrs:{disabled:!e.isEdited,"data-loading":e.$lang.FORMS_LOADING,type:"submit","data-awes":"modal_button_ok"},on:{shortkey:e.send,click:function(t){return t.preventDefault(),e.send(t)}},nativeOn:{click:function(t){return t.preventDefault(),e.send(t)}}},[e._v("\n          "+e._s(e.sendText||e.$lang.FORMS_SEND)+" "),i("span",{staticClass:"g-res--tablet-lg_n"},[e._v("(ctrl+enter)")])]),e._v(" "),e.modal||e.cancelbtn?i("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],staticClass:"btn waves-effect waves-button",class:{btn_transparent:e.cancelbtn},attrs:{type:"button"},on:{shortkey:e.close,click:function(t){t.preventDefault(),e.modal?e.close(e.modal.name):e.$emit("cancel")}}},[e._v("\n          "+e._s(e.cancelText||e.$lang.FORMS_CANCEL)+"\n        ")]):e._e(),e._v(" "),e._t("buttons-after")],2)])])},staticRenderFns:[]},void 0,{name:"form-builder",props:{cancelbtn:{type:Boolean,default:!1},name:{type:String,default:()=>`form-builder-${r++}`},url:{type:String,required:!0},sendText:String,cancelText:String,loadingText:String,default:{type:Object,default:null},method:{type:String,default:"post",validator(e){return void 0===e||["get","put","post","delete","patch"].includes(e.toLowerCase())}},storeData:String,disabledDialog:{type:Boolean,default:!1},autoSubmit:{type:Boolean,default:!1}},inject:{modal:{from:"modal",default:!1}},provide(){return{formId:this.name,isModal:!!this.modal}},data(){return{loading:!1,serverData:null,serverDataErrors:null,showLoader:!1}},computed:{form(){return this.$awesForms.getters.form(this.name)},isEdited(){return this.$awesForms.getters.isEdited(this.name)},workingState(){return this.$awesForms.getters.workingState(this.name)},storeFormData(){return!!this.storeData&&this.$awesForms.state[this.storeData]},usedFormData(){return this.storeFormData?(this.default&&console.warn("Only VUEX STORE data will be used, despite DEFAULT data exists"),this.storeFormData):!!this.default&&this.default}},watch:{usedFormData:{handler:function(e){this.form||(this.createForm(),e&&this.$awesForms.commit("setDefaultData",{id:this.name,fields:e}))},deep:!0,immediate:!0},loading(e){this.$awesForms.commit("toggleFormLoading",{id:this.name,isLoading:e})},serverData(e){e&&(this.storeData?this.$awesForms.commit("setData",{param:this.storeData,data:e.data}):this.$awesForms.commit("setDefaultData",{id:this.name,fields:e.data}),this.$awesForms.commit("resetFormEdited",this.name),this.serverData=null,this.$emit("sended",e.data),this.modal&&this.close(this.modal.name))},serverDataErrors(e){e&&(this.$awesForms.commit("setErrors",{id:this.name,errors:e}),this.serverDataErrors=null,this.disabledDialog||this.addUnloadHandlers())}},methods:{createForm(){this.$awesForms.commit("createForm",{id:this.name,url:this.url,method:this.method,storeData:this.storeData})},send(){this.$listeners.hasOwnProperty("send")?this.$emit("send",this.workingState):this.loading||(this.removeUnloadHandlers(),this.$awesForms.commit("resetErrors",this.name),this.loading=!0,AWES.on("core:ajax",this.onRequestProcess),AWES.ajax(this.workingState,this.url,this.method).then(e=>{this.serverData=e}).catch(e=>{this.serverDataErrors=e}).finally(()=>{this.loading=!1;this.showLoader=!1;AWES.off("core:ajax",this.onRequestProcess)}))},onRequestProcess(e){this.showLoader=e.detail},addUnloadHandlers(){a.forEach(e=>{window.addEventListener(e.type,this[e.handler],!1)})},removeUnloadHandlers(){a.forEach(e=>{window.removeEventListener(e.type,this[e.handler])})},checkCloseAllowed(){if(this.disabledDialog)return!0;if(this.isEdited){const e=confirm(this.$lang.FORMS_CONFIRM);return e}return!0},popStateHandler(){if(this.removeUnloadHandlers(),this.checkCloseAllowed())this.modal&&this.close();else{const e=this.modal?this.modal.hash:"",t=location.href+e;history.pushState({modal:e},document.title,t),this.addUnloadHandlers()}},windowUnloadHandler(e){return!(!this.disabledDialog&&this.isEdited)||(e.returnValue=this.$lang.FORMS_CONFIRM,this.$lang.FORMS_CONFIRM)},close(e=!1){e&&e!==this.modal.name||this.checkCloseAllowed()&&(this.removeUnloadHandlers(),this.$root.$emit("modals:prevent",{name:this.modal.name,state:!1}),this.$root.$emit("modals:close",this.modal.name))}},created(){this.$root.$on("forms:submit",e=>{this.name===e&&this.send()}),this.modal&&(this.__unwatchModalPrevent=this.$watch("isEdited",e=>{this.$root.$emit("modals:prevent",{name:this.modal.name,state:e})}),this.$root.$on("modals:on-close-prevented",this.close))},mounted(){this.addUnloadHandlers(),this.autoSubmit&&(this._unwatchEdit=this.$watch("form.editCounter",this.send))},beforeDestroy(){this.removeUnloadHandlers(),"function"==typeof this.__unwatchModalPrevent&&this.__unwatchModalPrevent(),this.$awesForms.commit("deleteForm",this.name),"function"==typeof this._unwatchEdit&&this._unwatchEdit(),this.$root.$off("modals:on-close-prevented",this.close)}},void 0,!1,void 0,void 0,void 0),u={props:{name:{type:String,required:!0},id:Number,disabled:{type:Boolean,default:!1},cell:{type:[String,Number],validator(e){return["2","3"].includes(e.toString())}}},inject:{formId:{from:"formId",default:!1},isModal:{from:"isModal",default:!1},multiblock:{from:"multiblock",default:!1}},data(){return{tooltip:!1,hasError:!1}},computed:{realName(){return this.multiblock?`${this.multiblock}.${this.id}.${this.name}`:this.name},computedValue(){return this.$awesForms.getters.fieldValue(this.formId,this.realName)},formLoading(){return this.$awesForms.getters.loading(this.formId)},inActive(){return!(!this.inFocus&&!this.value)},isDisabled(){return this.formLoading||this.disabled||this.isMultiblockDisabled},isMultiblockDisabled(){return!!this.multiblock&&this.$awesForms.getters.multiblockDisabled(this.formId,this.multiblock)},cellClass(){return this.cell?"grid__cell_"+this.cell:""},error(){return this.$awesForms.getters.fieldError(this.formId,this.realName)},firstErrorField(){return this.$awesForms.getters.firstErrorField(this.formId)},shake(){return!this.formLoading&&this.tooltip}},watch:{error:{handler:function(e){e?(this.tooltip=!0,this.hasError=!0,this.$refs.element&&this.$refs.element.addEventListener("input",this.resetError,!1),"function"==typeof this.setFocus&&this.$nextTick(this.checkFocus)):(this.tooltip=!1,this.hasError=!1,this.resetInputWatcher())},immediate:!0}},methods:{createStoreInstance(){this.$awesForms.commit("setField",{id:this.formId,fieldName:this.realName,value:this.value,initial:!0})},initField(){void 0!==this.computedValue&&(this.value=this.computedValue),this.createStoreInstance(),this.__unwatchValue=this.$watch("value",this.valueHandler),this.multiblock&&(this.__unwatchId=this.$watch("id",this.idHandler))},idHandler(e,t){const i=`${this.multiblock}.${t}.${this.name}`,n=this.$awesForms.getters.fieldError(this.formId,i);n&&this.$awesForms.commit("renameError",{id:this.formId,oldName:i,newName:this.realName,message:n})},valueHandler(e){this.$awesForms.commit("setField",{id:this.formId,fieldName:this.realName,value:e})},clickTooltip(){this.tooltip=!1,"function"==typeof this.setFocus&&this.setFocus()},resetError(){this.tooltip=!1,this.$awesForms.commit("resetError",{id:this.formId,fieldName:this.realName}),this.resetInputWatcher()},resetInputWatcher(){this.$refs.element&&this.$refs.element.removeEventListener("input",this.resetError)},resetValue(e){this.formId===e&&(this.value=void 0)},checkFocus(){this.firstErrorField===this.realName&&(setTimeout(this.setFocus,0),this.$awesForms.commit("resetFirstErrorField",this.formId))}},created(){this.initField(),this.$root.$on("forms:reset",this.resetValue)},beforeDestroy(){this.multiblock&&(this.resetError(),this.$awesForms.commit("unsetRealField",{id:this.formId,fieldName:this.realName})),this.__unwatchValue(),"function"==typeof this.__unwatchId&&this.__unwatchId(),this.resetInputWatcher(),this.$root.$off("forms:reset",this.resetValue)}},c={props:{enterSkip:{type:Boolean,default:!1},focus:{type:Boolean,default:!1}},data(){return{inFocus:this.focus}},computed:{isFocusable(){return!this.enterSkip&&!this.disabled&&this.formId}},methods:{focusNext(e){try{const t=e.target.closest("form"),i=t.querySelectorAll(".is-focusable"),n=Array.from(i).findIndex(t=>t===e.target)+1;if(n<i.length)i[n].focus();else{e.target.blur();const i=t.querySelector('[type="submit"]');this.$nextTick(()=>{i.click();this.initWawesEffect(i)})}}catch(e){console.warn("Error while setting focus"),console.error(e)}},setFocus(e){try{let t=!1!==e?"focus":"blur";this.$refs.element[t]()}catch(e){console.warn("Error while setting focus"),console.error(e)}},initWawesEffect(e){let i={top:0,left:0};"function"==typeof e.getBoundingClientRect&&(i=e.getBoundingClientRect()),t("mousedown",e,{pageY:i.top+window.pageYOffset-document.documentElement.clientTop+e.clientHeight/2,pageX:i.left+window.pageXOffset-document.documentElement.clientLeft+e.clientWidth/2}),setTimeout(t,250,"mouseup",e)}},mounted(){this.setFocus(this.focus)}};var d=function(e,t,i,n,o,s,r,a){const l=("function"==typeof i?i.options:i)||{};return l.__file="fb-error-wrap.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),l._scopeId=n,l}({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-popover",{staticClass:"display-block",attrs:{placement:e.placement,open:e.open,"popover-class":["theme-error",{tooltip_modal:e.isModal}]}},[e._t("default"),e._v(" "),e.open?i("span",{staticClass:"tooltip__text",attrs:{slot:"popover"},on:{click:function(t){e.$emit("clickTooltip")}},slot:"popover"},[e.error?i("span",{staticClass:"errors__list"},e._l(e.error,function(t,n){return i("span",{key:n},[e._v(e._s(t))])}),0):e._e()]):e._e()],2)},staticRenderFns:[]},void 0,{name:"error-wrap",inject:{isModal:{from:"isModal",default:!1}},props:{open:{type:Boolean,default:!1},placement:{type:String,default:"top"},error:{type:Array}}},void 0,!1,void 0,void 0,void 0);let f=0;var h=function(e,t,i,n,o,s,r,a){const l=("function"==typeof i?i.options:i)||{};return l.__file="fb-input.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),l._scopeId=n,l}({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fb__input grid__cell",class:[{input_active:e.inActive||e.autoFilled,input_error:e.hasError,"animated shake":e.shake,disabled:e.isDisabled},e.cellClass]},[i("div",{class:["input",{input_disabled:e.isDisabled}]},[i("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("label",{staticClass:"input__label input__label_field",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),e._v(" "),"checkbox"===e.inputType?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,change:function(t){var i=e.value,n=t.target,o=!!n.checked;if(Array.isArray(i)){var s=e._i(i,null);n.checked?s<0&&(e.value=i.concat([null])):s>-1&&(e.value=i.slice(0,s).concat(i.slice(s+1)))}else e.value=o}}},"input",e.$attrs,!1)):"radio"===e.inputType?i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,change:function(t){e.value=null}}},"input",e.$attrs,!1)):i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:e.inputType},domProps:{value:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,input:function(t){t.target.composing||(e.value=t.target.value)}}},"input",e.$attrs,!1)),e._v(" "),"password"===e.$attrs.type?i("button",{staticClass:"input__eye",attrs:{type:"button","aria-label":e.$lang.SHOW_PASSWORD},on:{click:function(t){return t.preventDefault(),e.togglePassword(t)}}},[i("i",{class:["icon","password"===e.inputType?"icon-eye":"icon-eye2"]})]):e._e()])],1)])},staticRenderFns:[]},void 0,{name:"fb-input",inheritAttrs:!1,mixins:[u,c],components:{fbErrorWrap:d},props:{label:{type:String,default:""},spellcheck:{type:Boolean,default:!1}},data(){return{value:"",inputType:this.$attrs.type||"text",autoFilled:!1}},computed:{inputId(){return"input-"+f++}},methods:{togglePassword(){this.setFocus(),"password"===this.inputType?this.inputType="text":this.inputType="password"},autoFillHack(e){switch(e.animationName){case"autoFillStart":this.autoFilled=!0;break;case"autoFillEnd":this.autoFilled=!1}}}},void 0,!1,void 0,void 0,void 0);let m=0;var p=function(e,t,i,n,o,s,r,a){const l=("function"==typeof i?i.options:i)||{};return l.__file="fb-multi-block.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),l._scopeId=n,l}({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["grid__wrap multi-bl",{"multi-bl_disabled":this.isDisabled}]},[e._l(e.value,function(t,n){return i("div",{key:"slot-"+e.uniqIds[n],class:["grid__wrap",{"multi-bl__has-close":e.hasClose}]},[e._t("default",null,{id:n}),e._v(" "),e.hasClose?i("button",{staticClass:"multi-bl__clear",attrs:{"aria-label":"delete"},on:{click:function(t){t.preventDefault(),e.removeField(n)}}},[i("i",{staticClass:"icon icon-cross"})]):e._e()],2)}),e._v(" "),i("button",{staticClass:"multi-bl__add",on:{click:function(t){return t.preventDefault(),e.addField(t)}}},[e._v("\n    "+e._s(e.label||e.$lang.FORMS_MULTIBLOCK_ADD)+"\n  ")])],2)},staticRenderFns:[]},void 0,{name:"fb-multi-block",mixins:[u],props:{label:String},provide(){return{multiblock:this.multiblock?this.realName:this.name}},data(){return{value:[{}],uniqIds:[]}},computed:{hasClose(){return this.value.length>1},errors(){return this.$awesForms.getters.formErrorsOrFalse(this.formId)}},watch:{disabled:{handler:function(e){this.$awesForms.commit("toggleMultiblockState",{id:this.formId,multiblock:this.realName,value:e})},immediate:!0}},methods:{initField(){if(void 0!==this.computedValue&&this.computedValue.length){this.value=this.computedValue;for(let e in this.computedValue)this.uniqIds.push(m++)}else this.uniqIds.push(m++);this.createStoreInstance(),this.__unwatchValue=this.$watch("value",this.valueHandler)},addField(){this.isDisabled||(this.value.push({}),this.uniqIds.push(m++),this.updateTooltips())},removeField(e){this.isDisabled||(this.$delete(this.value,e),this.uniqIds.splice(e,1),this.updateTooltips())},resetValue(){this.value=[{}]},updateTooltips(){this.errors&&this.$nextTick(()=>{t("scroll",window)})}}},void 0,!1,void 0,void 0,void 0);var v=function(e,t,i,n,o,s,r,a){const l=("function"==typeof i?i.options:i)||{};return l.__file="fb-checkbox.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),l._scopeId=n,l}({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"grid__cell",class:[{checkbox_error:e.hasError},{checkbox_active:e.inActive},{grid__cell_padding:e.padding},e.cellClass]},[i("label",{class:["checkbox",e.themeClass,{checkbox_disabled:e.isDisabled}],attrs:{"data-awes":e.$options.name+"."+e.name}},[i("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:{"is-focusable":e.isFocusable,"in-focus":e.inFocus},attrs:{type:"checkbox",disabled:e.isDisabled},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},change:function(t){var i=e.value,n=t.target,o=!!n.checked;if(Array.isArray(i)){var s=e._i(i,null);n.checked?s<0&&(e.value=i.concat([null])):s>-1&&(e.value=i.slice(0,s).concat(i.slice(s+1)))}else e.value=o}}},"input",e.$attrs,!1)),e._v(" "),i("span",{staticClass:"checkbox__text"},[i("i",{ref:"switcher",staticClass:"icon icon-checkbox"}),e._v(" "),i("span",[e._v(e._s(e.label))])])])],1)])},staticRenderFns:[]},void 0,{name:"fb-checkbox",inheritAttrs:!1,mixins:[u,c],components:{fbErrorWrap:d},props:{label:{type:String,required:!0},padding:{type:Boolean,default:!0},theme:String},data(){return{value:!1}},computed:{themeClass(){return this.theme?`checkbox_${this.theme}`:null},isSwitcher(){return"s2"===this.theme}},methods:{},mounted(){},beforeDestroy(){}},void 0,!1,void 0,void 0,void 0);var b=function(e,t,i,n,o,s,r,a){const l=("function"==typeof i?i.options:i)||{};return l.__file="fb-select.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),l._scopeId=n,l}({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mselect grid__cell",class:[{mselect_active:e.inActive},{mselect_opened:e.isOpened},e.cellClass]},[i("span",{staticClass:"mselect__label"},[e._v(e._s(e.label||e.$lang.FORMS_SELECT_LABEL))]),e._v(" "),i("multiselect",{staticClass:"input__field",attrs:{"show-labels":!1,multiple:e.multiple,placeholder:e.placeholderText||e.$lang.FORMS_SELECT_PLACEHOLDER,options:e.selectOptions,label:"name","track-by":"value","hide-selected":!0},on:{open:function(t){e.isOpened=!0},close:function(t){e.isOpened=!1}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},staticRenderFns:[]},void 0,{name:"fb-select",inheritAttrs:!1,mixins:[u],props:{label:String,selectOptions:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0},placeholderText:String},data(){return{selected:[],isOpened:!1}},computed:{value:{get(){return this.multiple?this.selected.map(e=>e.value):this.selected.value},set(e){this.multiple?this.selected=this.selectOptions.filter(t=>e.includes(t.value)):this.selected=this.selectOptions.find(t=>e===t.value)}},hasValue(){return!!(this.multiple?this.value.length:this.value)},inActive(){return this.isOpened||this.hasValue}},methods:{resetValue(e){this.formId===e&&(this.value=[])}}},void 0,!1,void 0,void 0,void 0),g=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){!function(i,n){!function(e,t){function i(e){function t(t){var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,e.style.overflowY=t}function i(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function n(){if(0!==e.scrollHeight){var t=i(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+a+"px",l=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),n&&(document.documentElement.scrollTop=n)}}function o(){n();var i=Math.round(parseFloat(e.style.height)),o=window.getComputedStyle(e,null),s="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):e.offsetHeight;if(s<i?"hidden"===o.overflowY&&(t("scroll"),n(),s="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==o.overflowY&&(t("hidden"),n(),s="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),u!==s){u=s;var a=r("autosize:resized");try{e.dispatchEvent(a)}catch(e){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var a=null,l=null,u=null,c=function(){e.clientWidth!==l&&o()},d=function(t){window.removeEventListener("resize",c,!1),e.removeEventListener("input",o,!1),e.removeEventListener("keyup",o,!1),e.removeEventListener("autosize:destroy",d,!1),e.removeEventListener("autosize:update",o,!1),Object.keys(t).forEach(function(i){e.style[i]=t[i]}),s.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",d,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o,!1),window.addEventListener("resize",c,!1),e.addEventListener("input",o,!1),e.addEventListener("autosize:update",o,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",s.set(e,{destroy:d,update:o}),function(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),a="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(a)&&(a=0),o()}()}}function n(e){var t=s.get(e);t&&t.destroy()}function o(e){var t=s.get(e);t&&t.update()}var s="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(i){return t[e.indexOf(i)]},set:function(i,n){-1===e.indexOf(i)&&(e.push(i),t.push(n))},delete:function(i){var n=e.indexOf(i);n>-1&&(e.splice(n,1),t.splice(n,1))}}}(),r=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){r=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((a=function(e){return e}).destroy=function(e){return e},a.update=function(e){return e}):((a=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return i(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],n),e},a.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t.default=a,e.exports=t.default}(e,t)}()}));let w;var y=function(e,t,i,n,o,s,r,a){const l=("function"==typeof i?i.options:i)||{};return l.__file="fb-textarea.vue",l.render||(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),l._scopeId=n,l}({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fb__input grid__cell",class:[{input_active:e.inActive,input_error:e.hasError,"animated shake":e.shake,disabled:e.isDisabled},e.cellClass]},[i("div",{staticClass:"input",class:{input_disabled:e.isDisabled}},[i("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[i("span",{staticClass:"input__label"},[e._v(e._s(e.label))]),e._v(" "),i("textarea",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__textarea",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{disabled:e.isDisabled},domProps:{value:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},input:function(t){t.target.composing||(e.value=t.target.value)}}},"textarea",e.$attrs,!1))])],1)])},staticRenderFns:[]},void 0,{name:"fb-textarea",inheritAttrs:!1,mixins:[u,c],components:{fbErrorWrap:d},props:{label:{type:String,default:""},fixsize:{type:Boolean,default:!1}},data(){return{value:""}},methods:{setAutoResize(){this.fixsize||(g(this.$refs.element),w=this.$watch("value",this.updateAutoResize))},updateAutoResize(){this.$nextTick(()=>{g.update(this.$refs.element)})}},mounted(){this.setAutoResize()},beforeDestroy(){"function"==typeof w&&w()}},void 0,!1,void 0,void 0,void 0);const F={install:i};var k={FORMS_SEND:"Send",FORMS_CANCEL:"Cancel",FORMS_LOADING:"Loading...",FORMS_CONFIRM:"Are you shure? All not submitted data will be erased...",FORMS_MULTIBLOCK_ADD:"add",FORMS_SELECT_LABEL:"Select a value",FORMS_SELECT_PLACEHOLDER:"Pick a value"};let E=200;!function e(){window&&"AWES"in window?AWES.use({modules:{vue:{src:"https://unpkg.com/vue@2.5.21/dist/vue.js",cb(){Vue.config.ignoredElements.push("form-builder",/^fb-/)}},lodash:"https://unpkg.com/lodash@4.17.11/lodash.min.js",vuex:{src:"https://unpkg.com/vuex@2.5.0/dist/vuex.min.js",deps:["vue"]},"vue-shortkey":{src:"https://unpkg.com/vue-shortkey@3",deps:["vue"],cb(){Vue.use(VueShortkey)}},"v-tooltip":{src:"https://unpkg.com/v-tooltip@2.0.0-rc.33/dist/v-tooltip.min.js",deps:["vue"]},"vue-multiselect":{src:["https://unpkg.com/vue-multiselect@2.1.0/dist/vue-multiselect.min.js","https://unpkg.com/vue-multiselect@2.1.0/dist/vue-multiselect.min.css"],deps:["vue"],cb(){Vue.component("multiselect",window.VueMultiselect.default)}}},install(){AWES.lang=k,Vue.use(F),AWES._vueRoot&&AWES._vueRoot._isMounted&&n(AWES._vueRoot)}}):E?(E--,setTimeout(e,300)):console.error("Delayed loading failed, no AWES core found")}()}();
