/**
 * Bundle of AWES form-builder
 * Generated: 2019-01-23
 * Version: 0.1.14
 */

!function(){"use strict";function t(t,e,i,n,s,o,a,r,l,u){"function"==typeof a&&(l=r,r=a,a=!1);const c="function"==typeof i?i.options:i;t&&t.render&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),n&&(c._scopeId=n);let d;if(o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=d):e&&(d=a?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),d)if(c.functional){const t=c.render;c.render=function(e,i){return d.call(i),t(e,i)}}else{const t=c.beforeCreate;c.beforeCreate=t?[].concat(t,d):[d]}return i}function e(t,e,i){function n(t){if(!i||0===Object.keys(i).length)return t;for(let e in i)t[e]=i[e];return t}if(document.createEvent){const i=new Event(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(n(i))}else{const i=document.createEventObject();e.fireEvent("on"+t,n(i))}}function i(t){this.installed||(this.installed=!0,t.component("form-builder",l),t.component("fb-error-wrap",d),t.component("fb-input",b),t.component("fb-multi-block",y),t.component("fb-checkbox",S),t.component("fb-select",x),t.component("fb-textarea",T),t.component("fb-code",R),t.component("fb-company-slug",B),t.component("fb-auto-captcha",j),t.component("fb-radio-group",q),t.component("fb-slider",K),t.component("fb-phone",tt),t.component("fb-uploader",t=>{AWES.utils.loadModule("vue-simple-uploader","https://unpkg.com/vue-simple-uploader@0.5.6/dist/vue-uploader.js",()=>{t(nt)})}))}function n(t,e,i,n){let s=t.forms.find(t=>t.id==e);const o=t.forms.findIndex(t=>t.id==e);null===n?_.unset(s,i):_.set(s,i,n),Vue.set(t.forms,o,s)}let s=0;const o=[{type:"beforeunload",handler:"windowUnloadHandler"},{type:"popstate",handler:"popStateHandler"}];var a={name:"form-builder",props:{cancelbtn:{type:Boolean,default:!1},name:{type:String,default:()=>`form-builder-${s++}`},url:{type:String,required:!0},sendText:String,cancelText:String,loadingText:String,default:{type:Object,default:null},method:{type:String,default:"post",validator(t){return void 0===t||["get","put","post","delete","patch"].includes(t.toLowerCase())}},storeData:String,disabledDialog:{type:Boolean,default:!1},autoSubmit:{type:Boolean,default:!1}},inject:{modal:{from:"modal",default:!1}},provide(){return{formId:this.name,isModal:!!this.modal}},data(){return{loading:!1,serverData:null,serverDataErrors:null,showLoader:!1}},computed:{form(){return this.$awesForms.getters.form(this.name)},isEdited(){return this.$awesForms.getters.isEdited(this.name)},isBlocked(){return this.$awesForms.getters.isBlocked(this.name)},workingState(){return this.$awesForms.getters.workingState(this.name)},storeFormData(){return!!this.storeData&&this.$awesForms.state[this.storeData]},usedFormData(){return this.storeFormData?(this.default&&console.warn("Only VUEX STORE data will be used, despite DEFAULT data exists"),this.storeFormData):!!this.default&&this.default}},watch:{usedFormData:{handler:function(t){this.form||(this.createForm(),t&&this.$awesForms.commit("setDefaultData",{id:this.name,fields:t}))},deep:!0,immediate:!0},loading(t){this.$awesForms.commit("toggleFormLoading",{id:this.name,isLoading:t})},serverData(t){t&&(this.storeData?this.$awesForms.commit("setData",{param:this.storeData,data:t.data}):this.$awesForms.commit("setDefaultData",{id:this.name,fields:t.data}),this.$awesForms.commit("resetFormEdited",this.name),this.serverData=null,this.$emit("sended",t.data),this.modal&&this.close(this.modal.name))},serverDataErrors(t){t&&(this.$awesForms.commit("setErrors",{id:this.name,errors:t}),this.serverDataErrors=null,this.disabledDialog||this.addUnloadHandlers())}},methods:{createForm(){this.$awesForms.commit("createForm",{id:this.name,url:this.url,method:this.method,storeData:this.storeData})},send(){this.loading||this.isBlocked||(this.$listeners.hasOwnProperty("send")?this.$emit("send",this.workingState):(this.removeUnloadHandlers(),this.$awesForms.commit("resetErrors",this.name),this.loading=!0,AWES.on("core:ajax",this.onRequestProcess),AWES.ajax(this.workingState,this.url,this.method).then(t=>{this.serverData=t}).catch(t=>{this.serverDataErrors=t}).finally(()=>{this.loading=!1;this.showLoader=!1;AWES.off("core:ajax",this.onRequestProcess)})))},onRequestProcess(t){this.showLoader=t.detail},addUnloadHandlers(){o.forEach(t=>{window.addEventListener(t.type,this[t.handler],!1)})},removeUnloadHandlers(){o.forEach(t=>{window.removeEventListener(t.type,this[t.handler])})},checkCloseAllowed(){if(this.disabledDialog)return!0;if(this.isEdited){const t=confirm(this.$lang.FORMS_CONFIRM);return t}return!0},popStateHandler(){if(this.removeUnloadHandlers(),this.checkCloseAllowed())this.modal&&this.close();else{const t=this.modal?this.modal.hash:"",e=location.href+t;history.pushState({modal:t},document.title,e),this.addUnloadHandlers()}},windowUnloadHandler(t){return!(!this.disabledDialog&&this.isEdited)||(t.returnValue=this.$lang.FORMS_CONFIRM,this.$lang.FORMS_CONFIRM)},close(){this.checkCloseAllowed()&&(this.removeUnloadHandlers(),AWES.off(`modal::${this.modal.name}.before-close`,this.preventModalClose),AWES.emit(`modal::${this.modal.name}.close`))},preventModalClose(t){t.detail.preventClose(),this.close()}},created(){this.$root.$on("forms:submit",t=>{this.name===t&&this.send()}),this.modal&&(this.__unwatchModalPrevent=this.$watch("isEdited",t=>{AWES.on(`modal::${this.modal.name}.before-close`,this.preventModalClose)}))},mounted(){this.addUnloadHandlers(),this.autoSubmit&&(this._unwatchEdit=this.$watch("form.editCounter",this.send))},beforeDestroy(){this.removeUnloadHandlers(),"function"==typeof this.__unwatchModalPrevent&&this.__unwatchModalPrevent(),this.$awesForms.commit("deleteForm",this.name),"function"==typeof this._unwatchEdit&&this._unwatchEdit(),AWES.off(`modal::${this.modal.name}.before-close`,this.preventModalClose)}};const r=a;a.__file="form-builder.vue";var l=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"form-builder",class:{modal__form:t.modal},attrs:{action:t.url,method:t.method}},[i("div",{staticClass:"grid grid_forms"},[t._t("default",null,{fields:t.workingState})],2),t._v(" "),t.autoSubmit?t._e():i("div",{class:t.modal?"line-btns":null},[i("div",{class:t.modal?"line-btns__wrap":"line-btns"},[i("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],staticClass:"btn btn-send waves-effect waves-button",class:{"loading-inline":t.showLoader},attrs:{disabled:!t.isEdited||t.isBlocked,"data-loading":t.$lang.FORMS_LOADING,type:"submit","data-awes":"modal_button_ok"},on:{shortkey:t.send,click:function(e){return e.preventDefault(),t.send(e)}},nativeOn:{click:function(e){return e.preventDefault(),t.send(e)}}},[t._v("\n          "+t._s(t.sendText||t.$lang.FORMS_SEND)+" "),i("span",{staticClass:"g-res--tablet-lg_n"},[t._v("(ctrl+enter)")])]),t._v(" "),t.modal||t.cancelbtn?i("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],staticClass:"btn waves-effect waves-button",class:{btn_transparent:t.cancelbtn},attrs:{type:"button"},on:{shortkey:t.close,click:function(e){e.preventDefault(),t.modal?t.close():t.$emit("cancel")}}},[t._v("\n          "+t._s(t.cancelText||t.$lang.FORMS_CANCEL)+"\n        ")]):t._e(),t._v(" "),t._t("buttons-after")],2)])])},staticRenderFns:[]},void 0,r,void 0,!1,void 0,void 0,void 0),u={name:"error-wrap",inject:{isModal:{from:"isModal",default:!1}},props:{open:{type:Boolean,default:!1},placement:{type:String,default:"top"},error:{type:Array}}};const c=u;u.__file="fb-error-wrap.vue";var d=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-popover",{staticClass:"display-block",attrs:{placement:t.placement,open:t.open,"popover-class":["theme-error",{tooltip_modal:t.isModal}]}},[t._t("default"),t._v(" "),t.open?i("span",{staticClass:"tooltip__text",attrs:{slot:"popover"},on:{click:function(e){t.$emit("clickTooltip")}},slot:"popover"},[t.error?i("span",{staticClass:"errors__list"},t._l(t.error,function(e,n){return i("span",{key:n},[t._v(t._s(e))])}),0):t._e()]):t._e()],2)},staticRenderFns:[]},void 0,c,void 0,!1,void 0,void 0,void 0),f={props:{name:{type:String,required:!0},id:Number,disabled:{type:Boolean,default:!1},cell:{type:[String,Number],validator(t){return["2","3"].includes(t.toString())}}},inject:{formId:{from:"formId",default:!1},isModal:{from:"isModal",default:!1},multiblock:{from:"multiblock",default:!1}},data(){return{tooltip:!1,hasError:!1}},computed:{realName(){return this.multiblock?`${this.multiblock}.${this.id}.${this.name}`:this.name},computedValue(){return this.$awesForms.getters.fieldValue(this.formId,this.realName)},formLoading(){return this.$awesForms.getters.loading(this.formId)},inActive(){return!(!this.inFocus&&!this.value)},isDisabled(){return this.formLoading||this.disabled||this.isMultiblockDisabled},isMultiblockDisabled(){return!!this.multiblock&&this.$awesForms.getters.multiblockDisabled(this.formId,this.multiblock)},cellClass(){return this.cell?"grid__cell_"+this.cell:""},error(){return this.$awesForms.getters.fieldError(this.formId,this.realName)},firstErrorField(){return this.$awesForms.getters.firstErrorField(this.formId)},shake(){return!this.formLoading&&this.tooltip}},watch:{error:{handler:function(t){t?(this.tooltip=!0,this.hasError=!0,this.$refs.element&&this.$refs.element.addEventListener("input",this.resetError,!1),"function"==typeof this.setFocus&&this.$nextTick(this.checkFocus)):(this.tooltip=!1,this.hasError=!1,this.resetInputWatcher())},immediate:!0}},methods:{createStoreInstance(){this.$awesForms.commit("setField",{id:this.formId,fieldName:this.realName,value:this.value,initial:!0})},initField(){void 0!==this.computedValue&&(this.value=this.computedValue),this.createStoreInstance(),this.__unwatchValue=this.$watch("value",this.valueHandler),this.multiblock&&(this.__unwatchId=this.$watch("id",this.idHandler))},idHandler(t,e){const i=`${this.multiblock}.${e}.${this.name}`,n=this.$awesForms.getters.fieldError(this.formId,i);n&&this.$awesForms.commit("renameError",{id:this.formId,oldName:i,newName:this.realName,message:n})},valueHandler(t){this.$awesForms.commit("setField",{id:this.formId,fieldName:this.realName,value:t})},clickTooltip(){this.tooltip=!1,"function"==typeof this.setFocus&&this.setFocus()},resetError(){this.tooltip=!1,this.$awesForms.commit("resetError",{id:this.formId,fieldName:this.realName}),this.resetInputWatcher()},resetInputWatcher(){this.$refs.element&&this.$refs.element.removeEventListener("input",this.resetError)},resetValue(t){this.formId===t&&(this.value=void 0)},checkFocus(){this.firstErrorField===this.realName&&(setTimeout(this.setFocus,0),this.$awesForms.commit("resetFirstErrorField",this.formId))}},created(){this.initField(),this.$root.$on("forms:reset",this.resetValue)},beforeDestroy(){this.multiblock&&(this.resetError(),this.$awesForms.commit("unsetRealField",{id:this.formId,fieldName:this.realName})),this.__unwatchValue(),"function"==typeof this.__unwatchId&&this.__unwatchId(),this.resetInputWatcher(),this.$root.$off("forms:reset",this.resetValue)}},h={props:{enterSkip:{type:Boolean,default:!1},focus:{type:Boolean,default:!1}},data(){return{inFocus:this.focus}},computed:{isFocusable(){return!this.enterSkip&&!this.disabled&&this.formId}},methods:{focusNext(t){try{const e=t.target.closest("form"),i=e.querySelectorAll(".is-focusable"),n=Array.from(i).findIndex(e=>e===t.target)+1;if(n<i.length)i[n].focus();else{t.target.blur();const i=e.querySelector('[type="submit"]');this.$nextTick(()=>{i.click();this.initWawesEffect(i)})}}catch(t){console.warn("Error while setting focus"),console.error(t)}},setFocus(t){try{let e=!1!==t?"focus":"blur";this.$refs.element[e]()}catch(t){console.warn("Error while setting focus"),console.error(t)}},initWawesEffect(t){let i={top:0,left:0};"function"==typeof t.getBoundingClientRect&&(i=t.getBoundingClientRect()),e("mousedown",t,{pageY:i.top+window.pageYOffset-document.documentElement.clientTop+t.clientHeight/2,pageX:i.left+window.pageXOffset-document.documentElement.clientLeft+t.clientWidth/2}),setTimeout(e,250,"mouseup",t)}},mounted(){this.setFocus(this.focus)}};let p=0;var m={name:"fb-input",inheritAttrs:!1,mixins:[f,h],props:{label:{type:String,default:""},spellcheck:{type:Boolean,default:!1},mask:String},data(){return{value:"",inputType:this.$attrs.type||"text",autoFilled:!1}},computed:{inputId(){return"input-"+p++}},methods:{togglePassword(){this.setFocus(),"password"===this.inputType?this.inputType="text":this.inputType="password"},autoFillHack(t){switch(t.animationName){case"autoFillStart":this.autoFilled=!0;break;case"autoFillEnd":this.autoFilled=!1}}}};const v=m;m.__file="fb-input.vue";var b=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb__input grid__cell",class:[{input_active:t.inActive||t.autoFilled,input_error:t.hasError,"animated shake":t.shake,disabled:t.isDisabled},t.cellClass]},[i("div",{class:["input",{input_disabled:t.isDisabled}]},[i("fb-error-wrap",{attrs:{open:t.tooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("label",{staticClass:"input__label input__label_field",attrs:{for:"#"+t.inputId}},[t._v(t._s(t.label))]),t._v(" "),"checkbox"===t.inputType&&t.mask?i("input",t._b({directives:[{name:"mask",rawName:"v-mask",value:t.mask,expression:"mask"},{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{input__field_password:"password"===t.$attrs.type}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,disabled:t.isDisabled,spellcheck:t.spellcheck,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},animationstart:t.autoFillHack,change:function(e){var i=t.value,n=e.target,s=!!n.checked;if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.value=i.concat([null])):o>-1&&(t.value=i.slice(0,o).concat(i.slice(o+1)))}else t.value=s}}},"input",t.$attrs,!1)):"radio"===t.inputType&&t.mask?i("input",t._b({directives:[{name:"mask",rawName:"v-mask",value:t.mask,expression:"mask"},{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{input__field_password:"password"===t.$attrs.type}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,disabled:t.isDisabled,spellcheck:t.spellcheck,type:"radio"},domProps:{checked:t._q(t.value,null)},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},animationstart:t.autoFillHack,change:function(e){t.value=null}}},"input",t.$attrs,!1)):t.mask?i("input",t._b({directives:[{name:"mask",rawName:"v-mask",value:t.mask,expression:"mask"},{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{input__field_password:"password"===t.$attrs.type}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,disabled:t.isDisabled,spellcheck:t.spellcheck,type:t.inputType},domProps:{value:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},animationstart:t.autoFillHack,input:function(e){e.target.composing||(t.value=e.target.value)}}},"input",t.$attrs,!1)):"checkbox"===t.inputType?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{input__field_password:"password"===t.$attrs.type}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,disabled:t.isDisabled,spellcheck:t.spellcheck,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},animationstart:t.autoFillHack,change:function(e){var i=t.value,n=e.target,s=!!n.checked;if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.value=i.concat([null])):o>-1&&(t.value=i.slice(0,o).concat(i.slice(o+1)))}else t.value=s}}},"input",t.$attrs,!1)):"radio"===t.inputType?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{input__field_password:"password"===t.$attrs.type}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,disabled:t.isDisabled,spellcheck:t.spellcheck,type:"radio"},domProps:{checked:t._q(t.value,null)},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},animationstart:t.autoFillHack,change:function(e){t.value=null}}},"input",t.$attrs,!1)):i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{input__field_password:"password"===t.$attrs.type}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,disabled:t.isDisabled,spellcheck:t.spellcheck,type:t.inputType},domProps:{value:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},animationstart:t.autoFillHack,input:function(e){e.target.composing||(t.value=e.target.value)}}},"input",t.$attrs,!1)),t._v(" "),"password"===t.$attrs.type?i("button",{staticClass:"input__eye",attrs:{type:"button","aria-label":t.$lang.SHOW_PASSWORD},on:{click:function(e){return e.preventDefault(),t.togglePassword(e)}}},[i("i",{class:["icon","password"===t.inputType?"icon-eye":"icon-eye2"]})]):t._e()])],1)])},staticRenderFns:[]},void 0,v,void 0,!1,void 0,void 0,void 0);let g=0;var k={name:"fb-multi-block",mixins:[f],props:{label:String},provide(){return{multiblock:this.multiblock?this.realName:this.name}},data(){return{value:[{}],uniqIds:[]}},computed:{hasClose(){return this.value.length>1},errors(){return this.$awesForms.getters.formErrorsOrFalse(this.formId)}},watch:{disabled:{handler:function(t){this.$awesForms.commit("toggleMultiblockState",{id:this.formId,multiblock:this.realName,value:t})},immediate:!0}},methods:{initField(){if(void 0!==this.computedValue&&this.computedValue.length){this.value=this.computedValue;for(let t in this.computedValue)this.uniqIds.push(g++)}else this.uniqIds.push(g++);this.createStoreInstance(),this.__unwatchValue=this.$watch("value",this.valueHandler)},addField(){this.isDisabled||(this.value.push({}),this.uniqIds.push(g++),this.updateTooltips())},removeField(t){this.isDisabled||(this.$delete(this.value,t),this.uniqIds.splice(t,1),this.updateTooltips())},resetValue(){this.value=[{}]},updateTooltips(){this.errors&&this.$nextTick(()=>{e("scroll",window)})}}};const w=k;k.__file="fb-multi-block.vue";var y=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["grid__wrap multi-bl",{"multi-bl_disabled":this.isDisabled}]},[t._l(t.value,function(e,n){return i("div",{key:"slot-"+t.uniqIds[n],class:["grid__wrap",{"multi-bl__has-close":t.hasClose}]},[t._t("default",null,{id:n}),t._v(" "),t.hasClose?i("button",{staticClass:"multi-bl__clear",attrs:{"aria-label":"delete"},on:{click:function(e){e.preventDefault(),t.removeField(n)}}},[i("i",{staticClass:"icon icon-cross"})]):t._e()],2)}),t._v(" "),i("button",{staticClass:"multi-bl__add",on:{click:function(e){return e.preventDefault(),t.addField(e)}}},[t._v("\n    "+t._s(t.label||t.$lang.FORMS_MULTIBLOCK_ADD)+"\n  ")])],2)},staticRenderFns:[]},void 0,w,void 0,!1,void 0,void 0,void 0),F={name:"fb-checkbox",inheritAttrs:!1,mixins:[f,h],props:{label:{type:String,required:!0},padding:{type:Boolean,default:!0},theme:String},data(){return{value:!1}},computed:{themeClass(){return this.theme?`checkbox_${this.theme}`:null},isSwitcher(){return"s2"===this.theme}},methods:{enableSwitcher(){this.__hammer=new Hammer.Manager(this.$refs.switcher,{recognizers:[[Hammer.Swipe,{threshold:5,velocity:.1,direction:Hammer.DIRECTION_HORIZONTAL}]]}),this.__hammer.on("swipeleft",()=>{this.value=!1}),this.__hammer.on("swiperight",()=>{this.value=!0})}},mounted(){this.isSwitcher&&this.enableSwitcher()},beforeDestroy(){this.isSwitcher&&(this.__hammer.destroy(),delete this.__hammer)}};const E=F;F.__file="fb-checkbox.vue";var S=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid__cell",class:[{checkbox_error:t.hasError},{checkbox_active:t.inActive},{grid__cell_padding:t.padding},t.cellClass]},[i("label",{class:["checkbox",t.themeClass,{checkbox_disabled:t.isDisabled}],attrs:{"data-awes":t.$options.name+"."+t.name}},[i("fb-error-wrap",{attrs:{open:t.tooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:{"is-focusable":t.isFocusable,"in-focus":t.inFocus},attrs:{type:"checkbox",disabled:t.isDisabled},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},change:function(e){var i=t.value,n=e.target,s=!!n.checked;if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.value=i.concat([null])):o>-1&&(t.value=i.slice(0,o).concat(i.slice(o+1)))}else t.value=s}}},"input",t.$attrs,!1)),t._v(" "),i("span",{staticClass:"checkbox__text"},[i("i",{ref:"switcher",staticClass:"icon icon-checkbox"}),t._v(" "),i("span",[t._v(t._s(t.label))])])])],1)])},staticRenderFns:[]},void 0,E,void 0,!1,void 0,void 0,void 0),$={name:"fb-select",inheritAttrs:!1,mixins:[f],props:{label:String,selectOptions:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0},placeholderText:String},data(){return{selected:[],isOpened:!1}},computed:{value:{get(){return this.multiple?this.selected.map(t=>t.value):this.selected.value},set(t){this.multiple?this.selected=this.selectOptions.filter(e=>t.includes(e.value)):this.selected=this.selectOptions.find(e=>t===e.value)}},hasValue(){return!!(this.multiple?this.value.length:this.value)},inActive(){return this.isOpened||this.hasValue}},methods:{resetValue(t){this.formId===t&&(this.value=[])}}};const C=$;$.__file="fb-select.vue";var x=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mselect grid__cell",class:[{mselect_active:t.inActive},{mselect_opened:t.isOpened},t.cellClass]},[i("span",{staticClass:"mselect__label"},[t._v(t._s(t.label||t.$lang.FORMS_SELECT_LABEL))]),t._v(" "),i("multiselect",{staticClass:"input__field",attrs:{"show-labels":!1,multiple:t.multiple,placeholder:t.placeholderText||t.$lang.FORMS_SELECT_PLACEHOLDER,options:t.selectOptions,label:"name","track-by":"value","hide-selected":!0},on:{open:function(e){t.isOpened=!0},close:function(e){t.isOpened=!1}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},staticRenderFns:[]},void 0,C,void 0,!1,void 0,void 0,void 0),D=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){!function(i,n){!function(t,e){function i(t){function e(e){var i=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=i,t.style.overflowY=e}function i(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function n(){if(0!==t.scrollHeight){var e=i(t),n=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+r+"px",l=t.clientWidth,e.forEach(function(t){t.node.scrollTop=t.scrollTop}),n&&(document.documentElement.scrollTop=n)}}function s(){n();var i=Math.round(parseFloat(t.style.height)),s=window.getComputedStyle(t,null),o="content-box"===s.boxSizing?Math.round(parseFloat(s.height)):t.offsetHeight;if(o<i?"hidden"===s.overflowY&&(e("scroll"),n(),o="content-box"===s.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==s.overflowY&&(e("hidden"),n(),o="content-box"===s.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),u!==o){u=o;var r=a("autosize:resized");try{t.dispatchEvent(r)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var r=null,l=null,u=null,c=function(){t.clientWidth!==l&&s()},d=function(e){window.removeEventListener("resize",c,!1),t.removeEventListener("input",s,!1),t.removeEventListener("keyup",s,!1),t.removeEventListener("autosize:destroy",d,!1),t.removeEventListener("autosize:update",s,!1),Object.keys(e).forEach(function(i){t.style[i]=e[i]}),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",d,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",s,!1),window.addEventListener("resize",c,!1),t.addEventListener("input",s,!1),t.addEventListener("autosize:update",s,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:d,update:s}),function(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),r="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(r)&&(r=0),s()}()}}function n(t){var e=o.get(t);e&&e.destroy()}function s(t){var e=o.get(t);e&&e.update()}var o="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(i){return e[t.indexOf(i)]},set:function(i,n){-1===t.indexOf(i)&&(t.push(i),e.push(n))},delete:function(i){var n=t.indexOf(i);n>-1&&(t.splice(n,1),e.splice(n,1))}}}(),a=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){a=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var r=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((r=function(t){return t}).destroy=function(t){return t},r.update=function(t){return t}):((r=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return i(t)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],n),t},r.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.default=r,t.exports=e.default}(t,e)}()}));let N;var O={name:"fb-textarea",inheritAttrs:!1,mixins:[f,h],props:{label:{type:String,default:""},fixsize:{type:Boolean,default:!1}},data(){return{value:""}},methods:{setAutoResize(){this.fixsize||(D(this.$refs.element),N=this.$watch("value",this.updateAutoResize))},updateAutoResize(){this.$nextTick(()=>{D.update(this.$refs.element)})}},mounted(){this.setAutoResize()},beforeDestroy(){"function"==typeof N&&N()}};const A=O;O.__file="fb-textarea.vue";var T=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb__input grid__cell",class:[{input_active:t.inActive,input_error:t.hasError,"animated shake":t.shake,disabled:t.isDisabled},t.cellClass]},[i("div",{staticClass:"input",class:{input_disabled:t.isDisabled}},[i("fb-error-wrap",{attrs:{open:t.tooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("span",{staticClass:"input__label"},[t._v(t._s(t.label))]),t._v(" "),i("textarea",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__textarea",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus}],attrs:{disabled:t.isDisabled},domProps:{value:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},input:function(e){e.target.composing||(t.value=e.target.value)}}},"textarea",t.$attrs,!1))])],1)])},staticRenderFns:[]},void 0,A,void 0,!1,void 0,void 0,void 0),I={name:"fb-code",mixins:[f,h],props:{length:{type:Number,default:6},autoSubmit:{type:Boolean,default:!0}},data(){return{inputValue:[],inFocus:[]}},computed:{value:{get(){return this.inputValue.join("")},set(t){t=t.trim().replace(/\D/g,"").substr(0,this.length),this.inputValue=t.split("")}},hasCaptchaError(){return this.$awesForms.getters.hasCaptchaError(this.formId)}},watch:{error(t){t&&t.length?(this.value="",this.$refs.fields.forEach(t=>{t.addEventListener("input",this.resetError,!1)}),this.$nextTick(()=>{this.setFocus()})):this.$refs.fields.forEach(t=>{t.removeEventListener("input",this.resetError)})},hasCaptchaError(t){t||this.autoSubmitForm(this.value)}},methods:{setFocus(t=0){if("boolean"==typeof t&&!0===t)return void this.$refs.fields[0].focus();if("number"==typeof t){t>=this.length&&(t=this.length-1);const e=this.$refs.fields[t];setTimeout(()=>{e.focus();e.setSelectionRange(0,e.value.length)},10)}},onInput(t,e){const i=t.target.value.replace(/\D/g,"");t.target.value=i,this.$set(this.inputValue,e,i),this.isEmpty(e)||e===this.length-1||this.setFocus(e+1)},onBackspace(t,e){this.setFocus(e-1)},onLeft(t,e){this.setFocus(e-1)},onRight(t,e){this.setFocus(e+1)},onPaste(t){this.error&&this.error.length&&this.resetError(),this.value=t.clipboardData.getData("text")},isEmpty(t){return""===this.inputValue[t]||void 0===this.inputValue[t]},autoSubmitForm(t){this.hasCaptchaError||t.length===this.length&&this.$root.$emit("forms:submit",this.formId)}},created(){for(let t=0;t<this.length;t++)this.inFocus.push(!(0!==t||!this.focus)),this.inputValue.push("");this.autoSubmit&&(this.__unwatchFormSubmit=this.$watch("value",this.autoSubmitForm))},beforeDestroy(){this.$refs.fields.forEach(t=>{t.removeEventListener("input",this.resetError)}),this.__unwatchFormSubmit&&this.__unwatchFormSubmit()}};const L=I;I.__file="fb-code.vue";var R=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["keycode",{"animated shake":t.shake}]},[i("div",{staticClass:"keycode__block",class:{input_disabled:t.isDisabled}},[i("fb-error-wrap",{attrs:{open:t.tooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("div",{staticClass:"keycode__wrap",attrs:{id:"keywrap"}},t._l(t.length,function(e){return i("div",{staticClass:"keycode__ffield"},[i("input",{ref:"fields",refInFor:!0,class:["keycode__field",{"is-focusable":t.isFocusable,"in-focus":t.inFocus[e-1]}],attrs:{type:"tel",inputmode:"numeric",pattern:"[0-9]*",maxlength:"1",disabled:t.isDisabled},domProps:{value:t.inputValue[e-1]},on:{focus:function(i){t.inFocus[e-1]=!0},blur:function(i){t.inFocus[e-1]=!1},keydown:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},function(i){if(!("button"in i)&&t._k(i.keyCode,"backspace",void 0,i.key,void 0))return null;e>1&&t.onBackspace(i,e-1)},function(i){return"button"in i||!t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?"button"in i&&0!==i.button?null:void(e>1&&t.onLeft(i,e-1)):null},function(i){return"button"in i||!t._k(i.keyCode,"right",39,i.key,["Right","ArrowRight"])?"button"in i&&2!==i.button?null:void(e<t.length&&t.onRight(i,e-1)):null}],input:function(i){t.onInput(i,e-1)},paste:function(e){return e.preventDefault(),t.onPaste(e)}}})])}),0)])],1)])},staticRenderFns:[]},void 0,L,void 0,!1,void 0,void 0,void 0),M={companySlug:{domain:"awescrm.de",length:32,ulrifyOptions:{spaces:"-",toLower:!0,trim:!0,addEToUmlauts:!0,nonPrintable:"",failureOutput:""}}},V={name:"fb-company-slug",extends:b,props:{domain:String,input:{type:String,required:!0},maxLength:Number},data(){return{watchInput:!0}},computed:{fromName(){return this.multiblock?`${this.multiblock}.${this.id}.${this.input}`:this.input},fromValue(){return this.$awesForms.getters.fieldValue(this.formId,this.fromName)}},watch:{fromValue(t){this.watchInput&&(this.value=this.noramlizeUrl(t))}},methods:{noramlizeUrl(t){return this._toUrl(t).substr(0,this.maxlength)},toggleWatcher(t){""===t.target.value?this.watchInput=!0:this.watchInput&&(this.watchInput=!1)},slugBlur(t){this.inFocus=!1,this.watchInput||(this.value=this.noramlizeUrl(t.target.value))}},beforeCreate(){this._config=Object.assign({},M.companySlug,AWES._config.companySlug),this._toUrl=Urlify.create(this._config.ulrifyOptions)}};const P=V;V.__file="fb-company-slug.vue";var B=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb__input fb__input_slug grid__cell",class:[{input_active:t.inActive,input_error:t.hasError,"animated shake":t.shake,disabled:t.isDisabled},t.cellClass]},[i("div",{class:["input",{input_disabled:t.isDisabled}]},[i("fb-error-wrap",{attrs:{open:t.tooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("div",{staticClass:"fb__input-wrap"},[i("span",{staticClass:"fb__input-inner"},[i("label",{staticClass:"input__label",attrs:{for:"#"+t.inputId}},[t._v(t._s(t.label))]),t._v(" "),i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus}],attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,maxlength:t.maxLength||t._config.length,type:"text",disabled:t.isDisabled},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},t.toggleWatcher],focus:function(e){t.inFocus=!0},blur:t.slugBlur,keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null}}},"input",t.$attrs,!1))]),t._v(" "),i("span",{staticClass:"fb__input-domain"},[t._v("."+t._s(t.domain||t._config.domain))])])])],1)])},staticRenderFns:[]},void 0,P,void 0,!1,void 0,void 0,void 0),z={name:"fb-auto-captcha",mixins:[f],props:{show:{type:Boolean,default:!1},name:{default:"g-recaptcha-response"}},data(){return{value:null,sitekey:AWES_CONFIG.reCaptchaSiteKey,serverError:!1,reset:!1}},computed:{realName(){return"g-recaptcha-response"},isShow(){return this.show||this.serverError},theme(){try{let t=this.$store.state.theme;return t&&1===t.theme_dark?"dark":"light"}catch(t){return"light"}}},watch:{error(t){t&&t.length&&(this.serverError=!0)},formLoading(t){!t&&this.isShow&&this.$nextTick(()=>{this.$refs.recaptcha.reset()})},theme(){this.isShow&&(this.reset=!0,this.$nextTick(()=>{this.reset=!1}))}},methods:{onVerify(t){this.value=t,this.resetError()},manageCaptchaScript(t){switch(t){case"add":if(!document.getElementById("g-captcha-script")){const t=document.createElement("script");t.setAttribute("id","g-captcha-script"),t.setAttribute("src","https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit"),document.head.appendChild(t)}break;case"remove":document.getElementById("g-captcha-script").remove()}}},created(){this.$isServer||this.manageCaptchaScript("add")},beforeDestroy(){this.manageCaptchaScript("remove")}};const U=z;z.__file="fb-auto-captcha.vue";var j=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow&&!t.reset?i("div",{class:["grid__cell",t.cellClass]},[i("fb-error-wrap",{attrs:{open:t.tooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("vue-recaptcha",{ref:"recaptcha",staticClass:"re-captcha",attrs:{sitekey:t.sitekey,theme:t.theme},on:{verify:t.onVerify,expired:function(e){t.value=null}}})],1)],1):t._e()},staticRenderFns:[]},void 0,U,void 0,!1,void 0,void 0,void 0),H={name:"fb-radio-group",mixins:[f,h],props:{box:{type:Boolean,default:!1},items:Array},data(){return{value:null,inFocus:[]}},methods:{checkActive(t){return t.value?this.value===t.value:this.value===t.toString()},setFocus(t=!0){"number"==typeof t?this.$refs.elements[t].focus():!0===t&&this.$refs.elements[0].focus()}},created(){for(let t=0;t<this.items.length;t++)this.inFocus.push(!(0!==t||!this.focus))}};const W=H;H.__file="fb-radio-group.vue";var q=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.items&&t.items.length?i("div",{staticClass:"grid__cell",class:[{"animated shake":t.shake},t.cellClass]},[i("fb-error-wrap",{attrs:{open:t.tooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("span",{class:["display-block",{"fc-radio":t.box}]},t._l(t.items,function(e,n){return i("label",{key:n,class:[{"fc-radio__box":t.box,"is-checked":t.checkActive(e)}]},[i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"fields",refInFor:!0,class:["fc-radio__field",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus}],attrs:{type:"radio","data-awes":t.$options.name+"."+t.name,disabled:t.isDisabled},domProps:{value:e.value?e.value:e.toString(),checked:t._q(t.value,e.value?e.value:e.toString())},on:{focus:function(e){t.$set(t.inFocus,n,!0)},blur:function(e){t.$set(t.inFocus,n,!1)},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},change:function(i){t.value=e.value?e.value:e.toString()}}},"input",t.$attrs,!1)),t._v(" "),t._t("default",[i("span",{staticClass:"fc-radio__text"},[t._v(t._s(e.name?e.name:e.toString()))])],{item:e,checked:t.checkActive(e),focused:t.inFocus[n]})],2)}),0)])],1):t._e()},staticRenderFns:[]},void 0,W,void 0,!1,void 0,void 0,void 0);let X=0;var Y={name:"fb-slider",inheritAttrs:!1,mixins:[f,h],props:{label:{type:String,default:""},min:{type:[Number,String],default:0},max:{type:[Number,String],default:100}},data(){return{value:0,inputType:this.$attrs.type||"text",autoFilled:!1}},computed:{inputId(){return"slider-"+X++},percent(){return Math.round(Number(this.value)/Number(this.max)*100)}}};const G=Y;Y.__file="fb-slider.vue";var K=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb__input grid__cell",class:[{input_active:t.inActive,input_error:t.hasError,"animated shake":t.shake,disabled:t.isDisabled},t.cellClass]},[i("div",{class:["input","input_range",{input_disabled:t.isDisabled}]},[i("fb-error-wrap",{attrs:{open:t.tooltip,error:t.error},on:{clickTooltip:t.clickTooltip}},[i("div",{staticClass:"input__range-wrap"},[i("div",{staticClass:"input__range-left"},[i("label",{staticClass:"input__label input__label_field",attrs:{for:"#"+t.inputId}},[t._v(t._s(t.label))]),t._v(" "),i("span",{staticClass:"input__range-value"},[t._v(t._s(t.percent)+" %")])]),t._v(" "),i("div",{staticClass:"input__range-right"},[i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"element",class:["input__range",{"is-focusable":t.isFocusable},{"in-focus":t.inFocus},{input__field_password:"password"===t.$attrs.type}],style:"--percent: "+t.percent+"%",attrs:{id:t.inputId,"data-awes":t.$options.name+"."+t.name,type:"range",disabled:t.isDisabled},domProps:{value:t.value},on:{focus:function(e){t.inFocus=!0},blur:function(e){t.inFocus=!1},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.focusNext(e)):null},__r:function(e){t.value=e.target.value}}},"input",t.$attrs,!1))])])])],1)])},staticRenderFns:[]},void 0,G,void 0,!1,void 0,void 0,void 0);let Z=20;var J={name:"fb-phone",mixins:[f,h],components:{VueTelInput:t=>{const e=["https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.js","https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.css"];return AWES.utils.loadModule("vue-tel-input",e,()=>{t(VueTelInput.default)})}},data(){return{nativeTelInput:!1,value:""}},methods:{setFocusWatcher(){this.$refs.tel&&(this.nativeTelInput=this.$refs.tel.$refs.input,this.nativeTelInput.addEventListener("focus",()=>{this.inFocus=!0}),this.setFocusableClass(),this.setFocusClass())},setFocusClass(){this.nativeTelInput.classList[this.inFocus?"add":"remove"]("in-focus"),Z=20},setFocusableClass(){this.nativeTelInput.classList[this.isFocusable?"add":"remove"]("is-focusable"),Z=20},setFocus(t){try{let e=!1!==t?"focus":"blur";this.nativeTelInput[e]()}catch(e){Z&&(Z--,setTimeout(()=>{this.setFocus(t)},1e3))}},checkFocus(){this.inFocus||this.setFocus()}},watch:{inFocus(){try{this.setFocusClass()}catch(t){Z&&(Z--,setTimeout(this.setFocusClass,1e3))}},isFocusable(){try{this.setFocusableClass()}catch(t){Z&&(Z--,setTimeout(this.setFocusableClass,1e3))}}},mounted(){this.setFocusWatcher()},updated(){this.nativeTelInput||this.setFocusWatcher()}};const Q=J;J.__file="fb-phone.vue";var tt=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fb__input grid__cell",class:[{input_active:t.inActive,input_error:t.hasError,"animated shake":t.shake,disabled:t.isDisabled},t.cellClass]},[i("div",{class:["input","input_phone",{input_disabled:t.isDisabled}]},[i("span",{staticClass:"input__label"},[t._v("Phone")]),t._v(" "),i("vue-tel-input",{ref:"tel",on:{onBlur:function(e){t.inFocus=!1},onInput:t.checkFocus},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])},staticRenderFns:[]},void 0,Q,void 0,!1,void 0,void 0,void 0),et={name:"fb-uploader",mixins:[f],props:{url:{type:String,required:!0},format:{type:[String,Array]},size:[String,Number],validator(t){return+t==t}},data(){return{value:[]}},filters:{timestampToDate(t){let e=new Date(t);return`${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()+1}`},bytesToMb(t){let e=t/1024/1024;return(e<1?e.toFixed(3):e.toFixed(1))+"Mb"}},computed:{uploaderOptions(){return{target:this.url,testChunks:!1}},formatArray(){return this.format&&Array.isArray(this.format)?this.format:this.format.split(",").map(t=>t.trim())},formatString(){return this.format&&Array.isArray(this.format)?this.format.concat(", "):this.format},maxSizeBytes(){return 1024*this.size*1024}},methods:{checkFile(t){this.format&&!this._extensionMatch(t)&&(t.ignored=!0,console.warn("fb-uploader: "+t.name+" format missmatch")),this.size&&t.size>this.maxSizeBytes&&(t.ignored=!0,console.warn("fb-uploader: "+t.name+" is too big"))},getExtension(t){return t.split(".").pop()},getName(t){let e=t.split(".");return e.pop(),e.join(".")},_extensionMatch(t){let e=this.getExtension(t.name);return this.formatArray.includes(e)},toggleFormBlock(t){this.$awesForms.commit("toggleFormBlocked",{id:this.formId,isBlocked:t}),t||this.$forceUpdate()},addFileNameToForm(t,e,i,n){try{let t=JSON.parse(i),n=_.get(t,"meta.img",e.relativePath);this.value.push(n)}catch(t){console.log(t)}},removeFile(t,e){t.isComplete()&&this.value.splice(e,1),t.cancel()}}};const it=et;et.__file="fb-uploader.vue";var nt=t({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid__cell grid__cell_uploader"},[i("uploader",{staticClass:"fb-uploader",attrs:{options:t.uploaderOptions},on:{"file-added":t.checkFile,"file-success":t.addFileNameToForm,"upload-start":function(e){t.toggleFormBlock(!0)},complete:function(e){t.toggleFormBlock(!1)}}},[i("uploader-unsupport"),t._v(" "),i("uploader-drop",[i("p",{staticClass:"fb-uploader__message"},[t._v("\n                "+t._s(t.$lang.FORMS_UPLOAD_DROP)+" \n                "),i("span",{staticClass:"fb-uploader__fakebtn"},[t._v(t._s(t.$lang.FORMS_UPLOAD_ADD))]),t._v(" "),i("uploader-btn",{staticClass:"fb-uploader__btn"},[i("span",[t._v(t._s(t.$lang.FORMS_UPLOAD_ADD))])])],1),t._v(" "),t.format||t.size?i("p",[t.format?i("i",{staticClass:"fb-uploader__formats"},[t._v("\n                    "+t._s(t.$lang.FORMS_UPLOAD_FORMAT)+" "+t._s(t.formatString)+".\n                ")]):t._e(),t._v(" "),t.size?i("i",{staticClass:"fb-uploader__size"},[t._v("\n                    "+t._s(t.$lang.FORMS_UPLOAD_SIZE)+" "+t._s(t.size)+"Mb\n                ")]):t._e()]):t._e()]),t._v(" "),i("uploader-list",{scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("list",[e.fileList.length>0?i("div",{staticClass:"fb-uploader__cwrap"},[i("table",{staticClass:"fb-uploader__list"},[i("tbody",[t._l(e.fileList,function(e,n){return[i("tr",[i("td",{staticClass:"fb-uploader__list-number"},[t._v(t._s(n+1))]),t._v(" "),i("td",{staticClass:"fb-uploader__list-name"},[i("v-popover",{attrs:{"popover-class":"fb-uploader__tooltip",placement:"top",trigger:"hover focus"}},[i("span",{staticClass:"fb-uploader__list-ftitle"},[t._v(t._s(t.getName(e.name)))]),t._v(" "),i("span",{attrs:{slot:"popover"},slot:"popover"},[t._v("\n                                                "+t._s(t.getName(e.name))+"\n                                                ")])])],1),t._v(" "),i("td",{staticClass:"fb-uploader__list-type"},[t._v(t._s(t.getExtension(e.name)))]),t._v(" "),i("td",{staticClass:"fb-uploader__list-size"},[t._v(t._s(t._f("bytesToMb")(e.size)))]),t._v(" "),i("td",{staticClass:"fb-uploader__list-date"},[e.isComplete()?[t._v("\n                                                "+t._s(t._f("timestampToDate")(e._lastProgressCallback))+"\n                                            ")]:t._e()],2),t._v(" "),i("td",{staticClass:"fb-uploader__list-delete"},[i("button",{staticClass:"fb-uploader__delete",attrs:{title:t.$lang.FORMS_UPLOAD_DELETE,"aria-label":t.$lang.FORMS_UPLOAD_DELETE},on:{click:function(i){i.preventDefault(),t.removeFile(e,n)}}},[t._v("×")])])]),t._v(" "),e.isComplete()?t._e():i("tr",{staticClass:"fb-uploader__list-pgwrap"},[i("td",{staticClass:"fb-uploader__list-progress",attrs:{colspan:"6"}},[i("progress",{staticClass:"fb-uploader__progress",attrs:{max:"1"},domProps:{value:e.progress()}})])])]})],2)])]):t._e()],{fileList:e.fileList,removeFile:t.removeFile})]}}])})],1)],1)},staticRenderFns:[]},void 0,it,void 0,!1,void 0,void 0,void 0),st={installed:!1,install:i},ot={FORMS_SEND:"Send",FORMS_CANCEL:"Cancel",FORMS_LOADING:"Loading...",FORMS_CONFIRM:"Are you shure? All not submitted data will be erased...",FORMS_MULTIBLOCK_ADD:"add",FORMS_SELECT_LABEL:"Select a value",FORMS_SELECT_PLACEHOLDER:"Pick a value",FORMS_UPLOAD_DROP:"Drag and drop file or",FORMS_UPLOAD_ADD:"Add file",FORMS_UPLOAD_FORMAT:"File formats only",FORMS_UPLOAD_SIZE:"Size of files no more then",FORMS_UPLOAD_REMOVE:"Remove file"};const at=({id:id,url:url,method:method,storeData:storeData})=>({id:id,url:url,storeData:storeData,initialState:{_method:method},realFields:[],workingState:{},loading:!1,isEdited:!1,isBlocked:!1,editCounter:0,errors:{},firstErrorField:null,multiblockState:{}});var rt={state:{forms:[]},getters:{form:t=>e=>t.forms.find(t=>t.id==e),formErrorsOrFalse:(t,e)=>t=>{const i=e.form(t).errors;return!!Object.keys(i).length&&i},isEdited:(t,e)=>t=>e.form(t).isEdited,isBlocked:(t,e)=>t=>e.form(t).isBlocked,fieldValue:(t,e)=>(t,i)=>_.get(e.form(t).workingState,i),fieldError:(t,e)=>(t,i)=>_.get(e.form(t).errors,i),firstErrorField:(t,e)=>t=>e.form(t).firstErrorField,workingState:(t,e)=>t=>{const i=e.form(t);return i.workingState},loading:(t,e)=>t=>e.form(t).loading,multiblockDisabled:(t,e)=>(t,i)=>_.get(e.form(t).multiblockState,i),hasCaptchaError:(t,e)=>t=>!!e.form(t).errors.hasOwnProperty("g-recaptcha-response")},mutations:{createForm(t,e){if(this.getters.form(e.id))throw new Error(`Form with ID ${e.id} already exists`);t.forms.push(at(e))},deleteForm(t,e){const i=t.forms.findIndex(t=>t.id===e);-1!==i?Vue.delete(t.forms,i):console.warn("No form to delete with id: "+e)},setDefaultData(t,{id:id,fields:fields}){const e=this.getters.form(id);e.initialState=_.merge(e.initialState,_.cloneDeep(fields)),e.workingState=_.cloneDeep(e.initialState)},resetFormEdited(t,e){this.getters.form(e).isEdited=!1},setErrors(t,{id:id,errors:errors}){const e=this.getters.form(id);e.firstErrorField=Object.keys(errors)[0],e.errors=errors},resetError(t,{id:id,fieldName:fieldName}){const e=this.getters.form(id);e&&(delete e.errors[fieldName],n(t,id,`errors`,e.errors))},resetErrors(t,e){this.getters.form(e).errors={}},renameError(t,{id:id,oldName:oldName,newName:newName,message:message}){const e=this.getters.form(id);Vue.set(e.errors,newName,message),Vue.delete(e.errors,oldName)},setField(t,{id:id,fieldName:fieldName,value:value,initial:initial}){n(t,id,`workingState.${fieldName}`,value);const e=this.getters.form(id);initial&&e.realFields.push(fieldName),!0!==initial&&(e.editCounter+=1,e.isEdited=!0)},unsetRealField(t,{id:id,fieldName:fieldName}){const e=this.getters.form(id);if(e){let t=e.realFields.indexOf(fieldName);Vue.delete(e.realFields,t)}},toggleFormLoading(t,{id:id,isLoading:isLoading}){this.getters.form(id).loading=isLoading},toggleFormBlocked(t,{id:id,isBlocked:isBlocked}){this.getters.form(id).isBlocked=isBlocked},toggleMultiblockState(t,{id:id,multiblock:multiblock,value:value}){this.getters.form(id);n(t,id,`multiblockState.${multiblock}`,value)},resetFirstErrorField(t,e){this.getters.form(e).firstErrorField=null}}};const lt={modules:{vue:{src:"https://unpkg.com/vue@2.5.21/dist/vue.min.js",cb(){Vue.use(st)}},lodash:"https://unpkg.com/lodash@4.17.11/lodash.min.js",vuex:{src:"https://unpkg.com/vuex@2.5.0/dist/vuex.min.js",deps:["vue"],cb(){Vue.prototype.$awesForms=new Vuex.Store(rt)}},"vue-shortkey":{src:"https://unpkg.com/vue-shortkey@3",deps:["vue"],cb(){Vue.use(VueShortkey)}},"v-tooltip":{src:"https://unpkg.com/v-tooltip@2.0.0-rc.33/dist/v-tooltip.min.js",deps:["vue"],cb(){VTooltip.default.options.popover=Object.assign(VTooltip.default.options.popover,{defaultPlacement:"right",defaultAutoHide:!1,defaultTrigger:"manual",defaultPopperOptions:{modifiers:{flip:{behavior:["right","top"]}}}})}},"vue-multiselect":{src:["https://unpkg.com/vue-multiselect@2.1.0/dist/vue-multiselect.min.js","https://unpkg.com/vue-multiselect@2.1.0/dist/vue-multiselect.min.css"],deps:["vue"],cb(){Vue.component("multiselect",window.VueMultiselect.default)}},"vue-recaptcha":{src:"https://unpkg.com/vue-recaptcha@latest/dist/vue-recaptcha.min.js",deps:["vue"],cb(){Vue.component("vue-recaptcha",window.VueRecaptcha)}},"vue-the-mask":{src:"https://unpkg.com/vue-the-mask@0.11.1/dist/vue-the-mask.js",deps:["vue"]},urlify:"https://unpkg.com/urlify@0.3.6/dist/urlify.js",hammerjs:"https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"},install(){AWES.lang=ot}};window&&"AWES"in window?AWES.use(lt):(window.__awes_plugins_stack__=window.__awes_plugins_stack__||[],window.__awes_plugins_stack__.push(lt))}();
