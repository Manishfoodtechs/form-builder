/**
 * Bundle of AWES form-builder
 * Generated: 2019-01-28
 * Version: 0.1.19
 */

!function(){"use strict";let e=0;const t=[{type:"beforeunload",handler:"windowUnloadHandler"},{type:"popstate",handler:"popStateHandler"}];var s={name:"form-builder",props:{cancelbtn:{type:Boolean,default:!1},name:{type:String,default:()=>`form-builder-${e++}`},url:{type:String,required:!0},sendText:String,cancelText:String,loadingText:String,default:{type:Object,default:null},method:{type:String,default:"post",validator:e=>void 0===e||["get","put","post","delete","patch"].includes(e.toLowerCase())},storeData:String,disabledDialog:{type:Boolean,default:!1},autoSubmit:{type:Boolean,default:!1}},inject:{modal:{from:"modal",default:!1}},provide(){return{formId:this.name,isModal:!!this.modal}},data:()=>({loading:!1,serverData:null,serverDataErrors:null,showLoader:!1}),computed:{form(){return this.$awesForms.getters.form(this.name)},isEdited(){return this.$awesForms.getters.isEdited(this.name)},isBlocked(){return this.$awesForms.getters.isBlocked(this.name)},workingState(){return this.$awesForms.getters.workingState(this.name)},storeFormData(){return!!this.storeData&&this.$awesForms.state[this.storeData]},usedFormData(){return this.storeFormData?(this.default&&console.warn("Only VUEX STORE data will be used, despite DEFAULT data exists"),this.storeFormData):!!this.default&&this.default}},watch:{usedFormData:{handler:function(e){this.form||(this.createForm(),e&&this.$awesForms.commit("setDefaultData",{id:this.name,fields:e}))},deep:!0,immediate:!0},loading(e){this.$awesForms.commit("toggleFormLoading",{id:this.name,isLoading:e})},serverData(e){e&&(this.storeData?this.$awesForms.commit("setData",{param:this.storeData,data:e.data}):this.$awesForms.commit("setDefaultData",{id:this.name,fields:e.data}),this.$awesForms.commit("resetFormEdited",this.name),this.serverData=null,this.$emit("sended",e.data),this.modal&&this.close(this.modal.name))},serverDataErrors(e){e&&(this.$awesForms.commit("setErrors",{id:this.name,errors:e}),this.serverDataErrors=null,this.disabledDialog||this.addUnloadHandlers())}},methods:{createForm(){this.$awesForms.commit("createForm",{id:this.name,url:this.url,method:this.method,storeData:this.storeData})},send(){AWES.emit("form-builder:before-send"),this.loading||this.isBlocked||(this.$listeners.hasOwnProperty("send")?this.$emit("send",this.workingState):(this.removeUnloadHandlers(),this.$awesForms.commit("resetErrors",this.name),this.loading=!0,AWES.on("core:ajax",this.onRequestProcess),AWES.ajax(this.workingState,this.url,this.method).then(e=>{e.success&&e.data&&(this.serverData=e.data),!e.success&&e.data&&(this.serverDataErrors=e.data)}).finally(()=>{this.loading=!1,this.showLoader=!1,AWES.off("core:ajax",this.onRequestProcess)})))},onRequestProcess(e){this.showLoader=e.detail},addUnloadHandlers(){t.forEach(e=>{window.addEventListener(e.type,this[e.handler],!1)})},removeUnloadHandlers(){t.forEach(e=>{window.removeEventListener(e.type,this[e.handler])})},checkCloseAllowed(){if(this.disabledDialog)return!0;if(this.isEdited){return confirm(this.$lang.FORMS_CONFIRM)}return!0},popStateHandler(){if(this.removeUnloadHandlers(),this.checkCloseAllowed())this.modal&&this.close();else{const e=this.modal?this.modal.hash:"",t=location.href+e;history.pushState({modal:e},document.title,t),this.addUnloadHandlers()}},windowUnloadHandler(e){return!(!this.disabledDialog&&this.isEdited)||(e.returnValue=this.$lang.FORMS_CONFIRM,this.$lang.FORMS_CONFIRM)},close(){this.checkCloseAllowed()&&(this.removeUnloadHandlers(),AWES.off(`modal::${this.modal.name}.before-close`,this.preventModalClose),AWES.emit(`modal::${this.modal.name}.close`))},preventModalClose(e){e.detail.preventClose(),this.close()}},created(){this.$root.$on("forms:submit",e=>{this.name===e&&this.send()}),this.modal&&(this.__unwatchModalPrevent=this.$watch("isEdited",e=>{AWES.on(`modal::${this.modal.name}.before-close`,this.preventModalClose)}))},mounted(){this.addUnloadHandlers(),this.autoSubmit&&(this._unwatchEdit=this.$watch("form.editCounter",this.send))},beforeDestroy(){this.removeUnloadHandlers(),"function"==typeof this.__unwatchModalPrevent&&this.__unwatchModalPrevent(),this.$awesForms.commit("deleteForm",this.name),"function"==typeof this._unwatchEdit&&this._unwatchEdit(),AWES.off(`modal::${this.modal.name}.before-close`,this.preventModalClose)}};function i(e,t,s,i,o,a,r,n,l,d){"function"==typeof r&&(l=n,n=r,r=!1);const u="function"==typeof s?s.options:s;let c;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),i&&(u._scopeId=i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):t&&(c=r?function(){t.call(this,d(this.$root.$options.shadowRoot))}:function(e){t.call(this,n(e))}),c)if(u.functional){const e=u.render;u.render=function(t,s){return c.call(s),e(t,s)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,c):[c]}return s}const o=s;s.__file="form-builder.vue";var a=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"form-builder",class:{modal__form:e.modal},attrs:{action:e.url,method:e.method}},[s("div",{staticClass:"grid grid_forms"},[e._t("default",null,{fields:e.workingState})],2),e._v(" "),e.autoSubmit?e._e():s("div",{class:e.modal?"line-btns":null},[s("div",{class:e.modal?"line-btns__wrap":"line-btns"},[s("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","enter"],expression:"['ctrl', 'enter']"}],staticClass:"btn btn-send waves-effect waves-button",class:{"loading-inline":e.showLoader},attrs:{disabled:!e.isEdited||e.isBlocked,"data-loading":e.$lang.FORMS_LOADING,type:"submit","data-awes":"modal_button_ok"},on:{shortkey:e.send,click:function(t){return t.preventDefault(),e.send(t)}},nativeOn:{click:function(t){return t.preventDefault(),e.send(t)}}},[e._v("\n          "+e._s(e.sendText||e.$lang.FORMS_SEND)+" "),s("span",{staticClass:"g-res--tablet-lg_n"},[e._v("(ctrl+enter)")])]),e._v(" "),e.modal||e.cancelbtn?s("button",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["esc"],expression:"['esc']"}],staticClass:"btn waves-effect waves-button",class:{btn_transparent:e.cancelbtn},attrs:{type:"button"},on:{shortkey:e.close,click:function(t){t.preventDefault(),e.modal?e.close():e.$emit("cancel")}}},[e._v("\n          "+e._s(e.cancelText||e.$lang.FORMS_CANCEL)+"\n        ")]):e._e(),e._v(" "),e._t("buttons-after")],2)])])},staticRenderFns:[]},void 0,o,void 0,!1,void 0,void 0,void 0),r={name:"error-wrap",inject:{isModal:{from:"isModal",default:!1}},props:{open:{type:Boolean,default:!1},placement:{type:String,default:"top"},error:{type:Array}}};const n=r;r.__file="fb-error-wrap.vue";var l=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-popover",{staticClass:"display-block",attrs:{placement:e.placement,open:e.open,"popover-class":["theme-error",{tooltip_modal:e.isModal}]}},[e._t("default"),e._v(" "),e.open?s("span",{staticClass:"tooltip__text",attrs:{slot:"popover"},on:{click:function(t){e.$emit("clickTooltip")}},slot:"popover"},[e.error?s("span",{staticClass:"errors__list"},e._l(e.error,function(t,i){return s("span",{key:i},[e._v(e._s(t))])}),0):e._e()]):e._e()],2)},staticRenderFns:[]},void 0,n,void 0,!1,void 0,void 0,void 0),d={props:{name:{type:String,required:!0},id:Number,disabled:{type:Boolean,default:!1},cell:{type:[String,Number],validator:e=>["2","3"].includes(e.toString())}},inject:{formId:{from:"formId",default:!1},isModal:{from:"isModal",default:!1},multiblock:{from:"multiblock",default:!1}},data:()=>({tooltip:!1,hasError:!1}),computed:{realName(){return this.multiblock?`${this.multiblock}.${this.id}.${this.name}`:this.name},computedValue(){return this.$awesForms.getters.fieldValue(this.formId,this.realName)},formLoading(){return this.$awesForms.getters.loading(this.formId)},inActive(){return!(!this.inFocus&&!this.value)},isDisabled(){return this.formLoading||this.disabled||this.isMultiblockDisabled},isMultiblockDisabled(){return!!this.multiblock&&this.$awesForms.getters.multiblockDisabled(this.formId,this.multiblock)},cellClass(){return this.cell?"grid__cell_"+this.cell:""},error(){return this.$awesForms.getters.fieldError(this.formId,this.realName)},firstErrorField(){return this.$awesForms.getters.firstErrorField(this.formId)},shake(){return!this.formLoading&&this.tooltip}},watch:{error:{handler:function(e){e?(this.tooltip=!0,this.hasError=!0,this.$refs.element&&this.$refs.element.addEventListener("input",this.resetError,!1),"function"==typeof this.setFocus&&this.$nextTick(this.checkFocus)):(this.tooltip=!1,this.hasError=!1,this.resetInputWatcher())},immediate:!0}},methods:{createStoreInstance(){this.$awesForms.commit("setField",{id:this.formId,fieldName:this.realName,value:this.value,initial:!0})},initField(){void 0!==this.computedValue&&(this.value=this.computedValue),this.createStoreInstance(),this.__unwatchValue=this.$watch("value",this.valueHandler),this.multiblock&&(this.__unwatchId=this.$watch("id",this.idHandler))},idHandler(e,t){const s=`${this.multiblock}.${t}.${this.name}`,i=this.$awesForms.getters.fieldError(this.formId,s);i&&this.$awesForms.commit("renameError",{id:this.formId,oldName:s,newName:this.realName,message:i})},valueHandler(e){this.$awesForms.commit("setField",{id:this.formId,fieldName:this.realName,value:e})},clickTooltip(){this.tooltip=!1,"function"==typeof this.setFocus&&this.setFocus()},resetError(){this.tooltip=!1,this.$awesForms.commit("resetError",{id:this.formId,fieldName:this.realName}),this.resetInputWatcher()},resetInputWatcher(){this.$refs.element&&this.$refs.element.removeEventListener("input",this.resetError)},resetValue(e){this.formId===e&&(this.value=void 0)},checkFocus(){this.firstErrorField===this.realName&&(setTimeout(this.setFocus,0),this.$awesForms.commit("resetFirstErrorField",this.formId))}},created(){this.initField(),this.$root.$on("forms:reset",this.resetValue)},beforeDestroy(){this.multiblock&&(this.resetError(),this.$awesForms.commit("unsetRealField",{id:this.formId,fieldName:this.realName})),this.__unwatchValue(),"function"==typeof this.__unwatchId&&this.__unwatchId(),this.resetInputWatcher(),this.$root.$off("forms:reset",this.resetValue)}};function u(e,t,s){function i(e){if(!s||0===Object.keys(s).length)return e;for(let t in s)e[t]=s[t];return e}if(document.createEvent){const s=new Event(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(i(s))}else{const s=document.createEventObject();t.fireEvent("on"+e,i(s))}}var c={props:{enterSkip:{type:Boolean,default:!1},focus:{type:Boolean,default:!1}},data(){return{inFocus:this.focus}},computed:{isFocusable(){return!this.enterSkip&&!this.disabled&&this.formId}},methods:{focusNext(e){try{const t=e.target.closest("form"),s=t.querySelectorAll(".is-focusable"),i=Array.from(s).findIndex(t=>t===e.target)+1;if(i<s.length)s[i].focus();else{e.target.blur();const s=t.querySelector('[type="submit"]');this.$nextTick(()=>{s.click(),this.initWawesEffect(s)})}}catch(e){console.warn("Error while setting focus"),console.error(e)}},setFocus(e){try{let t=!1!==e?"focus":"blur";this.$refs.element[t]()}catch(e){console.warn("Error while setting focus"),console.error(e)}},initWawesEffect(e){let t={top:0,left:0};"function"==typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect()),u("mousedown",e,{pageY:t.top+window.pageYOffset-document.documentElement.clientTop+e.clientHeight/2,pageX:t.left+window.pageXOffset-document.documentElement.clientLeft+e.clientWidth/2}),setTimeout(u,250,"mouseup",e)}},mounted(){this.setFocus(this.focus)}};let h=0;var m={name:"fb-input",inheritAttrs:!1,mixins:[d,c],props:{label:{type:String,default:""},spellcheck:{type:Boolean,default:!1},mask:String},data(){return{value:"",inputType:this.$attrs.type||"text",autoFilled:!1}},computed:{inputId:()=>"input-"+h++},methods:{togglePassword(){this.setFocus(),"password"===this.inputType?this.inputType="text":this.inputType="password"},autoFillHack(e){switch(e.animationName){case"autoFillStart":this.autoFilled=!0;break;case"autoFillEnd":this.autoFilled=!1}}}};const p=m;m.__file="fb-input.vue";var f=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fb__input grid__cell",class:[{input_active:e.inActive||e.autoFilled,input_error:e.hasError,"animated shake":e.shake,disabled:e.isDisabled},e.cellClass]},[s("div",{class:["input",{input_disabled:e.isDisabled}]},[s("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[s("label",{staticClass:"input__label input__label_field",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),e._v(" "),"checkbox"===e.inputType&&e.mask?s("input",e._b({directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"},{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,change:function(t){var s=e.value,i=t.target,o=!!i.checked;if(Array.isArray(s)){var a=e._i(s,null);i.checked?a<0&&(e.value=s.concat([null])):a>-1&&(e.value=s.slice(0,a).concat(s.slice(a+1)))}else e.value=o}}},"input",e.$attrs,!1)):"radio"===e.inputType&&e.mask?s("input",e._b({directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"},{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,change:function(t){e.value=null}}},"input",e.$attrs,!1)):e.mask?s("input",e._b({directives:[{name:"mask",rawName:"v-mask",value:e.mask,expression:"mask"},{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:e.inputType},domProps:{value:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,input:function(t){t.target.composing||(e.value=t.target.value)}}},"input",e.$attrs,!1)):"checkbox"===e.inputType?s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,change:function(t){var s=e.value,i=t.target,o=!!i.checked;if(Array.isArray(s)){var a=e._i(s,null);i.checked?a<0&&(e.value=s.concat([null])):a>-1&&(e.value=s.slice(0,a).concat(s.slice(a+1)))}else e.value=o}}},"input",e.$attrs,!1)):"radio"===e.inputType?s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,change:function(t){e.value=null}}},"input",e.$attrs,!1)):s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled,spellcheck:e.spellcheck,type:e.inputType},domProps:{value:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},animationstart:e.autoFillHack,input:function(t){t.target.composing||(e.value=t.target.value)}}},"input",e.$attrs,!1)),e._v(" "),"password"===e.$attrs.type?s("button",{staticClass:"input__eye",attrs:{type:"button","aria-label":e.$lang.SHOW_PASSWORD},on:{click:function(t){return t.preventDefault(),e.togglePassword(t)}}},[s("i",{class:["icon","password"===e.inputType?"icon-eye":"icon-eye2"]})]):e._e()])],1)])},staticRenderFns:[]},void 0,p,void 0,!1,void 0,void 0,void 0);let v=0;var b={name:"fb-multi-block",mixins:[d],props:{label:String},provide(){return{multiblock:this.multiblock?this.realName:this.name}},data:()=>({value:[{}],uniqIds:[]}),computed:{hasClose(){return this.value.length>1},errors(){return this.$awesForms.getters.formErrorsOrFalse(this.formId)}},watch:{disabled:{handler:function(e){this.$awesForms.commit("toggleMultiblockState",{id:this.formId,multiblock:this.realName,value:e})},immediate:!0}},methods:{initField(){if(void 0!==this.computedValue&&this.computedValue.length){this.value=this.computedValue;for(let e in this.computedValue)this.uniqIds.push(v++)}else this.uniqIds.push(v++);this.createStoreInstance(),this.__unwatchValue=this.$watch("value",this.valueHandler)},addField(){this.isDisabled||(this.value.push({}),this.uniqIds.push(v++),this.updateTooltips())},removeField(e){this.isDisabled||(this.$delete(this.value,e),this.uniqIds.splice(e,1),this.updateTooltips())},resetValue(){this.value=[{}]},updateTooltips(){this.errors&&this.$nextTick(()=>{u("scroll",window)})}}};const g=b;b.__file="fb-multi-block.vue";var k=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["grid__wrap multi-bl",{"multi-bl_disabled":this.isDisabled}]},[e._l(e.value,function(t,i){return s("div",{key:"slot-"+e.uniqIds[i],class:["grid__wrap",{"multi-bl__has-close":e.hasClose}]},[e._t("default",null,{id:i}),e._v(" "),e.hasClose?s("button",{staticClass:"multi-bl__clear",attrs:{"aria-label":"delete"},on:{click:function(t){t.preventDefault(),e.removeField(i)}}},[s("i",{staticClass:"icon icon-cross"})]):e._e()],2)}),e._v(" "),s("button",{staticClass:"multi-bl__add",on:{click:function(t){return t.preventDefault(),e.addField(t)}}},[e._v("\n    "+e._s(e.label||e.$lang.FORMS_MULTIBLOCK_ADD)+"\n  ")])],2)},staticRenderFns:[]},void 0,g,void 0,!1,void 0,void 0,void 0),y={name:"fb-checkbox",inheritAttrs:!1,mixins:[d,c],props:{label:{type:String,required:!0},padding:{type:Boolean,default:!0},theme:String},data:()=>({value:!1}),computed:{themeClass(){return this.theme?`checkbox_${this.theme}`:null},isSwitcher(){return"s2"===this.theme}},methods:{enableSwitcher(){this.__hammer=new Hammer.Manager(this.$refs.switcher,{recognizers:[[Hammer.Swipe,{threshold:5,velocity:.1,direction:Hammer.DIRECTION_HORIZONTAL}]]}),this.__hammer.on("swipeleft",()=>{this.value=!1}),this.__hammer.on("swiperight",()=>{this.value=!0})}},mounted(){this.isSwitcher&&this.enableSwitcher()},beforeDestroy(){this.isSwitcher&&(this.__hammer.destroy(),delete this.__hammer)}};const w=y;y.__file="fb-checkbox.vue";var F=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid__cell",class:[{checkbox_error:e.hasError},{checkbox_active:e.inActive},{grid__cell_padding:e.padding},e.cellClass]},[s("label",{class:["checkbox",e.themeClass,{checkbox_disabled:e.isDisabled}],attrs:{"data-awes":e.$options.name+"."+e.name}},[s("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:{"is-focusable":e.isFocusable,"in-focus":e.inFocus},attrs:{type:"checkbox",disabled:e.isDisabled},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},change:function(t){var s=e.value,i=t.target,o=!!i.checked;if(Array.isArray(s)){var a=e._i(s,null);i.checked?a<0&&(e.value=s.concat([null])):a>-1&&(e.value=s.slice(0,a).concat(s.slice(a+1)))}else e.value=o}}},"input",e.$attrs,!1)),e._v(" "),s("span",{staticClass:"checkbox__text"},[s("i",{ref:"switcher",staticClass:"icon icon-checkbox"}),e._v(" "),s("span",[e._v(e._s(e.label))])])])],1)])},staticRenderFns:[]},void 0,w,void 0,!1,void 0,void 0,void 0),E={name:"fb-select",mixins:[d],components:{Multiselect:e=>{AWES.utils.loadModules({"vue-multiselect":{src:["https://unpkg.com/vue-multiselect@2.1.0/dist/vue-multiselect.min.js","https://unpkg.com/vue-multiselect@2.1.0/dist/vue-multiselect.min.css"],deps:["vue"],cb(){e(window.VueMultiselect.default)}}})}},props:{label:String,selectOptions:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0},placeholderText:String},data:()=>({selected:[],isOpened:!1}),computed:{value:{get(){return this.multiple?this.selected.map(e=>e.value):this.selected.value},set(e){this.multiple?this.selected=this.selectOptions.filter(t=>e.includes(t.value)):this.selected=this.selectOptions.find(t=>e===t.value)}},hasValue(){return!!(this.multiple?this.value.length:this.value)},inActive(){return this.isOpened||this.hasValue}},methods:{resetValue(e){this.formId===e&&(this.value=[])}}};const C=E;E.__file="fb-select.vue";var S=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mselect grid__cell",class:[{mselect_active:e.inActive},{mselect_opened:e.isOpened},{input_disabled:e.disabled},e.cellClass]},[s("span",{staticClass:"mselect__label"},[e._v(e._s(e.label||e.$lang.FORMS_SELECT_LABEL))]),e._v(" "),s("multiselect",{staticClass:"input__field",attrs:{"show-labels":!1,multiple:e.multiple,placeholder:e.placeholderText||e.$lang.FORMS_SELECT_PLACEHOLDER,options:e.selectOptions,label:"name","track-by":"value","hide-selected":!0,disabled:e.isDisabled},on:{open:function(t){e.isOpened=!0},close:function(t){e.isOpened=!1}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},staticRenderFns:[]},void 0,C,void 0,!1,void 0,void 0,void 0);"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var $,x=(function(e,t){!function(e,t){var s,i,o="function"==typeof Map?new Map:(s=[],i=[],{has:function(e){return s.indexOf(e)>-1},get:function(e){return i[s.indexOf(e)]},set:function(e,t){-1===s.indexOf(e)&&(s.push(e),i.push(t))},delete:function(e){var t=s.indexOf(e);t>-1&&(s.splice(t,1),i.splice(t,1))}}),a=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var t=null,s=null,i=null,r=function(){e.clientWidth!==s&&c()},n=function(t){window.removeEventListener("resize",r,!1),e.removeEventListener("input",c,!1),e.removeEventListener("keyup",c,!1),e.removeEventListener("autosize:destroy",n,!1),e.removeEventListener("autosize:update",c,!1),Object.keys(t).forEach(function(s){e.style[s]=t[s]}),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",n,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",c,!1),window.addEventListener("resize",r,!1),e.addEventListener("input",c,!1),e.addEventListener("autosize:update",c,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:n,update:c}),"vertical"===(l=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===l.resize&&(e.style.resize="horizontal"),t="content-box"===l.boxSizing?-(parseFloat(l.paddingTop)+parseFloat(l.paddingBottom)):parseFloat(l.borderTopWidth)+parseFloat(l.borderBottomWidth),isNaN(t)&&(t=0),c()}var l;function d(t){var s=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=s,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var i=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),o=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+t+"px",s=e.clientWidth,i.forEach(function(e){e.node.scrollTop=e.scrollTop}),o&&(document.documentElement.scrollTop=o)}}function c(){u();var t=Math.round(parseFloat(e.style.height)),s=window.getComputedStyle(e,null),o="content-box"===s.boxSizing?Math.round(parseFloat(s.height)):e.offsetHeight;if(o<t?"hidden"===s.overflowY&&(d("scroll"),u(),o="content-box"===s.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==s.overflowY&&(d("hidden"),u(),o="content-box"===s.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),i!==o){i=o;var r=a("autosize:resized");try{e.dispatchEvent(r)}catch(e){}}}}function n(e){var t=o.get(e);t&&t.destroy()}function l(e){var t=o.get(e);t&&t.update()}var d=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((d=function(e){return e}).destroy=function(e){return e},d.update=function(e){return e}):((d=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return r(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],n),e},d.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],l),e}),t.default=d,e.exports=t.default}(e,t)}($={exports:{}},$.exports),$.exports);let D;var A={name:"fb-textarea",inheritAttrs:!1,mixins:[d,c],props:{label:{type:String,default:""},fixsize:{type:Boolean,default:!1}},data:()=>({value:""}),methods:{setAutoResize(){this.fixsize||(x(this.$refs.element),D=this.$watch("value",this.updateAutoResize))},updateAutoResize(){this.$nextTick(()=>{x.update(this.$refs.element)})}},mounted(){this.setAutoResize()},beforeDestroy(){"function"==typeof D&&D()}};const I=A;A.__file="fb-textarea.vue";var T=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fb__input grid__cell",class:[{input_active:e.inActive,input_error:e.hasError,"animated shake":e.shake,disabled:e.isDisabled},e.cellClass]},[s("div",{staticClass:"input",class:{input_disabled:e.isDisabled}},[s("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[s("span",{staticClass:"input__label"},[e._v(e._s(e.label))]),e._v(" "),s("textarea",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__textarea",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{disabled:e.isDisabled},domProps:{value:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},input:function(t){t.target.composing||(e.value=t.target.value)}}},"textarea",e.$attrs,!1))])],1)])},staticRenderFns:[]},void 0,I,void 0,!1,void 0,void 0,void 0),O={name:"fb-code",mixins:[d,c],props:{length:{type:Number,default:6},autoSubmit:{type:Boolean,default:!0}},data:()=>({inputValue:[],inFocus:[]}),computed:{value:{get(){return this.inputValue.join("")},set(e){e=e.trim().replace(/\D/g,"").substr(0,this.length),this.inputValue=e.split("")}},hasCaptchaError(){return this.$awesForms.getters.hasCaptchaError(this.formId)}},watch:{error(e){e&&e.length?(this.value="",this.$refs.fields.forEach(e=>{e.addEventListener("input",this.resetError,!1)}),this.$nextTick(()=>{this.setFocus()})):this.$refs.fields.forEach(e=>{e.removeEventListener("input",this.resetError)})},hasCaptchaError(e){e||this.autoSubmitForm(this.value)}},methods:{setFocus(e=0){if("boolean"==typeof e&&!0===e)return void this.$refs.fields[0].focus();if("number"!=typeof e)return;e>=this.length&&(e=this.length-1);const t=this.$refs.fields[e];setTimeout(()=>{t.focus(),t.setSelectionRange(0,t.value.length)},10)},onInput(e,t){const s=e.target.value.replace(/\D/g,"");e.target.value=s,this.$set(this.inputValue,t,s),this.isEmpty(t)||t===this.length-1||this.setFocus(t+1)},onBackspace(e,t){this.setFocus(t-1)},onLeft(e,t){this.setFocus(t-1)},onRight(e,t){this.setFocus(t+1)},onPaste(e){this.error&&this.error.length&&this.resetError(),this.value=e.clipboardData.getData("text")},isEmpty(e){return""===this.inputValue[e]||void 0===this.inputValue[e]},autoSubmitForm(e){this.hasCaptchaError||e.length===this.length&&this.$root.$emit("forms:submit",this.formId)}},created(){for(let e=0;e<this.length;e++)this.inFocus.push(!(0!==e||!this.focus)),this.inputValue.push("");this.autoSubmit&&(this.__unwatchFormSubmit=this.$watch("value",this.autoSubmitForm))},beforeDestroy(){this.$refs.fields.forEach(e=>{e.removeEventListener("input",this.resetError)}),this.__unwatchFormSubmit&&this.__unwatchFormSubmit()}};const N=O;O.__file="fb-code.vue";var R=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["keycode",{"animated shake":e.shake}]},[s("div",{staticClass:"keycode__block",class:{input_disabled:e.isDisabled}},[s("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[s("div",{staticClass:"keycode__wrap",attrs:{id:"keywrap"}},e._l(e.length,function(t){return s("div",{staticClass:"keycode__ffield"},[s("input",{ref:"fields",refInFor:!0,class:["keycode__field",{"is-focusable":e.isFocusable,"in-focus":e.inFocus[t-1]}],attrs:{type:"tel",inputmode:"numeric",pattern:"[0-9]*",maxlength:"1",disabled:e.isDisabled},domProps:{value:e.inputValue[t-1]},on:{focus:function(s){e.inFocus[t-1]=!0},blur:function(s){e.inFocus[t-1]=!1},keydown:[function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},function(s){if(!("button"in s)&&e._k(s.keyCode,"backspace",void 0,s.key,void 0))return null;t>1&&e.onBackspace(s,t-1)},function(s){return"button"in s||!e._k(s.keyCode,"left",37,s.key,["Left","ArrowLeft"])?"button"in s&&0!==s.button?null:void(t>1&&e.onLeft(s,t-1)):null},function(s){return"button"in s||!e._k(s.keyCode,"right",39,s.key,["Right","ArrowRight"])?"button"in s&&2!==s.button?null:void(t<e.length&&e.onRight(s,t-1)):null}],input:function(s){e.onInput(s,t-1)},paste:function(t){return t.preventDefault(),e.onPaste(t)}}})])}),0)])],1)])},staticRenderFns:[]},void 0,N,void 0,!1,void 0,void 0,void 0),L={domain:"awescrm.de",length:32,ulrifyOptions:{spaces:"-",toLower:!0,trim:!0,addEToUmlauts:!0,nonPrintable:"",failureOutput:""}},M={name:"fb-company-slug",extends:f,props:{domain:String,input:{type:String,required:!0},maxLength:Number},data:()=>({watchInput:!0}),computed:{fromName(){return this.multiblock?`${this.multiblock}.${this.id}.${this.input}`:this.input},fromValue(){return this.$awesForms.getters.fieldValue(this.formId,this.fromName)}},watch:{fromValue(e){this.watchInput&&e&&(this.value=this.noramlizeUrl(e))}},methods:{noramlizeUrl(e){return this._toUrl(e).substr(0,this.maxlength)},toggleWatcher(e){""===e.target.value?this.watchInput=!0:this.watchInput&&(this.watchInput=!1)},slugBlur(e){this.inFocus=!1,this.watchInput||(this.value=this.noramlizeUrl(e.target.value))}},beforeCreate(){this._config=Object.assign({},L,AWES._config.companySlug),this._toUrl=Urlify.create(this._config.ulrifyOptions)}};const j=M;M.__file="fb-company-slug.vue";var V=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fb__input fb__input_slug grid__cell",class:[{input_active:e.inActive,input_error:e.hasError,"animated shake":e.shake,disabled:e.isDisabled},e.cellClass]},[s("div",{class:["input",{input_disabled:e.isDisabled}]},[s("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[s("div",{staticClass:"fb__input-wrap"},[s("span",{staticClass:"fb__input-inner"},[s("label",{staticClass:"input__label",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),e._v(" "),s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,maxlength:e.maxLength||e._config.length,type:"text",disabled:e.isDisabled},domProps:{value:e.value},on:{input:[function(t){t.target.composing||(e.value=t.target.value)},e.toggleWatcher],focus:function(t){e.inFocus=!0},blur:e.slugBlur,keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null}}},"input",e.$attrs,!1))]),e._v(" "),s("span",{staticClass:"fb__input-domain"},[e._v("."+e._s(e.domain||e._config.domain))])])])],1)])},staticRenderFns:[]},void 0,j,void 0,!1,void 0,void 0,void 0),P={name:"fb-auto-captcha",mixins:[d],props:{show:{type:Boolean,default:!1},name:{default:"g-recaptcha-response"}},data:()=>({value:null,sitekey:AWES_CONFIG.reCaptchaSiteKey,serverError:!1,reset:!1}),computed:{realName:()=>"g-recaptcha-response",isShow(){return this.show||this.serverError},theme(){try{let e=this.$store.state.theme;return e&&1===e.theme_dark?"dark":"light"}catch(e){return"light"}}},watch:{error(e){e&&e.length&&(this.serverError=!0)},formLoading(e){!e&&this.isShow&&this.$nextTick(()=>{this.$refs.recaptcha.reset()})},theme(){this.isShow&&(this.reset=!0,this.$nextTick(()=>{this.reset=!1}))}},methods:{onVerify(e){this.value=e,this.resetError()},manageCaptchaScript(e){switch(e){case"add":if(!document.getElementById("g-captcha-script")){const e=document.createElement("script");e.setAttribute("id","g-captcha-script"),e.setAttribute("src","https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit"),document.head.appendChild(e)}break;case"remove":document.getElementById("g-captcha-script").remove()}}},created(){this.$isServer||this.manageCaptchaScript("add")},beforeDestroy(){this.manageCaptchaScript("remove")}};const B=P;P.__file="fb-auto-captcha.vue";var W=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isShow&&!e.reset?s("div",{class:["grid__cell",e.cellClass]},[s("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[s("vue-recaptcha",{ref:"recaptcha",staticClass:"re-captcha",attrs:{sitekey:e.sitekey,theme:e.theme},on:{verify:e.onVerify,expired:function(t){e.value=null}}})],1)],1):e._e()},staticRenderFns:[]},void 0,B,void 0,!1,void 0,void 0,void 0),z={name:"fb-radio-group",mixins:[d,c],props:{box:{type:Boolean,default:!1},items:Array},data:()=>({value:null,inFocus:[]}),methods:{checkActive(e){return e.value?this.value===e.value:this.value===e.toString()},setFocus(e=!0){"number"==typeof e?this.$refs.elements[e].focus():!0===e&&this.$refs.elements[0].focus()}},created(){for(let e=0;e<this.items.length;e++)this.inFocus.push(!(0!==e||!this.focus))}};const H=z;z.__file="fb-radio-group.vue";var U=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.items&&e.items.length?s("div",{staticClass:"grid__cell",class:[{"animated shake":e.shake},e.cellClass]},[s("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[s("span",{class:["display-block",{"fc-radio":e.box}]},e._l(e.items,function(t,i){return s("label",{key:i,class:[{"fc-radio__box":e.box,"is-checked":e.checkActive(t)}]},[s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"fields",refInFor:!0,class:["fc-radio__field",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus}],attrs:{type:"radio","data-awes":e.$options.name+"."+e.name,disabled:e.isDisabled},domProps:{value:t.value?t.value:t.toString(),checked:e._q(e.value,t.value?t.value:t.toString())},on:{focus:function(t){e.$set(e.inFocus,i,!0)},blur:function(t){e.$set(e.inFocus,i,!1)},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},change:function(s){e.value=t.value?t.value:t.toString()}}},"input",e.$attrs,!1)),e._v(" "),e._t("default",[s("span",{staticClass:"fc-radio__text"},[e._v(e._s(t.name?t.name:t.toString()))])],{item:t,checked:e.checkActive(t),focused:e.inFocus[i]})],2)}),0)])],1):e._e()},staticRenderFns:[]},void 0,H,void 0,!1,void 0,void 0,void 0);let q=0;var X={name:"fb-slider",inheritAttrs:!1,mixins:[d,c],props:{label:{type:String,default:""},min:{type:[Number,String],default:0},max:{type:[Number,String],default:100}},data(){return{value:0,inputType:this.$attrs.type||"text",autoFilled:!1}},computed:{inputId:()=>"slider-"+q++,percent(){return Math.round(Number(this.value)/Number(this.max)*100)}}};const Y=X;X.__file="fb-slider.vue";var G=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fb__input grid__cell",class:[{input_active:e.inActive,input_error:e.hasError,"animated shake":e.shake,disabled:e.isDisabled},e.cellClass]},[s("div",{class:["input","input_range",{input_disabled:e.isDisabled}]},[s("fb-error-wrap",{attrs:{open:e.tooltip,error:e.error},on:{clickTooltip:e.clickTooltip}},[s("div",{staticClass:"input__range-wrap"},[s("div",{staticClass:"input__range-left"},[s("label",{staticClass:"input__label input__label_field",attrs:{for:"#"+e.inputId}},[e._v(e._s(e.label))]),e._v(" "),s("span",{staticClass:"input__range-value"},[e._v(e._s(e.percent)+" %")])]),e._v(" "),s("div",{staticClass:"input__range-right"},[s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"element",class:["input__range",{"is-focusable":e.isFocusable},{"in-focus":e.inFocus},{input__field_password:"password"===e.$attrs.type}],style:"--percent: "+e.percent+"%",attrs:{id:e.inputId,"data-awes":e.$options.name+"."+e.name,type:"range",disabled:e.isDisabled},domProps:{value:e.value},on:{focus:function(t){e.inFocus=!0},blur:function(t){e.inFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.focusNext(t)):null},__r:function(t){e.value=t.target.value}}},"input",e.$attrs,!1))])])])],1)])},staticRenderFns:[]},void 0,Y,void 0,!1,void 0,void 0,void 0);let K=20;var Z={name:"fb-phone",mixins:[d,c],components:{VueTelInput:e=>{return AWES.utils.loadModule("vue-tel-input",["https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.js","https://unpkg.com/vue-tel-input@2.0.13/dist/vue-tel-input.css"],()=>{e(VueTelInput.default)})}},data:()=>({nativeTelInput:!1,value:""}),methods:{setFocusWatcher(){this.$refs.tel&&(this.nativeTelInput=this.$refs.tel.$refs.input,this.nativeTelInput.addEventListener("focus",()=>{this.inFocus=!0}),this.setFocusableClass(),this.setFocusClass())},setFocusClass(){this.nativeTelInput.classList[this.inFocus?"add":"remove"]("in-focus"),K=20},setFocusableClass(){this.nativeTelInput.classList[this.isFocusable?"add":"remove"]("is-focusable"),K=20},setFocus(e){try{let t=!1!==e?"focus":"blur";this.nativeTelInput[t]()}catch(t){K&&(K--,setTimeout(()=>{this.setFocus(e)},1e3))}},checkFocus(){this.inFocus||this.setFocus()}},watch:{inFocus(){try{this.setFocusClass()}catch(e){K&&(K--,setTimeout(this.setFocusClass,1e3))}},isFocusable(){try{this.setFocusableClass()}catch(e){K&&(K--,setTimeout(this.setFocusableClass,1e3))}}},mounted(){this.setFocusWatcher()},updated(){this.nativeTelInput||this.setFocusWatcher()}};const J=Z;Z.__file="fb-phone.vue";var Q=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fb__input grid__cell",class:[{input_active:e.inActive,input_error:e.hasError,"animated shake":e.shake,disabled:e.isDisabled},e.cellClass]},[s("div",{class:["input","input_phone",{input_disabled:e.isDisabled}]},[s("span",{staticClass:"input__label"},[e._v("Phone")]),e._v(" "),s("vue-tel-input",{ref:"tel",attrs:{disabled:e.isDisabled},on:{onBlur:function(t){e.inFocus=!1},onInput:e.checkFocus},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])},staticRenderFns:[]},void 0,J,void 0,!1,void 0,void 0,void 0),ee={name:"fb-uploader",mixins:[d],props:{url:{type:String,required:!0},format:{type:[String,Array]},size:[String,Number],validator:e=>+e==e},data:()=>({value:[],filesProgress:{}}),filters:{timestampToDate(e){let t=new Date(e);return`${t.getDate()}.${t.getMonth()+1}.${t.getFullYear()+1}`},bytesToMb(e){let t=e/1024/1024;return(t<1?t.toFixed(3):t.toFixed(1))+"Mb"}},computed:{uploaderOptions(){return{target:this.url,testChunks:!1}},formatArray(){return this.format&&Array.isArray(this.format)?this.format:this.format.split(",").map(e=>e.trim())},formatString(){return this.format&&Array.isArray(this.format)?this.format.concat(", "):this.format},maxSizeBytes(){return 1024*this.size*1024}},methods:{checkFile(e){this.format&&!this._extensionMatch(e)&&(e.ignored=!0,console.warn("fb-uploader: "+e.name+" format missmatch")),this.size&&e.size>this.maxSizeBytes&&(e.ignored=!0,console.warn("fb-uploader: "+e.name+" is too big"))},setProgress(e){this.$set(this.filesProgress,e.uniqueIdentifier,e.progress())},getExtension:e=>e.split(".").pop(),getName(e){let t=e.split(".");return t.pop(),t.join(".")},_extensionMatch(e){let t=this.getExtension(e.name);return this.formatArray.includes(t)},toggleFormBlock(e){this.$awesForms.commit("toggleFormBlocked",{id:this.formId,isBlocked:e}),e||this.$forceUpdate()},addFileNameToForm(e,t,s,i){delete this.filesProgress[t.uniqueIdentifier];try{let e=JSON.parse(s),i=_.get(e,"meta.img",t.relativePath);this.value.push(i)}catch(e){console.log(e)}},removeFile(e,t){e.isComplete()&&this.value.splice(t,1),e.cancel(),delete this.filesProgress[e.uniqueIdentifier]}}};const te=ee;ee.__file="fb-uploader.vue";var se=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid__cell grid__cell_uploader"},[s("uploader",{staticClass:"fb-uploader",class:{input_disabled:e.isDisabled},attrs:{options:e.uploaderOptions},on:{"file-added":e.checkFile,"file-progress":e.setProgress,"file-success":e.addFileNameToForm,"upload-start":function(t){e.toggleFormBlock(!0)},complete:function(t){e.toggleFormBlock(!1)}}},[s("uploader-unsupport"),e._v(" "),s("uploader-drop",[s("p",{staticClass:"fb-uploader__message"},[e._v("\n                "+e._s(e.$lang.FORMS_UPLOAD_DROP)+" \n                "),s("span",{staticClass:"fb-uploader__fakebtn"},[e._v(e._s(e.$lang.FORMS_UPLOAD_ADD))]),e._v(" "),s("uploader-btn",{staticClass:"fb-uploader__btn"},[s("span",[e._v(e._s(e.$lang.FORMS_UPLOAD_ADD))])])],1),e._v(" "),e.format||e.size?s("p",[e.format?s("i",{staticClass:"fb-uploader__formats"},[e._v("\n                    "+e._s(e.$lang.FORMS_UPLOAD_FORMAT)+" "+e._s(e.formatString)+".\n                ")]):e._e(),e._v(" "),e.size?s("i",{staticClass:"fb-uploader__size"},[e._v("\n                    "+e._s(e.$lang.FORMS_UPLOAD_SIZE)+" "+e._s(e.size)+"Mb\n                ")]):e._e()]):e._e()]),e._v(" "),s("uploader-list",{scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("list",[t.fileList.length?s("div",{staticClass:"fb-uploader__cwrap"},[s("table",{staticClass:"fb-uploader__list"},[s("tbody",[e._l(t.fileList,function(t,i){return[s("tr",{key:t.id},[s("td",{staticClass:"fb-uploader__list-number"},[e._v(e._s(i+1))]),e._v(" "),s("td",{staticClass:"fb-uploader__list-name"},[s("span",{staticClass:"fb-uploader__list-ftitle"},[e._v(e._s(e.getName(t.name)))])]),e._v(" "),s("td",{staticClass:"fb-uploader__list-type"},[e._v(e._s(e.getExtension(t.name)))]),e._v(" "),s("td",{staticClass:"fb-uploader__list-size"},[e._v(e._s(e._f("bytesToMb")(t.size)))]),e._v(" "),s("td",{staticClass:"fb-uploader__list-date"},[t.isComplete()?[e._v("\n                                                "+e._s(e._f("timestampToDate")(t._lastProgressCallback))+"\n                                            ")]:e._e()],2),e._v(" "),s("td",{staticClass:"fb-uploader__list-delete"},[s("button",{staticClass:"fb-uploader__delete",attrs:{title:e.$lang.FORMS_UPLOAD_DELETE,"aria-label":e.$lang.FORMS_UPLOAD_DELETE},on:{click:function(s){s.preventDefault(),e.removeFile(t,i)}}},[e._v("×")])])]),e._v(" "),t.isComplete()?e._e():s("tr",{key:t.id+"loader",staticClass:"fb-uploader__list-pgwrap"},[s("td",{staticClass:"fb-uploader__list-progress",attrs:{colspan:"6"}},[s("progress",{staticClass:"fb-uploader__progress",attrs:{max:"1"},domProps:{value:e.filesProgress[t.uniqueIdentifier]}})])])]})],2)])]):e._e()],{fileList:t.fileList,removeFile:e.removeFile})]}}])})],1)],1)},staticRenderFns:[]},void 0,te,void 0,!1,void 0,void 0,void 0);const ie={branding:!1,statusbar:!1,menubar:!1,fontsize_formats:"10px 12px 14px 16px 18px 24px 36px",plugins:"lists",toolbar:["fontselect fontsizeselect bold italic underline numlist bullist"],setup:function(){this.on("ExecCommand",function(e){"FontName"===e.command&&(e.target.getDoc().body.style.fontFamily=e.value)})},init_instance_callback:function(){this.execCommand("FontName",!1,"Arial")}};const oe={lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,autoCloseTags:!0,matchTags:!0,mode:"htmlmixed"};let ae,re=0;var ne={name:"fb-editor",mixins:[d],props:{options:{type:Object,default:()=>({})}},data:()=>({editorId:"fb-editor-"+re,codeEditorId:"fb-code-editor-"+re++,mode:"visual",codeEditorInited:!1,value:""}),watch:{mode(e){"visual"===e?(this._saveCode(),tinymce.get(this.editorId).setContent(this.value)):(this._saveVisual(),this.codeEditorInited?this._setCodeValue():AWES.utils.loadModules({codemirror:{src:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/theme/3024-day.min.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/codemirror.css"]},"codemirror-plugins":{deps:["codemirror"],src:["https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/xml/xml.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/fold/xml-fold.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/matchbrackets.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/closebrackets.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/matchtags.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/addon/edit/closetag.min.js","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.43.0/mode/htmlmixed/htmlmixed.min.js"]}}).then(this.initCodeEditor).then(this._setCodeValue))}},methods:{initEditor(){ie.selector="#"+this.editorId;let e=_.get(AWES._config,"formBuilder.fbEditor",{});Object.assign(e,this.options,ie),tinymce.init(e);const t=tinymce.get(this.editorId);t.on("Change",_.debounce(this.save,1e3)),void 0!==typeof AWES._theme&&t.once("Init",()=>{this._switchThemeAttribute({detail:AWES._theme})})},initCodeEditor(){return this.codeEditorInited=!0,(ae=CodeMirror.fromTextArea(this.$refs.code,oe)).on("update",_.debounce(this.save,1e3)),ae},save(){"visual"===this.mode?this._saveVisual():this._saveCode()},_saveVisual(){this.value=tinymce.get(this.editorId).save()},_saveCode(){ae&&(this.value=ae.doc.getValue())},_setCodeValue(){ae.doc.setValue(this.value),setTimeout(()=>{ae.refresh()},1)},_switchThemeAttribute(e){const t=tinymce.get(this.editorId).getDoc();1===e.detail?t.documentElement.setAttribute("data-dark",!0):t.documentElement.removeAttribute("data-dark")}},mounted(){AWES.on("form-builder:before-send",this.save),this.$nextTick(this.initEditor),void 0!==typeof AWES._theme&&AWES.on("theme.change",this._switchThemeAttribute)},beforeDestroy(){AWES.off("form-builder:before-send",this.save),void 0!==typeof AWES._theme&&AWES.off("theme.change",this._switchThemeAttribute)}};const le=ne;ne.__file="fb-editor.vue";var de=i({render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid__cell",class:e.cellClass},[s("div",{staticClass:"fb-editor",class:{input_disabled:e.isDisabled}},[s("div",{staticClass:"fb-editor__modes"},[s("button",{class:["fb-editor__modes-button",{"is-active":"visual"===e.mode}],attrs:{type:"button"},on:{click:function(t){e.mode="visual"}}},[e._v("\n                "+e._s(e.$lang.FORMS_EDITOR_VISUAL)+"\n            ")]),e._v(" "),s("button",{class:["fb-editor__modes-button",{"is-active":"code"===e.mode}],attrs:{type:"button"},on:{click:function(t){e.mode="code"}}},[e._v("\n                "+e._s(e.$lang.FORMS_EDITOR_CODE)+"\n            ")])]),e._v(" "),s("div",{staticClass:"fb-editor__tabs"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"visual"===e.mode,expression:"mode === 'visual'"}],key:"visual",staticClass:"fb-editor__tab"},[s("textarea",{staticClass:"fb-editor__tiny",attrs:{id:e.editorId}},[e._v(e._s(e.value))])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"code"===e.mode,expression:"mode === 'code'"}],key:"code",staticClass:"fb-editor__tab"},[s("textarea",{ref:"code",staticClass:"fb-editor__codemirror",attrs:{id:e.codeEditorId}},[e._v(e._s(e.value))])])])])])},staticRenderFns:[]},void 0,le,void 0,!1,void 0,void 0,void 0);var ue={installed:!1,install:function(e){this.installed||(this.installed=!0,e.component("form-builder",a),e.component("fb-error-wrap",l),e.component("fb-input",f),e.component("fb-multi-block",k),e.component("fb-checkbox",F),e.component("fb-select",S),e.component("fb-textarea",T),e.component("fb-code",R),e.component("fb-company-slug",V),e.component("fb-auto-captcha",W),e.component("fb-radio-group",U),e.component("fb-slider",G),e.component("fb-phone",Q),e.component("fb-uploader",e=>{AWES.utils.loadModule("vue-simple-uploader","https://unpkg.com/vue-simple-uploader@0.5.6/dist/vue-uploader.js",()=>{e(se)})}),e.component("fb-editor",e=>{AWES.utils.loadModules({"tiny-mce":"https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.2/tinymce.min.js","tiny-mce-plugins":{deps:["tiny-mce"],src:["https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.9.2/plugins/lists/plugin.min.js"]}}).then(()=>{e(de)})}))}},ce={FORMS_SEND:"Send",FORMS_CANCEL:"Cancel",FORMS_LOADING:"Loading...",FORMS_CONFIRM:"Are you shure? All not submitted data will be erased...",FORMS_MULTIBLOCK_ADD:"add",FORMS_SELECT_LABEL:"Select a value",FORMS_SELECT_PLACEHOLDER:"Pick a value",FORMS_UPLOAD_DROP:"Drag and drop file or",FORMS_UPLOAD_ADD:"Add file",FORMS_UPLOAD_FORMAT:"File formats only",FORMS_UPLOAD_SIZE:"Size of files no more then",FORMS_UPLOAD_REMOVE:"Remove file",FORMS_EDITOR_VISUAL:"Visual",FORMS_EDITOR_CODE:"Code"};function he(e,t,s,i){let o=e.forms.find(e=>e.id==t);const a=e.forms.findIndex(e=>e.id==t);null===i?_.unset(o,s):_.set(o,s,i),Vue.set(e.forms,a,o)}var me={state:{forms:[]},getters:{form:e=>t=>e.forms.find(e=>e.id==t),formErrorsOrFalse:(e,t)=>e=>{const s=t.form(e).errors;return!!Object.keys(s).length&&s},isEdited:(e,t)=>e=>t.form(e).isEdited,isBlocked:(e,t)=>e=>t.form(e).isBlocked,fieldValue:(e,t)=>(e,s)=>_.get(t.form(e).workingState,s),fieldError:(e,t)=>(e,s)=>_.get(t.form(e).errors,s),firstErrorField:(e,t)=>e=>t.form(e).firstErrorField,workingState:(e,t)=>e=>{return t.form(e).workingState},loading:(e,t)=>e=>t.form(e).loading,multiblockDisabled:(e,t)=>(e,s)=>_.get(t.form(e).multiblockState,s),hasCaptchaError:(e,t)=>e=>!!t.form(e).errors.hasOwnProperty("g-recaptcha-response")},mutations:{createForm(e,t){if(this.getters.form(t.id))throw new Error(`Form with ID ${t.id} already exists`);e.forms.push((({id:e,url:t,method:s,storeData:i})=>({id:e,url:t,storeData:i,initialState:{_method:s},realFields:[],workingState:{},loading:!1,isEdited:!1,isBlocked:!1,editCounter:0,errors:{},firstErrorField:null,multiblockState:{}}))(t))},deleteForm(e,t){const s=e.forms.findIndex(e=>e.id===t);-1!==s?Vue.delete(e.forms,s):console.warn("No form to delete with id: "+t)},setDefaultData(e,{id:t,fields:s}){const i=this.getters.form(t);i.initialState=_.merge(i.initialState,_.cloneDeep(s)),i.workingState=_.cloneDeep(i.initialState)},resetFormEdited(e,t){this.getters.form(t).isEdited=!1},setErrors(e,{id:t,errors:s}){const i=this.getters.form(t);i.firstErrorField=Object.keys(s)[0],i.errors=s},resetError(e,{id:t,fieldName:s}){const i=this.getters.form(t);i&&(delete i.errors[s],he(e,t,"errors",i.errors))},resetErrors(e,t){this.getters.form(t).errors={}},renameError(e,{id:t,oldName:s,newName:i,message:o}){const a=this.getters.form(t);Vue.set(a.errors,i,o),Vue.delete(a.errors,s)},setField(e,{id:t,fieldName:s,value:i,initial:o}){he(e,t,`workingState.${s}`,i);const a=this.getters.form(t);o&&a.realFields.push(s),!0!==o&&(a.editCounter+=1,a.isEdited=!0)},unsetRealField(e,{id:t,fieldName:s}){const i=this.getters.form(t);if(!i)return;let o=i.realFields.indexOf(s);Vue.delete(i.realFields,o)},toggleFormLoading(e,{id:t,isLoading:s}){this.getters.form(t).loading=s},toggleFormBlocked(e,{id:t,isBlocked:s}){this.getters.form(t).isBlocked=s},toggleMultiblockState(e,{id:t,multiblock:s,value:i}){this.getters.form(t);he(e,t,`multiblockState.${s}`,i)},resetFirstErrorField(e,t){this.getters.form(t).firstErrorField=null}}};const pe={modules:{vue:{src:"https://unpkg.com/vue@2.5.21/dist/vue.min.js",cb(){Vue.use(ue)}},lodash:"https://unpkg.com/lodash@4.17.11/lodash.min.js",vuex:{src:"https://unpkg.com/vuex@2.5.0/dist/vuex.min.js",deps:["vue"],cb(){Vue.prototype.$awesForms=new Vuex.Store(me)}},"vue-shortkey":{src:"https://unpkg.com/vue-shortkey@3",deps:["vue"],cb(){Vue.use(VueShortkey)}},"v-tooltip":{src:"https://unpkg.com/v-tooltip@2.0.0-rc.33/dist/v-tooltip.min.js",deps:["vue"],cb(){VTooltip.default.options.popover=Object.assign(VTooltip.default.options.popover,{defaultPlacement:"right",defaultAutoHide:!1,defaultTrigger:"manual",defaultPopperOptions:{modifiers:{flip:{behavior:["right","top"]}}}})}},"vue-recaptcha":{src:"https://unpkg.com/vue-recaptcha@latest/dist/vue-recaptcha.min.js",deps:["vue"],cb(){Vue.component("vue-recaptcha",window.VueRecaptcha)}},"vue-the-mask":{src:"https://unpkg.com/vue-the-mask@0.11.1/dist/vue-the-mask.js",deps:["vue"]},urlify:"https://unpkg.com/urlify@0.3.6/dist/urlify.js",hammerjs:"https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"},install(){AWES.lang=ce}};window&&"AWES"in window?AWES.use(pe):(window.__awes_plugins_stack__=window.__awes_plugins_stack__||[],window.__awes_plugins_stack__.push(pe))}();
