/**
 * Bundle of awes-core
 * Generated: 2018-12-28
 * Version: 0.0.5
 */

!function(){"use strict";function e(){function e(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}function n(e,n){let t={url:n,method:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",timeout:AWES._config.serverRequestTimeout,headers:{"X-Requested-With":"XMLHttpRequest"}};"get"===t.method.toLowerCase()?t.params=e:t.data=e;let o=setTimeout(()=>{AWES.emit("core:ajax",!0)},+AWES._config.loadingDelay);return new Promise(e=>{let n;axios(t).then(e=>{if(e.data&&e.data.redirectUrl)return e.data.redirectUrl;e.data&&e.data.message&&AWES.notify({status:"success",message:e.data.message});n={success:!0,data:e.data}}).catch(e=>{e.response&&422===e.response.status?n={success:!1,data:e.response.data.errors}:e.response&&e.response.data.message?AWES.notify({status:"error",message:e.response.data.message}):e.message?AWES.notify({status:"error",message:e.message}):AWES.notify({status:"error",message:AWES.lang.TIMEOUT_ERROR})}).finally(t=>{clearTimeout(o);t?window.location.href=t:(AWES.emit("core:ajax",!1),e(n))})})}const t={API_KEY_ERROR:"API key is invalid",TIMEOUT_ERROR:"Timeout error"},o=function(){const e=document.createElement("div");e.style.color="white",e.style.backgroundColor="rgba(255,100,100,.8)",e.style.padding="1rem",e.style.position="fixed",e.style.right="1rem",e.style.bottom="1rem",e.innerText=t.API_KEY_ERROR,document.body.appendChild(e)},i=function(){return new Promise(e=>{axios({url:"/check",baseURL:"https://www.awc.wtf/",params:{key:AWES._config.key}}).then(()=>{e(!0)}).catch(n=>{e(!1);console.error(t.API_KEY_ERROR);o()})})},s={loadingDelay:200,serverRequestTimeout:3e4};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var r=function(e,n){return n={exports:{}},e(n,n.exports),n.exports}(function(e,n){!function(n,t){e.exports=function(){function e(e,n){var t,o,i,s=[],r=(e=e.push?e:[e]).length,c=r;for(t=function(e,t){t.length&&s.push(e),--c||n(s)};r--;)o=e[r],(i=u[o])?t(o,i):(a[o]=a[o]||[]).push(t)}function n(e,n){if(e){var t=a[e];if(u[e]=n,t)for(;t.length;)t[0](e,n),t.splice(0,1)}}function t(e,n){e.call&&(e={success:e}),n.length?(e.error||r)(n):(e.success||r)(e)}function o(e,n,t,i){var s,c,u=document,a=t.async,f=(t.numRetries||0)+1,d=t.before||r,l=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(e)?(s=!0,(c=u.createElement("link")).rel="stylesheet",c.href=l):/(^img!|\.(png|gif|jpg|svg)$)/.test(e)?(c=u.createElement("img")).src=l:((c=u.createElement("script")).src=e,c.async=void 0===a||a),c.onload=c.onerror=c.onbeforeload=function(r){var u=r.type[0];if(s&&"hideFocus"in c)try{c.sheet.cssText.length||(u="e")}catch(e){18!=e.code&&(u="e")}if("e"==u&&(i+=1)<f)return o(e,n,t,i);n(e,u,r.defaultPrevented)},!1!==d(e,c)&&u.head.appendChild(c)}function i(e,n,t){var i,s,r=(e=e.push?e:[e]).length,c=r,u=[];for(i=function(e,t,o){if("e"==t&&u.push(e),"b"==t){if(!o)return;u.push(e)}--r||n(u)},s=0;s<c;s++)o(e[s],i,t)}function s(e,o,s){var r,u;if(o&&o.trim&&(r=o),u=(r?s:o)||{},r){if(r in c)throw"LoadJS";c[r]=!0}i(e,function(e){t(u,e),n(r,e)},u)}var r=function(){},c={},u={},a={};return s.ready=function(n,o){return e(n,function(e){t(o,e)}),s},s.done=function(e){n(e,[])},s.reset=function(){c={},u={},a={}},s.isDefined=function(e){return e in c},s}()}()});const c=(e,n,t)=>new Promise(o=>{function i(){"function"==typeof t?(t(),o()):o()}r.isDefined(e)?i():r(n,e,i)}),u=(e,n,t,o)=>new Promise(i=>{r.ready(e,function(){c(n,t,o).then(i)})}),a=e=>{if(!e||!Object.keys(e).length)return Promise.resolve();return new Promise((n,t)=>{const o=Object.keys(e);const i=[];for(let n=0;n<o.length;n++){let t=o[n],s="string"==typeof e[t]?e[t]:e[t].src,r=e[t].deps;r?i.push(u(r,t,s,e[t].cb)):i.push(c(t,s,e[t].cb))}Promise.all(i).then(n).catch(e=>{console.log("Error loading modules: ",e)})})},f={version:"0.0.5",_inited:!1,notify(e){let n=e.status,t=e.message;alert(`${n}:  ${t}`)}};!function(e){"undefined"==typeof AWES_CONFIG&&console.error("No config found");let n=Object.assign(s,AWES_CONFIG);delete n.lang,Object.defineProperty(e,"_config",{value:n})}(f),function(e){Object.defineProperty(e,"use",{get(){return function(e){if(!this._inited)return window.__awes_plugins_stack__=window.__awes_plugins_stack__||[],void window.__awes_plugins_stack__.push(e);a(e.modules).then(()=>e.install(this)).then(()=>{AWES._vueRoot&&AWES._vueRoot.$forceUpdate()})}}})}(f),window.AWES=f,function(n){e(),Object.defineProperties(n,{on:{value:function(e,n){window.addEventListener(e,n)}},off:{value:function(e,n){window.removeEventListener(e,n)}},once:{value:function(e,n){window.addEventListener(e,function t(o){n(o),window.removeEventListener(e,t)})}},emit:{value:function(e,n){n=n||{};let t=new CustomEvent(e,{detail:n});window.dispatchEvent(t)}}})}(f),function(e){let n=Object.assign({},t,e._config.lang);Object.defineProperty(e,"lang",{get(){return n},set(e){try{let t=Object.assign(n,e);n=t}catch(e){console.log("Error setting lang: ",e)}}})}(f),function(e){Object.defineProperty(e,"ajax",{value:n})}(f);const d={axios:"https://unpkg.com/axios@0.18.0/dist/axios.min.js",vue:{src:"https://unpkg.com/vue@2.5.21/dist/vue.js",cb(){Vue.config.ignoredElements=[/^awes-/]}}};(!1 in window||"Promise"in window&&!Promise.prototype.finally)&&(d.promise="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"),Object.assign||(d.object_assign="https://cdn.jsdelivr.net/npm/object-assign-polyfill@0.1.0/index.min.js"),a(d).then(()=>{f._inited=!0;i(f._config.key).then(e=>{Object.defineProperty(f,"_keyValid",{value:e})});window.__awes_plugins_stack__&&window.__awes_plugins_stack__.length&&(window.__awes_plugins_stack__.forEach(e=>{f.use(e)}),delete window.__awes_plugins_stack__);Vue.prototype.$lang=f.lang;let e=document.querySelector("#awes-app");e&&(f._vueRoot=new Vue({el:e}))})}();
